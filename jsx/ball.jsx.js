var JSX={};
(function(){function wb(a,b,c){Object.defineProperty(a,b,{get:function(){var e=c();delete a[b];return a[b]=e},set:function(c){delete a[b];a[b]=c},enumerable:!0,configurable:!0})}function Ab(){}function $a(){}function lc(){}function ab(){}function mc(){var a,b;this.r=12;this.x=0;this.y=10;this.ax=this.vz=this.vy=this.vx=this.z=0;this.ay=-120;this.az=0;a=Math.cos(0);b=Math.sin(0);this.rot=new xb(a,b,0*b,0*b);this.radius=8;this.isBraking=!1}function I(){}function ac(){var a=this,b,c,e,d,f,h,g,j,i,k,
l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,V,ha,R,yb,M,F,K,lb,nc,A,S,L,N,C,E,O,P,ia,H,oc,Fb,I,Q,Gb,qb,rb,sb,mb,bb,cb,db,eb,Xa,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,Ya,Va,Za,Ia,Ha,Ja,Ka,La,xa,ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,Ma;this.trees=this.player=null;this.treeRadius=0;this.items=null;this.totalElapsedMsec=this.itemRadius=0;Lc(["./image/tree.png","./image/so-nya.png","./image/redbull_free.png","./image/sky1.jpg"]);this.isStarted=!1;Ma=this.engine=new bc("canvas");Ma._skyImageSrc=
"./image/sky1.jpg";Ma._skyImage=J.images["./image/sky1.jpg"];Ma._isMobile&&((N=this.engine.camera).farZ=200,N.fovyX=0.7853981633974483,c=N.view,e=N.target,d=N.upper,f=N.fovyX,h=N.nearZ,g=N.farZ,j=N.aspectRatio,n=new m(e.x-c.x,e.y-c.y,e.z-c.z),p=Math.sqrt((C=n.x)*C+(E=n.y)*E+(O=n.z)*O),l=1E-9>p?new m(0,0,0):n.divSelf$N(p),q=new m((Fb=d.y)*(ia=l.z)-(P=d.z)*(oc=l.y),P*(I=l.x)-(H=d.x)*ia,H*oc-Fb*I),s=Math.sqrt((Q=q.x)*Q+(Gb=q.y)*Gb+(qb=q.z)*qb),o=1E-9>s?new m(0,0,0):q.divSelf$N(s),u=new m((cb=l.y)*(sb=
o.z)-(rb=l.z)*(bb=o.y),rb*(db=o.x)-(mb=l.x)*sb,mb*bb-cb*db),t=Math.sqrt((eb=u.x)*eb+(Xa=u.y)*Xa+(Na=u.z)*Na),r=1E-9>t?new m(0,0,0):u.divSelf$N(t),i=new T([Oa=o.x,Pa=o.y,Qa=o.z,-(Oa*(ka=c.x)+Pa*(la=c.y)+Qa*(Ua=c.z)),Ra=r.x,Sa=r.y,Ta=r.z,-(Ra*ka+Sa*la+Ta*Ua),Ya=l.x,Va=l.y,Za=l.z,-(Ya*ka+Va*la+Za*Ua),0,0,0,1]),v=1/Math.tan(f/2),B=v/j,D=g/(g-h),y=-D*h,k=new T([v,0,0,0,0,B,0,0,0,0,D,y,0,0,1,0]),N.viewMatrix=i,N.projectionMatrix=k,x=(Ia=k._m11)*(La=i._m11)+(Ha=k._m12)*(xa=i._m21)+(Ja=k._m13)*(ya=i._m31)+
(Ka=k._m14)*(za=i._m41),w=Ia*(Ba=i._m12)+Ha*(Da=i._m22)+Ja*(Ea=i._m32)+Ka*(Fa=i._m42),z=Ia*(wa=i._m13)+Ha*(fa=i._m23)+Ja*(ga=i._m33)+Ka*(Ga=i._m43),G=Ia*(aa=i._m14)+Ha*(ba=i._m24)+Ja*(ca=i._m34)+Ka*(U=i._m44),V=(Aa=k._m21)*La+(Ca=k._m22)*xa+(ua=k._m23)*ya+(va=k._m24)*za,ha=Aa*Ba+Ca*Da+ua*Ea+va*Fa,R=Aa*wa+Ca*fa+ua*ga+va*Ga,yb=Aa*aa+Ca*ba+ua*ca+va*U,M=(ma=k._m31)*La+(na=k._m32)*xa+(oa=k._m33)*ya+(pa=k._m34)*za,F=ma*Ba+na*Da+oa*Ea+pa*Fa,K=ma*wa+na*fa+oa*ga+pa*Ga,lb=ma*aa+na*ba+oa*ca+pa*U,nc=(qa=k._m41)*
La+(ra=k._m42)*xa+(sa=k._m43)*ya+(ta=k._m44)*za,A=qa*Ba+ra*Da+sa*Ea+ta*Fa,S=qa*wa+ra*fa+sa*ga+ta*Ga,L=qa*aa+ra*ba+sa*ca+ta*U,N.matrix=new T([x,w,z,G,V,ha,R,yb,M,F,K,lb,nc,A,S,L]));this.player={r:12,x:0,y:10,z:0,vx:0,vy:0,vz:0,ax:0,ay:-120,az:0,rot:Mc(0,1,0,0),radius:8,isBraking:!1};this.trees=new Ib([new m(-271,-3,450),new m(-200,-3,720),new m(139,-3,351),new m(171,-3,254),new m(214,-3,192),new m(-253,-3,555),new m(29,-3,385),new m(-72,-3,530),new m(96,-3,678),new m(-49,-3,222)]);this.treeRadius=
24;this.items=new Ib([new m(149,-10,724),new m(107,-10,483),new m(279,-10,551),new m(-295,-10,261),new m(-16,-10,225),new m(95,-10,165),new m(264,-10,161),new m(-50,-10,325),new m(-169,-10,254),new m(271,-10,401)]);this.itemRadius=8;this.engine.onUpdate=function(b){if(a.isStarted){a._checkCollisionWithFloor$N(b);a._checkCollisionWithTrees$();a._checkCollisionWithItems$();a._updateViewpoint$()}};b=new ja(90,135,150);this.engine.onRender=function(c,d){var e,f,h,g,i,j,k,l,n,o,p,r,q,s,t,u,m,v,w,x,y,B,
z,D,G,F;a.totalElapsedMsec=a.totalElapsedMsec+d;c.backgroundColor=b;e=(h=a.player).x;f=h.y-12;h=h.z;g=c._worldMatrix;i=g._m11;j=g._m12;k=g._m13;l=g._m14;n=g._m21;o=g._m22;p=g._m23;r=g._m24;q=g._m31;s=g._m32;t=g._m33;u=g._m34;m=g._m41;v=g._m42;w=g._m43;x=g._m44;g._m11=i*1+j*0+k*0+l*0;g._m12=i*0+j*1+k*0+l*0;g._m13=i*0+j*0+k*1+l*0;g._m14=i*e+j*f+k*h+l*1;g._m21=n*1+o*0+p*0+r*0;g._m22=n*0+o*1+p*0+r*0;g._m23=n*0+o*0+p*1+r*0;g._m24=n*e+o*f+p*h+r*1;g._m31=q*1+s*0+t*0+u*0;g._m32=q*0+s*1+t*0+u*0;g._m33=q*0+
s*0+t*1+u*0;g._m34=q*e+s*f+t*h+u*1;g._m41=m*1+v*0+w*0+x*0;g._m42=m*0+v*1+w*0+x*0;g._m43=m*0+v*0+w*1+x*0;g._m44=m*e+v*f+w*h+x*1;g=a.player.rot;e=c._worldMatrix;k=2*(z=g.x)*z;l=2*(D=g.y)*D;h=2*(G=g.z)*G;f=2*z*D;i=2*z*G;j=2*D*G;n=2*z*(z=g.t);o=2*D*z;g=2*G*z;G=1-l-h;D=f+g;z=i-o;f=f-g;h=1-k-h;g=j+n;i=i+o;j=j-n;F=1-k-l;k=e._m11;l=e._m12;n=e._m13;o=e._m14;p=e._m21;r=e._m22;q=e._m23;s=e._m24;t=e._m31;u=e._m32;m=e._m33;v=e._m34;w=e._m41;x=e._m42;y=e._m43;B=e._m44;e._m11=k*G+l*f+n*i+o*0;e._m12=k*D+l*h+n*j+
o*0;e._m13=k*z+l*g+n*F+o*0;e._m14=k*0+l*0+n*0+o*1;e._m21=p*G+r*f+q*i+s*0;e._m22=p*D+r*h+q*j+s*0;e._m23=p*z+r*g+q*F+s*0;e._m24=p*0+r*0+q*0+s*1;e._m31=t*G+u*f+m*i+v*0;e._m32=t*D+u*h+m*j+v*0;e._m33=t*z+u*g+m*F+v*0;e._m34=t*0+u*0+m*0+v*1;e._m41=w*G+x*f+y*i+B*0;e._m42=w*D+x*h+y*j+B*0;e._m43=w*z+x*g+y*F+B*0;e._m44=w*0+x*0+y*0+B*1;rc(c,a.player.radius,6);c._worldMatrix=new nb;a._renderTrees$LContext3D$(c);a._renderItems$LContext3D$(c);a._renderField$LContext3D$(c)};this.engine._isMobile?this._setMobileOperation$():
this._setPCOperation$()}function Tb(){}function sc(){}function C(){}function m(a,b,c){this.x=a;this.y=b;this.z=c;this.w=1}function O(a,b,c,e){a=this.x=a/e;this.y=b/e;this.z=c/e;this.w=1;NaN===a&&console.log(e)}function tc(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=1}function Q(){}function nb(){this._m11=1;this._m21=this._m14=this._m13=this._m12=0;this._m22=1;this._m32=this._m31=this._m24=this._m23=0;this._m33=1;this._m43=this._m42=this._m41=this._m34=0;this._m44=1}function T(a){this._m11=a[0];this._m12=
a[1];this._m13=a[2];this._m14=a[3];this._m21=a[4];this._m22=a[5];this._m23=a[6];this._m24=a[7];this._m31=a[8];this._m32=a[9];this._m33=a[10];this._m34=a[11];this._m41=a[12];this._m42=a[13];this._m43=a[14];this._m44=a[15]}function X(){}function uc(a,b){this.t=a;this.x=b.x;this.y=b.y;this.z=b.z}function vc(a){this.t=0;this.x=a.x;this.y=a.y;this.z=a.z}function xb(a,b,c,e){this.t=a;this.x=b;this.y=c;this.z=e}function J(){}function bc(a){var b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,V,ha,R,
yb,M,F,K,lb,A,C,S,L,N,E,J,O,H,ia,I,Q,Fb,X,ja,Gb,qb,rb,sb,mb,bb,cb,db,eb,Xa,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,Ya,Va,Za,Ia,Ha,Ja,Ka,La,xa,ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,Ma,fb,gb,hb,ib,W,Y,Z,da,ea,jb,$,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb;this._skyImage=this._skyImageSrc=this.onRender=this.onUpdate=this.screenMatrix=this.camera=null;this._isMobile=/iPhone/.test(P.window.navigator.userAgent);var cc,pc=P.document.getElementById(a);cc=pc instanceof HTMLElement?pc:null;b=cc instanceof
HTMLCanvasElement?cc:null;var qc=b.getContext("2d");this.context=qc instanceof CanvasRenderingContext2D?qc:null;Xa=this._width=b.width;f=this._height=b.height;h=new T([1,0,0,Xa/2,0,1,0,f/2,0,0,1,0,0,0,0,1]);y=Xa/2;x=-f/2;g=h._m11;j=h._m12;i=h._m13;k=h._m14;l=h._m21;o=h._m22;r=h._m23;n=h._m24;p=h._m31;q=h._m32;s=h._m33;u=h._m34;t=h._m41;v=h._m42;B=h._m43;D=h._m44;h._m11=g*y+0*j+0*i+0*k;h._m12=0*g+j*x+0*i+0*k;h._m13=0*g+0*j+1*i+0*k;h._m14=0*g+0*j+0*i+1*k;h._m21=l*y+0*o+0*r+0*n;h._m22=0*l+o*x+0*r+0*
n;h._m23=0*l+0*o+1*r+0*n;h._m24=0*l+0*o+0*r+1*n;h._m31=p*y+0*q+0*s+0*u;h._m32=0*p+q*x+0*s+0*u;h._m33=0*p+0*q+1*s+0*u;h._m34=0*p+0*q+0*s+1*u;h._m41=t*y+0*v+0*B+0*D;h._m42=0*t+v*x+0*B+0*D;h._m43=0*t+0*v+1*B+0*D;h._m44=0*t+0*v+0*B+1*D;this.screenMatrix=h;this._skyImage=this._skyImageSrc=null;c=new m(0,0,-90);e=new m(0,0,0);d=new m(0,1,0);w=this.camera=new dc(c,e,d,1.0471975511965976,0,500,this._height/this._width);z=w.view;G=w.target;V=w.upper;ha=w.fovyX;R=w.nearZ;yb=w.farZ;M=w.aspectRatio;S=new m(G.x-
z.x,G.y-z.y,G.z-z.z);L=Math.sqrt((Na=S.x)*Na+(Oa=S.y)*Oa+(Pa=S.z)*Pa);lb=1E-9>L?new m(0,0,0):S.divSelf$N(L);N=new m((la=V.y)*(Ra=lb.z)-(Qa=V.z)*(Sa=lb.y),Qa*(Ta=lb.x)-(ka=V.x)*Ra,ka*Sa-la*Ta);E=Math.sqrt((Ua=N.x)*Ua+(Ya=N.y)*Ya+(Va=N.z)*Va);A=1E-9>E?new m(0,0,0):N.divSelf$N(E);J=new m((Ka=lb.y)*(Ia=A.z)-(Za=lb.z)*(Ja=A.y),Za*(La=A.x)-(Ha=lb.x)*Ia,Ha*Ja-Ka*La);O=Math.sqrt((xa=J.x)*xa+(ya=J.y)*ya+(za=J.z)*za);C=1E-9>O?new m(0,0,0):J.divSelf$N(O);F=new T([Aa=A.x,Ba=A.y,Ca=A.z,-(Aa*(ua=z.x)+Ba*(va=z.y)+
Ca*(wa=z.z)),Da=C.x,Ea=C.y,Fa=C.z,-(Da*ua+Ea*va+Fa*wa),fa=lb.x,ga=lb.y,Ga=lb.z,-(fa*ua+ga*va+Ga*wa),0,0,0,1]);H=1/Math.tan(ha/2);ia=H/M;I=yb/(yb-R);K=new T([H,0,0,0,0,ia,0,0,0,0,I,-I*R,0,0,1,0]);w.viewMatrix=F;w.projectionMatrix=K;Q=(aa=K._m11)*(ma=F._m11)+(ba=K._m12)*(na=F._m21)+(ca=K._m13)*(oa=F._m31)+(U=K._m14)*(pa=F._m41);Fb=aa*(ra=F._m12)+ba*(ta=F._m22)+ca*(fb=F._m32)+U*(hb=F._m42);X=aa*(ib=F._m13)+ba*(W=F._m23)+ca*(Y=F._m33)+U*(Z=F._m43);ja=aa*(da=F._m14)+ba*(ea=F._m24)+ca*(jb=F._m34)+U*($=
F._m44);Gb=(qa=K._m21)*ma+(sa=K._m22)*na+(Ma=K._m23)*oa+(gb=K._m24)*pa;qb=qa*ra+sa*ta+Ma*fb+gb*hb;rb=qa*ib+sa*W+Ma*Y+gb*Z;sb=qa*da+sa*ea+Ma*jb+gb*$;mb=(Lb=K._m31)*ma+(Mb=K._m32)*na+(Nb=K._m33)*oa+(Ob=K._m34)*pa;bb=Lb*ra+Mb*ta+Nb*fb+Ob*hb;cb=Lb*ib+Mb*W+Nb*Y+Ob*Z;db=Lb*da+Mb*ea+Nb*jb+Ob*$;eb=(Pb=K._m41)*ma+(Qb=K._m42)*na+(Rb=K._m43)*oa+(Sb=K._m44)*pa;w.matrix=new T([Q,Fb,X,ja,Gb,qb,rb,sb,mb,bb,cb,db,eb,Pb*ra+Qb*ta+Rb*fb+Sb*hb,Pb*ib+Qb*W+Rb*Y+Sb*Z,Pb*da+Qb*ea+Rb*jb+Sb*$])}function E(){}function wc(a){this._groupCenter=
this._polygonList=null;this._ignoringZHidden=!1;this._worldMatrix=new nb;this._matrixStack=new ec;this.camera=a;this._depth=3;this.modelList1=new $;this.modelList2=new $;this.modelList3=new $;this.modelList4=new $;this.modelList5=new $;this.backgroundColor=new ja(90,135,158)}function Bb(){}function dc(a,b,c,e,d,f,h){var g,j,i,k,l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,V,ha,R,yb,M,F,K,A,C,E,S,L,N,J,O,H,P,ia,I,Q,W,X,Y,Z,da,ea,ja,$,bb,cb,db,eb,Xa,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,Ya,Va,Za,Ia,Ha,Ja,Ka,La,xa,ya,
za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta;this.matrix=this.projectionMatrix=this.viewMatrix=null;this.view=a;this.target=b;this.upper=c;this.fovyX=e;this.nearZ=d;this.farZ=f;this.aspectRatio=h;this.rotatingMatrix=new nb;g=this.view;j=this.target;i=this.upper;k=this.fovyX;l=this.nearZ;o=this.farZ;r=this.aspectRatio;t=new m(j.x-g.x,j.y-g.y,j.z-g.z);v=Math.sqrt((J=t.x)*J+(O=t.y)*O+(H=t.z)*H);q=1E-9>v?new m(0,0,0):t.divSelf$N(v);B=new m((W=i.y)*(ia=q.z)-(P=i.z)*(Q=q.y),
P*(X=q.x)-(I=i.x)*ia,I*Q-W*X);D=Math.sqrt((Y=B.x)*Y+(Z=B.y)*Z+(da=B.z)*da);s=1E-9>D?new m(0,0,0):B.divSelf$N(D);y=new m((cb=q.y)*(ja=s.z)-(ea=q.z)*(bb=s.y),ea*(db=s.x)-($=q.x)*ja,$*bb-cb*db);x=Math.sqrt((eb=y.x)*eb+(Xa=y.y)*Xa+(Na=y.z)*Na);u=1E-9>x?new m(0,0,0):y.divSelf$N(x);n=new T([Oa=s.x,Pa=s.y,Qa=s.z,-(Oa*(ka=g.x)+Pa*(la=g.y)+Qa*(Ua=g.z)),Ra=u.x,Sa=u.y,Ta=u.z,-(Ra*ka+Sa*la+Ta*Ua),Ya=q.x,Va=q.y,Za=q.z,-(Ya*ka+Va*la+Za*Ua),0,0,0,1]);w=1/Math.tan(k/2);z=w/r;G=o/(o-l);p=new T([w,0,0,0,0,z,0,0,0,
0,G,-G*l,0,0,1,0]);this.viewMatrix=n;this.projectionMatrix=p;V=(Ia=p._m11)*(La=n._m11)+(Ha=p._m12)*(xa=n._m21)+(Ja=p._m13)*(ya=n._m31)+(Ka=p._m14)*(za=n._m41);ha=Ia*(Ba=n._m12)+Ha*(Da=n._m22)+Ja*(Ea=n._m32)+Ka*(Fa=n._m42);R=Ia*(wa=n._m13)+Ha*(fa=n._m23)+Ja*(ga=n._m33)+Ka*(Ga=n._m43);yb=Ia*(aa=n._m14)+Ha*(ba=n._m24)+Ja*(ca=n._m34)+Ka*(U=n._m44);M=(Aa=p._m21)*La+(Ca=p._m22)*xa+(ua=p._m23)*ya+(va=p._m24)*za;F=Aa*Ba+Ca*Da+ua*Ea+va*Fa;K=Aa*wa+Ca*fa+ua*ga+va*Ga;A=Aa*aa+Ca*ba+ua*ca+va*U;C=(ma=p._m31)*La+
(na=p._m32)*xa+(oa=p._m33)*ya+(pa=p._m34)*za;E=ma*Ba+na*Da+oa*Ea+pa*Fa;S=ma*wa+na*fa+oa*ga+pa*Ga;L=ma*aa+na*ba+oa*ca+pa*U;N=(qa=p._m41)*La+(ra=p._m42)*xa+(sa=p._m43)*ya+(ta=p._m44)*za;this.matrix=new T([V,ha,R,yb,M,F,K,A,C,E,S,L,N,qa*Ba+ra*Da+sa*Ea+ta*Fa,qa*wa+ra*fa+sa*ga+ta*Ga,qa*aa+ra*ba+sa*ca+ta*U])}function Cb(){}function ja(a,b,c){this.r=a;this.g=b;this.b=c}function ob(){}function xc(){this.vCenter=this.center=null}function Wa(){}function Hb(a,b){this.vVertices=this.vCenter=this.center=null;
this.vertices=a;this._color=b;this._enabledLighting=!0;this.updateCenter$()}function pb(){}function yc(a,b){this.vCenter=null;this.polygons=a;this.center=b;this._ignoringZHidden=!1}function fc(a,b,c){this.vCenter=null;this.polygons=a;this.center=b;this._ignoringZHidden=c}function kb(){}function gc(a,b){Ub.call(this,a,b,6,6,4,2)}function Ub(a,b,c,e,d,f){var h,g,j,i,k;h=new ja(0,0,0);this.vVertices=this.vCenter=this.center=null;this.vertices=a;this._color=h;this._enabledLighting=!0;this.updateCenter$();
this._src=b;this._image=J.images[b];this.vertices=a;b=a[1];h=a[0];i=b.x-h.x;k=b.y-h.y;b=Math.sqrt(i*i+k*k+(g=b.z-h.z)*g);this._width=0<=b?b:-b;g=a[2];a=a[1];b=g.x-a.x;h=g.y-a.y;a=Math.sqrt(b*b+h*h+(j=g.z-a.z)*j);this._height=0<=a?a:-a;this._maxHorizontalDiv=c;this._maxVerticalDiv=e;this._maxDiv=d;this._minDiv=f;this.updateCenter$()}function zb(){}function hc(a,b,c,e){this.vCenter=null;this._width=b;this._height=c;this._src=e;this._image=J.images[e];this.center=a}function Y(){}function Ib(a){var b,
c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LVector$(a.pop())}function Vb(){}function Z(){}function ec(){this.tail=this.head=null;this.length=0}function Wb(){}function da(){}function $(){this.tail=this.head=null;this.length=0}function Xb(){}function ea(){}function Db(){this.tail=this.head=null;this.length=0}function Yb(){}function P(){}function zc(){}function H(){}function Ac(){}function ic(){}function Bc(){}function Jb(){}function Cc(){}function W(){}function Dc(){this._lastLapMsec=
null;this._elapsedMsec=0;this._startedMsec=null}function tb(){}function Ec(){this._fpsElement=null;this._stopwatch={_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null};this._recentlyMsecLog=[];this._lastMsec=0;this._enabledHtmlLog=!1;this._enabledConsoleLog=!0}function Fc(a){a=P.document.getElementById(a);this._fpsElement=a instanceof HTMLElement?a:null;this._stopwatch={_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null};this._recentlyMsecLog=[];this._lastMsec=0;this._enabledHtmlLog=!0;this._enabledConsoleLog=
!1}function A(){}function Gc(){}function Zb(){window.removeEventListener("load",Zb);document.removeEventListener("DOMContentLoaded",Zb);JSX.runMain("jsx/ball.jsx",[])}JSX.require=function(a){a=Nc[a];return void 0!==a?a:null};JSX.profilerIsRunning=function(){return null!=Ab.getResults};JSX.getProfileResults=function(){return(Ab.getResults||function(){return{}})()};JSX.postProfileResults=function(a){if(null==Ab.postResults)throw Error("profiler has not been turned on");return Ab.postResults(a)};JSX.resetProfileResults=
function(){if(null==Ab.resetResults)throw Error("profiler has not been turned on");return Ab.resetResults()};$a.prototype={};lc.prototype=new $a;$a.sphere$LContext3D$NI=function(a,b,c){var e,d,f,h,g,j,i,k,l;e=2*c;d=Math.sin;f=Math.cos;h=new m(0,0,0);a._polygonList=new Db;a._groupCenter=h;a._ignoringZHidden=!1;for(h=0;h<e;h++)j=1,i=h+1,k=h,$b(a,[new m(f(6.283185307179586*i/e)*d(0/c)*b,f(0/c)*b,d(6.283185307179586*i/e)*d(0/c)*b),new m(f(6.283185307179586*i/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*
j/c)*b,d(6.283185307179586*i/e)*d(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,d(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b)],new ja(128,128,255));for(h=1;h<c-1;h++)for(l=0;l<e;l++)g=h,j=h+1,i=l+1,k=l,$b(a,[new m(f(6.283185307179586*i/e)*d(3.141592653589793*h/c)*b,f(3.141592653589793*h/c)*b,d(6.283185307179586*i/e)*d(3.141592653589793*h/c)*b),new m(f(6.283185307179586*i/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*
b,d(6.283185307179586*i/e)*d(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,d(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/e)*d(3.141592653589793*g/c)*b,f(3.141592653589793*g/c)*b,d(6.283185307179586*k/e)*d(3.141592653589793*g/c)*b)],new ja(128,128,255));for(h=0;h<e;h++)g=c-1,j=c,i=h+1,k=h,$b(a,[new m(f(6.283185307179586*h/e)*d(3.141592653589793*g/c)*b,f(3.141592653589793*g/c)*b,d(6.283185307179586*h/
e)*d(3.141592653589793*g/c)*b),new m(f(6.283185307179586*i/e)*d(3.141592653589793*g/c)*b,f(3.141592653589793*g/c)*b,d(6.283185307179586*i/e)*d(3.141592653589793*g/c)*b),new m(f(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,d(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b)],new ja(128,128,255));jc(a)};var rc=$a.sphere$LContext3D$NI;$a.tile$LContext3D$IIIILColor$=function(a,b,c,e,d,f){b=[new m(b-d/2,c,e-d/2),new m(b-d/2,c,e+d/2),new m(b+d/2,c,e+d/2),new m(b+d/2,c,e-
d/2)];Eb(a,new Hb(b,f))};var Oc=$a.tile$LContext3D$IIIILColor$;$a.tileOnGroup$LContext3D$IIIILColor$=function(a,b,c,e,d,f){$b(a,[new m(b-d/2,c,e-d/2),new m(b-d/2,c,e+d/2),new m(b+d/2,c,e+d/2),new m(b+d/2,c,e-d/2)],f)};var ub=$a.tileOnGroup$LContext3D$IIIILColor$;ab.prototype={};mc.prototype=new ab;ab.moveForward$LPlayer$=function(a){vb(a,50,0)};ab.move$LPlayer$NN=function(a,b,c){var e,d,f;a.isBraking=!1;e=a.vx;d=a.vz;f=Math.sqrt(e*e+d*d);if(1E-9<(0<=d?d:-d))d/=f;if(1E-9<(0<=e?e:-e))e/=f;d=Math.atan2(e,
d);e=Math.sin(d);d=Math.cos(d);a.az=d*b-e*c;a.ax=e*b+d*c};var vb=ab.move$LPlayer$NN;ab.brake$LPlayer$=function(a){a.isBraking=!0};ab.update$LPlayer$N=function(a,b){var c,e,d,f,h,g,j,i,k,l;c=b/1E3;0.1<c&&(c=0.1);e=a.vx+=a.ax*c;a.vy+=a.ay*c;a.vz+=a.az*c;e=-100>=e?-100:e;a.vx=100<=e?100:e;e=a.vy;e=-3E3>=e?-3E3:e;a.vy=3E3<=e?3E3:e;e=a.vz;e=-100>=e?-100:e;f=a.vz=100<=e?100:e;e=a.vx*c;d=a.vy*c;f*=c;a.x+=e;a.y+=d;a.z+=f;d=a.isBraking?0.1:0.01;a.vx-=(0<=e?e:-e)*a.vx*d;a.vz-=(0<=f?f:-f)*a.vz*d;a.isBraking&&
(c=Math.pow(2.718281828459045,-c),a.az*=c,a.ax*=c);c=new m(0-1*f,0*f-0*e,1*e-0);d=Math.sqrt((h=c.x)*h+(g=c.y)*g+(j=c.z)*j);h=1E-9>d?new m(0,0,0):c.divSelf$N(d);e=Math.sqrt(e*e+0+f*f)/a.r;g=h.x;j=h.y;c=h.z;h=Math.cos(e/2);e=Math.sin(e/2);g*=e;j*=e;l=c*e;c=a.rot;e=(f=c.t)*h-((d=c.x)*g+(i=c.y)*j+(k=c.z)*l);c.t=e;c.x=f*g+h*d+(i*l-k*j);c.y=f*j+h*i+(k*g-d*l);c.z=f*l+h*k+(d*j-i*g)};var Pc=ab.update$LPlayer$N;I.prototype={};ac.prototype=new I;I.prototype._initTrees$=function(){this.trees=new Ib([new m(-271,
-3,450),new m(-200,-3,720),new m(139,-3,351),new m(171,-3,254),new m(214,-3,192),new m(-253,-3,555),new m(29,-3,385),new m(-72,-3,530),new m(96,-3,678),new m(-49,-3,222)]);this.treeRadius=24};I.prototype._initItems$=function(){this.items=new Ib([new m(149,-10,724),new m(107,-10,483),new m(279,-10,551),new m(-295,-10,261),new m(-16,-10,225),new m(95,-10,165),new m(264,-10,161),new m(-50,-10,325),new m(-169,-10,254),new m(271,-10,401)]);this.itemRadius=8};I.prototype._checkCollisionWithFloor$N=function(a){var b,
c,e;b=this.player;Pc(b,a);c=b.x;a=b.y;e=b.z;if((-30<=c&&30>=c&&-30<=e&&150>=e||-300<=c&&300>=c&&150<=e&&750>=e||-30<=c&&30>=c&&750<=e&&810>=e||-30<=c&&570>=c&&810<=e&&870>=e)&&2*-b.radius<a&&0>a)b.vy=0.5*-b.vy,b.y=0;510<=c&&(570>=c&&210<=e&&810>=e)&&(c=Math.floor((810-e)/30),9<c&&(c=19-c),c*=5,c-2*b.radius<a&&a<c&&(b.vy=0.5*-b.vy,b.y=c))};I.prototype._checkCollisionWithTrees$=function(){var a=this,b;b=this.player;this.trees.forEach$F$LVector$V$(function(c){var e,d,f,h,g,j,i,k,l;e=b.x-c.x;d=b.y-c.y;
c=b.z-c.z;f=a.treeRadius+b.radius;e*e+d*d+c*c<f*f&&(e=new m(e,d,c),d=Math.sqrt((h=e.x)*h+(g=e.y)*g+(j=e.z)*j),h=1E-9>d?new m(0,0,0):e.divSelf$N(d),g=Math.sqrt((i=b.vx)*i+(k=b.vy)*k+(l=b.vz)*l),b.ax+=2*g*(i=h.x),b.vy+=2*g*h.y,b.az+=2*g*(k=h.z),b.x+=i*(i=a.treeRadius)/4,b.z+=k*i/4)})};I.prototype._checkCollisionWithItems$=function(){var a,b,c,e,d,f,h,g;a=this.player;b=this.items;c=this.itemRadius;for(e=b.head;e;e=e._next)d=e.value,f=d.x-a.x,h=d.y-a.y,d=d.z-a.z,g=c+a.radius,f*f+h*h+d*d<g*g&&b.remove$LNode$Vector$E$(e)};
I.prototype._updateViewpoint$=function(){var a,b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,V,ha,R,A,M,F,K,C,E,J,S,L,N,O,H,P,I,ia,Q,W,X,Y,Z,da,ea,ja,$,mb,bb,cb,db,eb,Xa,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,Ya,Va,Za,Ia,Ha,Ja,Ka,La,xa,ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,Ma,fb,gb,hb,ib;a=this.player;b=-a.vz;c=-a.vx;e=Math.sqrt(b*b+c*c);1E-9>e?(b=-1,c=0):(b/=e,c/=e);d=a.y;0>d&&(d=-d/2);f=10;h=Math.sqrt((P=a.vx)*P+(I=a.vz)*I);50>h&&(f-=0.6*(50-h));g=new m(a.x+
50*c,1.2*d+f,a.z+50*b);j=new m(a.x,a.y,a.z);(ia=this.engine.camera).target=j;ia.view=g;i=ia.view;k=ia.target;l=ia.upper;o=ia.fovyX;r=ia.nearZ;n=ia.farZ;p=ia.aspectRatio;B=new m(k.x-i.x,k.y-i.y,k.z-i.z);D=Math.sqrt((Q=B.x)*Q+(W=B.y)*W+(X=B.z)*X);u=1E-9>D?new m(0,0,0):B.divSelf$N(D);y=new m((ja=l.y)*(Z=u.z)-(Y=l.z)*(ea=u.y),Y*($=u.x)-(da=l.x)*Z,da*ea-ja*$);x=Math.sqrt((mb=y.x)*mb+(bb=y.y)*bb+(cb=y.z)*cb);t=1E-9>x?new m(0,0,0):y.divSelf$N(x);w=new m((Oa=u.y)*(eb=t.z)-(db=u.z)*(Na=t.y),db*(Pa=t.x)-(Xa=
u.x)*eb,Xa*Na-Oa*Pa);z=Math.sqrt((Qa=w.x)*Qa+(Ra=w.y)*Ra+(ka=w.z)*ka);v=1E-9>z?new m(0,0,0):w.divSelf$N(z);q=new T([Sa=t.x,la=t.y,Ta=t.z,-(Sa*(Ya=i.x)+la*(Za=i.y)+Ta*(Ha=i.z)),Ua=v.x,Va=v.y,Ia=v.z,-(Ua*Ya+Va*Za+Ia*Ha),Ja=u.x,Ka=u.y,La=u.z,-(Ja*Ya+Ka*Za+La*Ha),0,0,0,1]);G=1/Math.tan(o/2);V=G/p;ha=n/(n-r);s=new T([G,0,0,0,0,V,0,0,0,0,ha,-ha*r,0,0,1,0]);ia.viewMatrix=q;ia.projectionMatrix=s;R=(xa=s._m11)*(Ba=q._m11)+(ya=s._m12)*(Ca=q._m21)+(za=s._m13)*(Da=q._m31)+(Aa=s._m14)*(ua=q._m41);A=xa*(va=q._m12)+
ya*(wa=q._m22)+za*(ga=q._m32)+Aa*(aa=q._m42);M=xa*(ba=q._m13)+ya*(ca=q._m23)+za*(U=q._m33)+Aa*(ma=q._m43);F=xa*(na=q._m14)+ya*(oa=q._m24)+za*(pa=q._m34)+Aa*(qa=q._m44);K=(Ea=s._m21)*Ba+(Fa=s._m22)*Ca+(fa=s._m23)*Da+(Ga=s._m24)*ua;C=Ea*va+Fa*wa+fa*ga+Ga*aa;E=Ea*ba+Fa*ca+fa*U+Ga*ma;J=Ea*na+Fa*oa+fa*pa+Ga*qa;S=(ra=s._m31)*Ba+(sa=s._m32)*Ca+(ta=s._m33)*Da+(Ma=s._m34)*ua;L=ra*va+sa*wa+ta*ga+Ma*aa;N=ra*ba+sa*ca+ta*U+Ma*ma;O=ra*na+sa*oa+ta*pa+Ma*qa;H=(fb=s._m41)*Ba+(gb=s._m42)*Ca+(hb=s._m43)*Da+(ib=s._m44)*
ua;ia.matrix=new T([R,A,M,F,K,C,E,J,S,L,N,O,H,fb*va+gb*wa+hb*ga+ib*aa,fb*ba+gb*ca+hb*U+ib*ma,fb*na+gb*oa+hb*pa+ib*qa])};I.prototype._renderPlayer$LContext3D$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,m,t,v,B,D,y,x,w,z;b=(e=this.player).x;c=e.y-12;e=e.z;d=a._worldMatrix;f=d._m11;h=d._m12;g=d._m13;j=d._m14;i=d._m21;k=d._m22;l=d._m23;o=d._m24;r=d._m31;n=d._m32;p=d._m33;q=d._m34;s=d._m41;m=d._m42;t=d._m43;v=d._m44;d._m11=1*f+0*h+0*g+0*j;d._m12=0*f+1*h+0*g+0*j;d._m13=0*f+0*h+1*g+0*j;d._m14=f*b+
h*c+g*e+1*j;d._m21=1*i+0*k+0*l+0*o;d._m22=0*i+1*k+0*l+0*o;d._m23=0*i+0*k+1*l+0*o;d._m24=i*b+k*c+l*e+1*o;d._m31=1*r+0*n+0*p+0*q;d._m32=0*r+1*n+0*p+0*q;d._m33=0*r+0*n+1*p+0*q;d._m34=r*b+n*c+p*e+1*q;d._m41=1*s+0*m+0*t+0*v;d._m42=0*s+1*m+0*t+0*v;d._m43=0*s+0*m+1*t+0*v;d._m44=s*b+m*c+t*e+1*v;d=this.player.rot;b=a._worldMatrix;g=2*(y=d.x)*y;j=2*(x=d.y)*x;e=2*(w=d.z)*w;c=2*y*x;f=2*y*w;h=2*x*w;i=2*y*(y=d.t);k=2*x*y;d=2*w*y;w=1-j-e;x=c+d;y=f-k;c-=d;e=1-g-e;d=h+i;f+=k;h-=i;z=1-g-j;g=b._m11;j=b._m12;i=b._m13;
k=b._m14;l=b._m21;o=b._m22;r=b._m23;n=b._m24;p=b._m31;q=b._m32;s=b._m33;m=b._m34;t=b._m41;v=b._m42;B=b._m43;D=b._m44;b._m11=g*w+j*c+i*f+0*k;b._m12=g*x+j*e+i*h+0*k;b._m13=g*y+j*d+i*z+0*k;b._m14=0*g+0*j+0*i+1*k;b._m21=l*w+o*c+r*f+0*n;b._m22=l*x+o*e+r*h+0*n;b._m23=l*y+o*d+r*z+0*n;b._m24=0*l+0*o+0*r+1*n;b._m31=p*w+q*c+s*f+0*m;b._m32=p*x+q*e+s*h+0*m;b._m33=p*y+q*d+s*z+0*m;b._m34=0*p+0*q+0*s+1*m;b._m41=t*w+v*c+B*f+0*D;b._m42=t*x+v*e+B*h+0*D;b._m43=t*y+v*d+B*z+0*D;b._m44=0*t+0*v+0*B+1*D;rc(a,this.player.radius,
6);a._worldMatrix=new nb};I.prototype._renderTrees$LContext3D$=function(a){this.trees.forEach$F$LVector$V$(function(b){var c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,u,t,v;c=b.x;e=b.y;b=b.z;a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());d=a._worldMatrix;f=d._m11;h=d._m12;g=d._m13;j=d._m14;i=d._m21;k=d._m22;l=d._m23;o=d._m24;r=d._m31;n=d._m32;p=d._m33;q=d._m34;s=d._m41;u=d._m42;t=d._m43;v=d._m44;d._m11=1*f+0*h+0*g+0*j;d._m12=0*f+1*h+0*g+0*j;d._m13=0*f+0*h+1*g+0*j;d._m14=f*c+h*e+g*b+1*j;d._m21=1*i+0*
k+0*l+0*o;d._m22=0*i+1*k+0*l+0*o;d._m23=0*i+0*k+1*l+0*o;d._m24=i*c+k*e+l*b+1*o;d._m31=1*r+0*n+0*p+0*q;d._m32=0*r+1*n+0*p+0*q;d._m33=0*r+0*n+1*p+0*q;d._m34=r*c+n*e+p*b+1*q;d._m41=1*s+0*u+0*t+0*v;d._m42=0*s+1*u+0*t+0*v;d._m43=0*s+0*u+1*t+0*v;d._m44=s*c+u*e+t*b+1*v;Qc(a,new m(0,0,0),50,34,"./image/tree.png");a._worldMatrix=a._matrixStack.removeFirst$()})};I.prototype._renderItems$LContext3D$=function(a){var b,c,e,d,f;b=3.141592653589793*this.totalElapsedMsec/1E3;c=Math.cos(b/2);e=Math.sin(b/2);d=0*e;
f=0*e;this.items.forEach$F$LVector$V$(function(b){var g,j,i,k,l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,V,ha,R,A;g=b.x;j=b.y;b=b.z;a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());i=a._worldMatrix;k=i._m11;l=i._m12;o=i._m13;r=i._m14;n=i._m21;p=i._m22;q=i._m23;s=i._m24;u=i._m31;t=i._m32;v=i._m33;B=i._m34;D=i._m41;y=i._m42;x=i._m43;w=i._m44;i._m11=1*k+0*l+0*o+0*r;i._m12=0*k+1*l+0*o+0*r;i._m13=0*k+0*l+1*o+0*r;i._m14=k*g+l*j+o*b+1*r;i._m21=1*n+0*p+0*q+0*s;i._m22=0*n+1*p+0*q+0*s;i._m23=0*n+0*p+1*q+0*s;
i._m24=n*g+p*j+q*b+1*s;i._m31=1*u+0*t+0*v+0*B;i._m32=0*u+1*t+0*v+0*B;i._m33=0*u+0*t+1*v+0*B;i._m34=u*g+t*j+v*b+1*B;i._m41=1*D+0*y+0*x+0*w;i._m42=0*D+1*y+0*x+0*w;i._m43=0*D+0*y+1*x+0*w;i._m44=D*g+y*j+x*b+1*w;g=a._worldMatrix;p=2*d*d;q=2*e*e;l=2*f*f;k=2*d*e;r=2*d*f;n=2*e*f;s=2*d*c;u=2*e*c;o=2*f*c;j=1-q-l;b=k+o;i=r-u;k-=o;l=1-p-l;o=n+s;r+=u;n-=s;A=1-p-q;p=g._m11;q=g._m12;s=g._m13;u=g._m14;t=g._m21;v=g._m22;B=g._m23;D=g._m24;y=g._m31;x=g._m32;w=g._m33;z=g._m34;G=g._m41;V=g._m42;ha=g._m43;R=g._m44;g._m11=
p*j+q*k+s*r+0*u;g._m12=p*b+q*l+s*n+0*u;g._m13=p*i+q*o+s*A+0*u;g._m14=0*p+0*q+0*s+1*u;g._m21=t*j+v*k+B*r+0*D;g._m22=t*b+v*l+B*n+0*D;g._m23=t*i+v*o+B*A+0*D;g._m24=0*t+0*v+0*B+1*D;g._m31=y*j+x*k+w*r+0*z;g._m32=y*b+x*l+w*n+0*z;g._m33=y*i+x*o+w*A+0*z;g._m34=0*y+0*x+0*w+1*z;g._m41=G*j+V*k+ha*r+0*R;g._m42=G*b+V*l+ha*n+0*R;g._m43=G*i+V*o+ha*A+0*R;g._m44=0*G+0*V+0*ha+1*R;Rc(a,[new m(-15,-10,0),new m(15,-10,0),new m(15,10,0),new m(-15,10,0)],"./image/redbull_free.png",2,2,1,1);a._worldMatrix=a._matrixStack.removeFirst$()})};
I.prototype._renderField$LContext3D$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,u,t;b=new ja(192,192,192);c=new ja(160,255,160);e=new ja(96,255,96);Hc(a,5);d=new m(0,0,0);a._polygonList=new Db;a._groupCenter=d;a._ignoringZHidden=!0;for(d=0;6>d;d++)ub(a,-15,-20,-15+30*d,30,b),ub(a,15,-20,-15+30*d,30,b);a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());d=a._worldMatrix;b=d._m11;f=d._m12;h=d._m13;g=d._m14;j=d._m21;i=d._m22;k=d._m23;l=d._m24;o=d._m31;r=d._m32;n=d._m33;p=d._m34;q=d._m41;s=
d._m42;u=d._m43;t=d._m44;d._m11=1*b+0*f+0*h+0*g;d._m12=0*b+1*f+0*h+0*g;d._m13=0*b+0*f+1*h+0*g;d._m14=0*b+0*f+450*h+1*g;d._m21=1*j+0*i+0*k+0*l;d._m22=0*j+1*i+0*k+0*l;d._m23=0*j+0*i+1*k+0*l;d._m24=0*j+0*i+450*k+1*l;d._m31=1*o+0*r+0*n+0*p;d._m32=0*o+1*r+0*n+0*p;d._m33=0*o+0*r+1*n+0*p;d._m34=0*o+0*r+450*n+1*p;d._m41=1*q+0*s+0*u+0*t;d._m42=0*q+1*s+0*u+0*t;d._m43=0*q+0*s+1*u+0*t;d._m44=0*q+0*s+450*u+1*t;for(d=0;20>d;d++)for(b=0;20>b;b++)f=0===(d+b)%2?c:e,ub(a,30*d-285,-20,30*b-285,30,f);a._worldMatrix=
a._matrixStack.removeFirst$();jc(a);d=new m(0,0,0);a._polygonList=new Db;a._groupCenter=d;a._ignoringZHidden=!0;ub(a,-15,-20,765,30,e);ub(a,-15,-20,795,30,c);ub(a,15,-20,795,30,e);ub(a,15,-20,765,30,c);a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());d=a._worldMatrix;b=d._m11;f=d._m12;h=d._m13;g=d._m14;j=d._m21;i=d._m22;k=d._m23;l=d._m24;o=d._m31;r=d._m32;n=d._m33;p=d._m34;q=d._m41;s=d._m42;u=d._m43;t=d._m44;d._m11=1*b+0*f+0*h+0*g;d._m12=0*b+1*f+0*h+0*g;d._m13=0*b+0*f+1*h+0*g;d._m14=0*b+0*
f+840*h+1*g;d._m21=1*j+0*i+0*k+0*l;d._m22=0*j+1*i+0*k+0*l;d._m23=0*j+0*i+1*k+0*l;d._m24=0*j+0*i+840*k+1*l;d._m31=1*o+0*r+0*n+0*p;d._m32=0*o+1*r+0*n+0*p;d._m33=0*o+0*r+1*n+0*p;d._m34=0*o+0*r+840*n+1*p;d._m41=1*q+0*s+0*u+0*t;d._m42=0*q+1*s+0*u+0*t;d._m43=0*q+0*s+1*u+0*t;d._m44=0*q+0*s+840*u+1*t;for(d=0;2>d;d++)for(b=0;20>b;b++)f=1===(d+b)%2?c:e,ub(a,30*b-15,-20,30*d-15,30,f);a._worldMatrix=a._matrixStack.removeFirst$();jc(a);a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());d=a._worldMatrix;b=
d._m11;f=d._m12;h=d._m13;g=d._m14;j=d._m21;i=d._m22;k=d._m23;l=d._m24;o=d._m31;r=d._m32;n=d._m33;p=d._m34;q=d._m41;s=d._m42;u=d._m43;t=d._m44;d._m11=1*b+0*f+0*h+0*g;d._m12=0*b+1*f+0*h+0*g;d._m13=0*b+0*f+1*h+0*g;d._m14=540*b+0*f+510*h+1*g;d._m21=1*j+0*i+0*k+0*l;d._m22=0*j+1*i+0*k+0*l;d._m23=0*j+0*i+1*k+0*l;d._m24=540*j+0*i+510*k+1*l;d._m31=1*o+0*r+0*n+0*p;d._m32=0*o+1*r+0*n+0*p;d._m33=0*o+0*r+1*n+0*p;d._m34=540*o+0*r+510*n+1*p;d._m41=1*q+0*s+0*u+0*t;d._m42=0*q+1*s+0*u+0*t;d._m43=0*q+0*s+1*u+0*t;d._m44=
540*q+0*s+510*u+1*t;for(d=0;2>d;d++)for(b=0;20>b;b++)h=b,9<b&&(h=19-h),f=0===(d+b)%2?c:e,Oc(a,30*d-15,-20+5*h,285-30*b,30,f);a._worldMatrix=a._matrixStack.removeFirst$();Hc(a,3)};I.prototype._setMobileOperation$=function(){var a=this;P.window.addEventListener("devicemotion",function(b){var c;c=b instanceof DeviceMotionEvent?b:null;b=30*c.accelerationIncludingGravity.y;c=30*c.accelerationIncludingGravity.x/2;0>b&&(b=a.player,b.isBraking=!0,b=0);vb(a.player,b,c)});P.window.addEventListener("touchstart",
function(){a.isStarted?a.player.vy=80:(a.isStarted=!0,a.player.vz=100)})};I.prototype._setPCOperation$=function(){var a=this;P.window.document.addEventListener("keypress",function(b){if(a.isStarted)switch(b=b instanceof KeyboardEvent?b:null,b.keyCode){case 119:vb(a.player,100,0);break;case 115:b=a.player;b.isBraking=!0;break;case 97:vb(a.player,0,-50);break;case 100:vb(a.player,0,50);break;case 104:vb(a.player,0,-50);break;case 106:b=a.player;b.isBraking=!0;break;case 107:vb(a.player,100,0);break;
case 108:vb(a.player,0,50);break;case 32:a.player.vy=80}else a.isStarted=!0,a.player.vz=100},!1)};I.prototype.run$=function(){this.engine.start$()};Tb.prototype={};sc.prototype=new Tb;Tb.main$AS=function(){(new ac).engine.start$()};C.prototype={};m.prototype=new C;O.prototype=new C;tc.prototype=new C;C.origin$=function(){return new m(0,0,0)};C.prototype.add$LVector$=function(a){return new m(this.x+a.x,this.y+a.y,this.z+a.z)};C.prototype.addSelf$LVector$=function(a){this.x+=a.x;this.y+=a.y;this.z+=
a.z;return this};C.prototype.sub$LVector$=function(a){return new m(this.x-a.x,this.y-a.y,this.z-a.z)};C.prototype.subSelf$LVector$=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};C.prototype.mul$N=function(a){return new m(this.x*a,this.y*a,this.z*a)};C.prototype.mulSelf$N=function(a){this.x*=a;this.y*=a;this.z*=a;return this};C.prototype.div$N=function(a){return new m(this.x/a,this.y/a,this.z/a)};C.prototype.divSelf$N=function(a){this.x/=a;this.y/=a;this.z/=a;return this};C.prototype.dot$LVector$=
function(a){return this.x*a.x+this.y*a.y+this.z*a.z};C.prototype.cross$LVector$=function(a){var b,c,e,d,f,h;return new m((f=this.y)*(c=a.z)-(b=this.z)*(d=a.y),b*(h=a.x)-(e=this.x)*c,e*d-f*h)};C.prototype.crossSelf$LVector$=function(a){var b,c,e,d,f;b=(f=this.y)*(c=a.z)-(e=this.z)*(d=a.y);c=e*(e=a.x)-(a=this.x)*c;this.x=b;this.y=c;this.z=a*d-f*e;return this};C.prototype.unit$=function(){var a,b,c,e;a=Math.sqrt((b=this.x)*b+(c=this.y)*c+(e=this.z)*e);return 1E-9>a?new m(0,0,0):new m(this.x/a,this.y/
a,this.z/a)};C.prototype.unitSelf$=function(){var a,b,c,e;a=Math.sqrt((b=this.x)*b+(c=this.y)*c+(e=this.z)*e);return 1E-9>a?new m(0,0,0):this.divSelf$N(a)};C.prototype.sqabs$=function(){var a,b,c;return(a=this.x)*a+(b=this.y)*b+(c=this.z)*c};C.prototype.abs$=function(){var a,b,c;return Math.sqrt((a=this.x)*a+(b=this.y)*b+(c=this.z)*c)};C.prototype.rotateX$N=function(a){var b,c,e;b=Math.sin(a);a=Math.cos(a);return new m(this.x,(e=this.y)*a-(c=this.z)*b,c*a+e*b)};C.prototype.rotateXSelf$N=function(a){var b,
c,e,d;b=Math.sin(a);a=Math.cos(a);this.y=c=(d=this.y)*a-(e=this.z)*b;this.z=e*a+d*b;return this};C.prototype.rotateY$N=function(a){var b,c,e;b=Math.sin(a);a=Math.cos(a);return new m((e=this.x)*a+(c=this.z)*b,this.y,c*a-e*b)};C.prototype.rotateYSelf$N=function(a){var b,c,e,d;b=Math.sin(a);a=Math.cos(a);this.x=c=(d=this.x)*a+(e=this.z)*b;this.z=e*a-d*b;return this};C.prototype.rotateZ$N=function(a){var b,c,e;b=Math.sin(a);a=Math.cos(a);return new m(this.x*a-(c=this.y)*b,c*a+(e=this.z)*b,e)};C.prototype.rotateZSelf$N=
function(a){var b,c,e;b=Math.sin(a);c=Math.cos(a);a=this.x*c-(e=this.y)*b;b=e*c+this.z*b;this.x=a;this.y=b;return this};C.prototype.transform$LMatrix$=function(a){var b,c,e,d,f;b=a._m11*(c=this.x)+a._m12*(e=this.y)+a._m13*(d=this.z)+a._m14*(f=this.w);return new O(b,a._m21*c+a._m22*e+a._m23*d+a._m24*f,a._m31*c+a._m32*e+a._m33*d+a._m34*f,a._m41*c+a._m42*e+a._m43*d+a._m44*f)};C.prototype.transformSelf$LMatrix$=function(a){var b,c,e,d,f,h,g;b=a._m11*(d=this.x)+a._m12*(f=this.y)+a._m13*(h=this.z)+a._m14*
(g=this.w);c=a._m21*d+a._m22*f+a._m23*h+a._m24*g;e=a._m31*d+a._m32*f+a._m33*h+a._m34*g;a=a._m41*d+a._m42*f+a._m43*h+a._m44*g;this.x=b/a;this.y=c/a;this.z=e/a;this.w=1;return this};C.prototype.toString=function(){var a;a=function(a){var c,e,a=a.toFixed(1);c=a.length;for(e=0;e<8-c;e++)a=" "+a;return a};return"("+a(this.x)+","+a(this.y)+","+a(this.z)+","+a(this.w)+")"};Q.prototype={};nb.prototype=new Q;T.prototype=new Q;Q.prototype.copy$=function(){return new T([this._m11,this._m12,this._m13,this._m14,
this._m21,this._m22,this._m23,this._m24,this._m31,this._m32,this._m33,this._m34,this._m41,this._m42,this._m43,this._m44])};Q.translating$LVector$=function(a){return new T([1,0,0,a.x,0,1,0,a.y,0,0,1,a.z,0,0,0,1])};Q.translating$NNN=function(a,b,c){return new T([1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1])};Q.rotatingX$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new T([1,0,0,0,0,a,-b,0,0,b,a,0,0,0,0,1])};Q.rotatingY$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new T([a,0,b,0,0,1,0,0,-b,0,
a,0,0,0,0,1])};Q.rotatingZ$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new T([a,-b,0,0,b,a,0,0,0,0,1,0,0,0,0,1])};Q.scaling$NNN=function(a,b,c){return new T([a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1])};Q.prototype.mul$LVector$=function(a){var b,c,e,d,a=this._m11*(b=a.x)+this._m12*(c=a.y)+this._m13*(e=a.z)+this._m14*(d=a.w);return new O(a,this._m21*b+this._m22*c+this._m23*e+this._m24*d,this._m31*b+this._m32*c+this._m33*e+this._m34*d,this._m41*b+this._m42*c+this._m43*e+this._m44*d)};Q.prototype.compose$LMatrix$=
function(a){var b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,m,t,v,B,D,y,x,w,z,G,V,ha,A;b=(g=this._m11)*(k=a._m11)+(j=this._m12)*(l=a._m21)+(i=this._m13)*(o=a._m31)+(d=this._m14)*(h=a._m41);c=g*(n=a._m12)+j*(q=a._m22)+i*(m=a._m32)+d*(v=a._m42);e=g*(B=a._m13)+j*(D=a._m23)+i*(y=a._m33)+d*(x=a._m43);a=g*(g=a._m14)+j*(j=a._m24)+i*(i=a._m34)+d*(w=a._m44);d=(r=this._m21)*k+(p=this._m22)*l+(s=this._m23)*o+(t=this._m24)*h;f=(z=this._m31)*k+(G=this._m32)*l+(V=this._m33)*o+(ha=this._m34)*h;h=(A=this._m41)*k+(k=this._m42)*
l+(l=this._m43)*o+(o=this._m44)*h;return new T([b,c,e,a,d,r*n+p*q+s*m+t*v,r*B+p*D+s*y+t*x,r*g+p*j+s*i+t*w,f,z*n+G*q+V*m+ha*v,z*B+G*D+V*y+ha*x,z*g+G*j+V*i+ha*w,h,A*n+k*q+l*m+o*v,A*B+k*D+l*y+o*x,A*g+k*j+l*i+o*w])};Q.prototype.composeSelf$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,m,u,t,v,B,D,y,x,w,z,G,V;b=this._m11;c=this._m12;e=this._m13;d=this._m14;f=this._m21;h=this._m22;g=this._m23;j=this._m24;i=this._m31;k=this._m32;l=this._m33;o=this._m34;r=this._m41;n=this._m42;p=this._m43;q=this._m44;
this._m11=b*(m=a._m11)+c*(u=a._m21)+e*(t=a._m31)+d*(v=a._m41);this._m12=b*(B=a._m12)+c*(D=a._m22)+e*(y=a._m32)+d*(x=a._m42);this._m13=b*(w=a._m13)+c*(z=a._m23)+e*(G=a._m33)+d*(V=a._m43);this._m14=b*(b=a._m14)+c*(c=a._m24)+e*(e=a._m34)+d*(a=a._m44);this._m21=f*m+h*u+g*t+j*v;this._m22=f*B+h*D+g*y+j*x;this._m23=f*w+h*z+g*G+j*V;this._m24=f*b+h*c+g*e+j*a;this._m31=i*m+k*u+l*t+o*v;this._m32=i*B+k*D+l*y+o*x;this._m33=i*w+k*z+l*G+o*V;this._m34=i*b+k*c+l*e+o*a;this._m41=r*m+n*u+p*t+q*v;this._m42=r*B+n*D+p*
y+q*x;this._m43=r*w+n*z+p*G+q*V;this._m44=r*b+n*c+p*e+q*a;return this};Q.prototype.toString=function(){var a,b;a=function(a){var b,d,a=a.toFixed(1);b=a.length;for(d=0;d<8-b;d++)a=" "+a;return a};b=""+("|"+a(this._m11)+","+a(this._m12)+","+a(this._m13)+","+a(this._m14)+"|\n");b+="|"+a(this._m21)+","+a(this._m22)+","+a(this._m23)+","+a(this._m24)+"|\n";b+="|"+a(this._m31)+","+a(this._m32)+","+a(this._m33)+","+a(this._m34)+"|\n";return b+="|"+a(this._m41)+","+a(this._m42)+","+a(this._m43)+","+a(this._m44)+
"|\n"};Q.prototype.invert$=function(){var a,b,c,e,d,f;e=[this._m11,this._m12,this._m13,this._m14,this._m21,this._m22,this._m23,this._m24,this._m31,this._m32,this._m33,this._m34,this._m41,this._m42,this._m43,this._m44];d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];for(a=0;3>a;a++){c=e[4*a+a];for(b=0;4>b;b++)e[4*a+b]/=c,d[4*a+b]/=c;for(b=a+1;4>b;b++){f=e[4*b+a];for(c=0;4>c;c++)e[4*b+c]-=e[4*a+c]*f,d[4*b+c]-=d[4*a+c]*f}}for(a=3;0<a;a--)for(b=a-1;0<=b;b--){f=e[4*b+a];for(c=0;4>c;c++)e[4*b+c]-=e[4*a+c]*f,d[4*b+
c]-=d[4*a+c]*f}return new T(d)};X.prototype={};uc.prototype=new X;vc.prototype=new X;xb.prototype=new X;X.prototype.copy$=function(){return new xb(this.t,this.x,this.y,this.z)};X.prototype.mul$LQuaternion$=function(a){var b,c,e,d,f,h,g,j,i;b=new xb(this.t,this.x,this.y,this.z);a=(c=b.t)*(d=a.t)-((f=b.x)*(e=a.x)+(h=b.y)*(i=a.y)+(j=b.z)*(g=a.z));b.t=a;b.x=c*e+d*f+(h*g-j*i);b.y=c*i+d*h+(j*e-f*g);b.z=c*g+d*j+(f*i-h*e);return b};X.prototype.mulSelf$LQuaternion$=function(a){var b,c,e,d,f,h,g,j;this.t=a=
(b=this.t)*(e=a.t)-((d=this.x)*(c=a.x)+(f=this.y)*(j=a.y)+(g=this.z)*(h=a.z));this.x=b*c+e*d+(f*h-g*j);this.y=b*j+e*f+(g*c-d*h);this.z=b*h+e*g+(d*j-f*c);return this};X.prototype.toMatrix$=function(){var a,b,c,e,d,f,h,g,j,i;a=2*(h=this.x)*h;b=2*(g=this.y)*g;c=2*(j=this.z)*j;e=2*h*g;d=2*h*j;f=2*g*j;h=2*h*(i=this.t);g=2*g*i;j=2*j*i;return new T([1-b-c,e+j,d-g,0,e-j,1-a-c,f+h,0,d+g,f-h,1-a-b,0,0,0,0,1])};X.prototype.toString=function(){var a,b,c;a=this.x.toFixed(3);b=this.y.toFixed(3);c=this.z.toFixed(3);
return this.t.toFixed(3)+" : ("+a+", "+b+", "+c+", )"};X.rotating$NNNN=function(a,b,c,e){var d;d=Math.cos(a/2);a=Math.sin(a/2);return new xb(d,b*a,c*a,e*a)};var Mc=X.rotating$NNNN;X.rotating$NLVector$=function(a,b){var c,e,d,f,h;c=b.x;e=b.y;d=b.z;f=Math.cos(a/2);h=Math.sin(a/2);return new xb(f,c*h,e*h,d*h)};X.rotate$LVector$LVector$N=function(a,b,c){var e,d,f,h,g,j,i,k,l,o;e=Math.cos(c/2);d=Math.sin(c/2);c=a.x;h=a.y;g=a.z;a=b.x*d;j=b.y*d;i=b.z*d;k=-b.x*d;l=-b.y*d;o=-b.z*d;b=0*e-(k*c+l*h+o*g);d=e*
c+0*k+(l*g-o*h);f=e*h+0*l+(o*c-k*g);c=e*g+0*o+(k*h-l*c);return new m(b*a+e*d+(f*i-c*j),b*j+e*f+(c*a-d*i),b*i+e*c+(d*j-f*a))};J.prototype={};bc.prototype=new J;J.prototype.isMobile$=function(){return this._isMobile};J.loadImages$AS=function(a){var b,c,e,d,f;c=P.document.getElementById("tmp_canvas");c=c instanceof HTMLElement?c:null;c=(c instanceof HTMLCanvasElement?c:null).getContext("2d");b=c instanceof CanvasRenderingContext2D?c:null;c=function(a){J.images[a].onload=function(){var c;c=J.images[a];
J.isLoadedImage[a]=!0;b.drawImage(c,0,0);J.imageDatas[a]=b.getImageData(0,0,c.width,c.height)}};for(e=0;e<a.length;e++)d=a[e],f=P.document.createElement("img"),f=f instanceof HTMLImageElement?f:null,f.src=d,J.isLoadedImage[d]=!1,J.images[d]=f,c(d)};var Lc=J.loadImages$AS;J.prototype.setSkyImage$S=function(a){this._skyImageSrc=a;this._skyImage=J.images[a]};J.prototype.start$=function(){var a=this,b,c,e=P.document.getElementById("fps");b={_stopwatch:{_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null},
_recentlyMsecLog:[],_lastMsec:0,_fpsElement:e instanceof HTMLElement?e:null,_enabledHtmlLog:!0,_enabledConsoleLog:!1};Ic(b._stopwatch);c=function(){var d,e;Sc(b);d=b._lastMsec;a.onUpdate(d);e={_worldMatrix:new nb,_matrixStack:new ec,camera:a.camera,_depth:3,modelList1:new $,modelList2:new $,modelList3:new $,modelList4:new $,modelList5:new $,_polygonList:null,_groupCenter:null,_ignoringZHidden:!1,backgroundColor:new ja(90,135,158)};a._skyImage&&J.isLoadedImage[a._skyImageSrc]?(a.context.fillStyle=
"#"+e.backgroundColor.toHexString$(),a.context.fillRect(0,0,a._width,a._height),a.renderSkyImage$()):(a.context.fillStyle="#"+e.backgroundColor.toHexString$(),a.context.fillRect(0,0,a._width,a._height));a.onRender(e,d);e.modelList5.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});e.modelList4.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});e.modelList3.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});e.modelList2.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});
e.modelList1.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});A.global.setTimeout(c,0)};A.global.setTimeout(function(){P.window.scrollTo(0,1)},500);A.global.setTimeout(c,0)};J.prototype.renderSkyImage$=function(){var a,b,c,e,d,f,h,g,j,i;d=(e=this.camera).target;f=e.view;e=d.x-f.x;a=d.y-f.y;d=d.z-f.z;a=-a;b=Math.atan2(e,d);c=Math.atan2(a,Math.sqrt(e*e+d*d));e=(d=this._skyImage).width;a=d.height;d=(f=this.camera).fovyX/3.141592653589793/2*e;f=d*f.aspectRatio;b=(b/3.141592653589793/2+0.5)*e-
d/2;c=(c/3.141592653589793+0.5)*a-f/2;0>b&&(b+=e);0>c&&(c+=a);h=b+d>=e;g=c+f>=a;h&&g?(j=(e-b)/d,f=(a-c)/f,this.context.drawImage(this._skyImage,~~b,~~c,~~(e-b),~~(a-c),0,0,~~(this._width*j),~~(this._height*f)),0!==~~(b+d-e)&&this.context.drawImage(this._skyImage,0,~~c,~~(b+d-e),~~(a-c),~~((i=this._width)*j),0,~~(i*(1-j)),~~(this._height*f))):h?(i=(e-b)/d,0!==~~(e-b)&&0!==~~(this._width*i)&&this.context.drawImage(this._skyImage,~~b,~~c,~~(e-b),~~f,0,0,~~(this._width*i),this._height),0!==~~(b+d-e)&&
0!==~~(this._width*(1-i))&&this.context.drawImage(this._skyImage,0,~~c,~~(b+d-e),~~f,~~((j=this._width)*i),0,~~(j*(1-i)),this._height)):g?this.context.drawImage(this._skyImage,~~b,~~c,~~d,~~(a-c),0,0,this._width,~~(this._height*((a-c)/f))):this.context.drawImage(this._skyImage,~~b,~~c,~~d,~~f,0,0,this._width,this._height)};J.prototype.setScreenMatrix$NN=function(a,b){var c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,m,u,t,v;c=new T([1,0,0,a/2,0,1,0,b/2,0,0,1,0,0,0,0,1]);t=a/2;v=-b/2;e=c._m11;d=c._m12;f=c._m13;h=
c._m14;g=c._m21;j=c._m22;i=c._m23;k=c._m24;l=c._m31;o=c._m32;r=c._m33;n=c._m34;p=c._m41;q=c._m42;m=c._m43;u=c._m44;c._m11=e*t+0*d+0*f+0*h;c._m12=0*e+d*v+0*f+0*h;c._m13=0*e+0*d+1*f+0*h;c._m14=0*e+0*d+0*f+1*h;c._m21=g*t+0*j+0*i+0*k;c._m22=0*g+j*v+0*i+0*k;c._m23=0*g+0*j+1*i+0*k;c._m24=0*g+0*j+0*i+1*k;c._m31=l*t+0*o+0*r+0*n;c._m32=0*l+o*v+0*r+0*n;c._m33=0*l+0*o+1*r+0*n;c._m34=0*l+0*o+0*r+1*n;c._m41=p*t+0*q+0*m+0*u;c._m42=0*p+q*v+0*m+0*u;c._m43=0*p+0*q+1*m+0*u;c._m44=0*p+0*q+0*m+1*u;this.screenMatrix=
c};J.prototype.updateMatrix$=function(){var a,b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,V,A,R,C,M,F,K,E,J,O,S,L,N,H;a=this.camera;b=a.view;c=a.target;e=a.upper;d=a.fovyX;f=a.nearZ;h=a.farZ;g=a.aspectRatio;c=new m(c.x-b.x,c.y-b.y,c.z-b.z);o=Math.sqrt((i=c.x)*i+(u=c.y)*u+(t=c.z)*t);i=1E-9>o?new m(0,0,0):c.divSelf$N(o);e=new m((y=e.y)*(v=i.z)-(r=e.z)*(D=i.y),r*(x=i.x)-(B=e.x)*v,B*D-y*x);r=Math.sqrt((k=e.x)*k+(n=e.y)*n+(w=e.z)*w);k=1E-9>r?new m(0,0,0):e.divSelf$N(r);n=new m((V=i.y)*(q=k.z)-
(p=i.z)*(G=k.y),p*(A=k.x)-(z=i.x)*q,z*G-V*A);p=Math.sqrt((l=n.x)*l+(R=n.y)*R+(C=n.z)*C);l=1E-9>p?new m(0,0,0):n.divSelf$N(p);b=new T([M=k.x,F=k.y,K=k.z,-(M*(J=b.x)+F*(S=b.y)+K*(L=b.z)),E=l.x,O=l.y,s=l.z,-(E*J+O*S+s*L),j=i.x,N=i.y,H=i.z,-(j*J+N*S+H*L),0,0,0,1]);d=1/Math.tan(d/2);h/=h-f;j=new T([d,0,0,0,0,d/g,0,0,0,0,h,-h*f,0,0,1,0]);a.viewMatrix=b;a.projectionMatrix=j;f=(L=j._m11)*(C=b._m11)+(H=j._m12)*(l=b._m21)+(R=j._m13)*(N=b._m31)+(p=j._m14)*(s=b._m41);g=L*(d=b._m12)+H*(M=b._m22)+R*(F=b._m32)+
p*(K=b._m42);h=L*(E=b._m13)+H*(J=b._m23)+R*(O=b._m33)+p*(S=b._m43);b=L*(L=b._m14)+H*(H=b._m24)+R*(R=b._m34)+p*(k=b._m44);p=(z=j._m21)*C+(G=j._m22)*l+(V=j._m23)*N+(A=j._m24)*s;q=(n=j._m31)*C+(w=j._m32)*l+(r=j._m33)*N+(v=j._m34)*s;s=(B=j._m41)*C+(C=j._m42)*l+(l=j._m43)*N+(j=j._m44)*s;a.matrix=new T([f,g,h,b,p,z*d+G*M+V*F+A*K,z*E+G*J+V*O+A*S,z*L+G*H+V*R+A*k,q,n*d+w*M+r*F+v*K,n*E+w*J+r*O+v*S,n*L+w*H+r*R+v*k,s,B*d+C*M+l*F+j*K,B*E+C*J+l*O+j*S,B*L+C*H+l*R+j*k])};E.prototype={};wc.prototype=new E;E.setDepth$LContext3D$I=
function(a,b){if(!(1<=b&&5>=b)){debugger;throw Error("[jsx/engine.jsx:263] assertion failure");}a._depth=b};var Hc=E.setDepth$LContext3D$I;E.getDepth$LContext3D$=function(a){return a._depth};E.setBackgroundColor$LContext3D$LColor$=function(a,b){a.backgroundColor=b};E.pushMatrix$LContext3D$=function(a){a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$())};E.popMatrix$LContext3D$=function(a){a._worldMatrix=a._matrixStack.removeFirst$()};E.resetMatrix$LContext3D$=function(a){a._worldMatrix=new nb};
E.translate$LContext3D$NNN=function(a,b,c,e){var d,f,h,g,j,i,k,l,o,m,n,p,q,s,u,t,a=a._worldMatrix;d=a._m11;f=a._m12;h=a._m13;g=a._m14;j=a._m21;i=a._m22;k=a._m23;l=a._m24;o=a._m31;m=a._m32;n=a._m33;p=a._m34;q=a._m41;s=a._m42;u=a._m43;t=a._m44;a._m11=1*d+0*f+0*h+0*g;a._m12=0*d+1*f+0*h+0*g;a._m13=0*d+0*f+1*h+0*g;a._m14=d*b+f*c+h*e+1*g;a._m21=1*j+0*i+0*k+0*l;a._m22=0*j+1*i+0*k+0*l;a._m23=0*j+0*i+1*k+0*l;a._m24=j*b+i*c+k*e+1*l;a._m31=1*o+0*m+0*n+0*p;a._m32=0*o+1*m+0*n+0*p;a._m33=0*o+0*m+1*n+0*p;a._m34=
o*b+m*c+n*e+1*p;a._m41=1*q+0*s+0*u+0*t;a._m42=0*q+1*s+0*u+0*t;a._m43=0*q+0*s+1*u+0*t;a._m44=q*b+s*c+u*e+1*t};E.scale$LContext3D$NNN=function(a,b,c,e){var d,f,h,g,j,i,k,l,o,m,n,p,q,s,u,t,a=a._worldMatrix;d=a._m11;f=a._m12;h=a._m13;g=a._m14;j=a._m21;i=a._m22;k=a._m23;l=a._m24;o=a._m31;m=a._m32;n=a._m33;p=a._m34;q=a._m41;s=a._m42;u=a._m43;t=a._m44;a._m11=d*b+0*f+0*h+0*g;a._m12=0*d+f*c+0*h+0*g;a._m13=0*d+0*f+h*e+0*g;a._m14=0*d+0*f+0*h+1*g;a._m21=j*b+0*i+0*k+0*l;a._m22=0*j+i*c+0*k+0*l;a._m23=0*j+0*i+k*
e+0*l;a._m24=0*j+0*i+0*k+1*l;a._m31=o*b+0*m+0*n+0*p;a._m32=0*o+m*c+0*n+0*p;a._m33=0*o+0*m+n*e+0*p;a._m34=0*o+0*m+0*n+1*p;a._m41=q*b+0*s+0*u+0*t;a._m42=0*q+s*c+0*u+0*t;a._m43=0*q+0*s+u*e+0*t;a._m44=0*q+0*s+0*u+1*t};E.rotate$LContext3D$LQuaternion$=function(a,b){var c,e,d,f,h,g,j,i,k,l,m,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G;c=a._worldMatrix;e=2*(x=b.x)*x;d=2*(w=b.y)*w;t=2*(z=b.z)*z;v=2*x*w;B=2*x*z;D=2*w*z;f=2*x*(x=b.t);h=2*w*x;y=2*z*x;z=1-d-t;w=v+y;x=B-h;v-=y;t=1-e-t;y=D+f;B+=h;D-=f;G=1-e-d;e=c._m11;d=c._m12;
f=c._m13;h=c._m14;g=c._m21;j=c._m22;i=c._m23;k=c._m24;l=c._m31;m=c._m32;r=c._m33;n=c._m34;p=c._m41;q=c._m42;s=c._m43;u=c._m44;c._m11=e*z+d*v+f*B+0*h;c._m12=e*w+d*t+f*D+0*h;c._m13=e*x+d*y+f*G+0*h;c._m14=0*e+0*d+0*f+1*h;c._m21=g*z+j*v+i*B+0*k;c._m22=g*w+j*t+i*D+0*k;c._m23=g*x+j*y+i*G+0*k;c._m24=0*g+0*j+0*i+1*k;c._m31=l*z+m*v+r*B+0*n;c._m32=l*w+m*t+r*D+0*n;c._m33=l*x+m*y+r*G+0*n;c._m34=0*l+0*m+0*r+1*n;c._m41=p*z+q*v+s*B+0*u;c._m42=p*w+q*t+s*D+0*u;c._m43=p*x+q*y+s*G+0*u;c._m44=0*p+0*q+0*s+1*u};E.beginGroup$LContext3D$LVector$=
function(a,b){a._polygonList=new Db;a._groupCenter=b;a._ignoringZHidden=!1};E.beginGroup$LContext3D$LVector$B=function(a,b,c){a._polygonList=new Db;a._groupCenter=b;a._ignoringZHidden=c};E.renderPolygonGroup$LContext3D$ALVector$LColor$=function(a,b,c){b=new Hb(b,c);b.applyWorldMatrix$LMatrix$(a._worldMatrix);b.applyViewMatrix$LMatrix$(a.camera.viewMatrix);b.isHidden$LCamera$(a.camera)||a._polygonList.prepend$LPolygon$(b)};var $b=E.renderPolygonGroup$LContext3D$ALVector$LColor$;E.endGroup$LContext3D$=
function(a){0!==a._polygonList.length&&Eb(a,new fc(a._polygonList,a._groupCenter,a._ignoringZHidden))};var jc=E.endGroup$LContext3D$;E.renderPolygon$LContext3D$ALVector$LColor$=function(a,b,c){Eb(a,new Hb(b,c))};E.renderBillboard$LContext3D$LVector$IIS=function(a,b,c,e,d){Eb(a,new hc(b,c,e,d))};var Qc=E.renderBillboard$LContext3D$LVector$IIS;E.renderTexture$LContext3D$ALVector$SIIII=function(a,b,c,e,d,f,h){Eb(a,new Ub(b,c,e,d,f,h))};var Rc=E.renderTexture$LContext3D$ALVector$SIIII;E.renderTexture$LContext3D$ALVector$S=
function(a,b,c){Eb(a,new gc(b,c))};E.renderModel$LContext3D$LRenderable$=function(a,b){b.applyWorldMatrix$LMatrix$(a._worldMatrix);b.applyViewMatrix$LMatrix$(a.camera.viewMatrix);if(!b.isHidden$LCamera$(a.camera))switch(a._depth){case 1:Kb(a,a.modelList1,b);break;case 2:Kb(a,a.modelList2,b);break;case 3:Kb(a,a.modelList3,b);break;case 4:Kb(a,a.modelList4,b);break;case 5:Kb(a,a.modelList5,b)}};var Eb=E.renderModel$LContext3D$LRenderable$;E.insertModelByZValue$LContext3D$LList$Renderable$E$LRenderable$=
function(a,b,c){var e,a=!1;for(e=b.head;null!=e;e=e._next)if(e.value.vCenter.z<c.vCenter.z){b.insertBefore$LNode$Renderable$E$LRenderable$(e,c);a=!0;break}a||b.append$LRenderable$(c)};var Kb=E.insertModelByZValue$LContext3D$LList$Renderable$E$LRenderable$;Bb.prototype={};dc.prototype=new Bb;Bb.prototype.move$LVector$=function(a){var b,c,e,d,f;c=this.rotatingMatrix;a=c._m11*(d=a.x)+c._m12*(b=a.y)+c._m13*(e=a.z)+c._m14*(f=a.w);b=new O(a,c._m21*d+c._m22*b+c._m23*e+c._m24*f,c._m31*d+c._m32*b+c._m33*e+
c._m34*f,c._m41*d+c._m42*b+c._m43*e+c._m44*f);e=this.view;e.x+=c=b.x;e.y+=d=b.y;e.z+=e=b.z;b=this.target;b.x+=c;b.y+=d;b.z+=e};Bb.prototype.rotateY$N=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,A,C;b=this.target;c=this.view;b=new m(b.x-c.x,b.y-c.y,b.z-c.z);i=Math.sin(a);k=Math.cos(a);c=k*(l=b.x)+0*(o=b.y)+i*(r=b.z)+0*(n=b.w);e=0*l+0*o+0*r+1*n;b.x=c/e;b.y=(0*l+1*o+0*r+0*n)/e;b.z=(-i*l+0*o+k*r+0*n)/e;b.w=1;c=this.view;b.x+=c.x;b.y+=c.y;b.z+=c.z;this.target=b;b=Math.sin(a);
a=Math.cos(a);a=new T([a,0,b,0,0,1,0,0,-b,0,a,0,0,0,0,1]);d=this.rotatingMatrix;f=a._m11;h=a._m12;g=a._m13;j=a._m14;b=a._m21;c=a._m22;e=a._m23;i=a._m24;k=a._m31;l=a._m32;o=a._m33;r=a._m34;n=a._m41;p=a._m42;q=a._m43;s=a._m44;a._m11=f*(u=d._m11)+h*(t=d._m21)+g*(v=d._m31)+j*(B=d._m41);a._m12=f*(D=d._m12)+h*(y=d._m22)+g*(x=d._m32)+j*(w=d._m42);a._m13=f*(z=d._m13)+h*(G=d._m23)+g*(A=d._m33)+j*(C=d._m43);a._m14=f*(f=d._m14)+h*(h=d._m24)+g*(g=d._m34)+j*(d=d._m44);a._m21=b*u+c*t+e*v+i*B;a._m22=b*D+c*y+e*x+
i*w;a._m23=b*z+c*G+e*A+i*C;a._m24=b*f+c*h+e*g+i*d;a._m31=k*u+l*t+o*v+r*B;a._m32=k*D+l*y+o*x+r*w;a._m33=k*z+l*G+o*A+r*C;a._m34=k*f+l*h+o*g+r*d;a._m41=n*u+p*t+q*v+s*B;a._m42=n*D+p*y+q*x+s*w;a._m43=n*z+p*G+q*A+s*C;a._m44=n*f+p*h+q*g+s*d;this.rotatingMatrix=a};Bb.prototype.updateMatrix$=function(){var a,b,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,A,C,E,J,M,F,K,H,O,P,S,L,N;a=this.view;b=this.target;c=this.upper;e=this.fovyX;d=this.nearZ;f=this.farZ;h=this.aspectRatio;b=new m(b.x-a.x,b.y-a.y,
b.z-a.z);l=Math.sqrt((j=b.x)*j+(s=b.y)*s+(u=b.z)*u);j=1E-9>l?new m(0,0,0):b.divSelf$N(l);c=new m((D=c.y)*(t=j.z)-(o=c.z)*(B=j.y),o*(y=j.x)-(v=c.x)*t,v*B-D*y);o=Math.sqrt((i=c.x)*i+(r=c.y)*r+(x=c.z)*x);i=1E-9>o?new m(0,0,0):c.divSelf$N(o);r=new m((G=j.y)*(p=i.z)-(n=j.z)*(z=i.y),n*(A=i.x)-(w=j.x)*p,w*z-G*A);n=Math.sqrt((k=r.x)*k+(C=r.y)*C+(E=r.z)*E);k=1E-9>n?new m(0,0,0):r.divSelf$N(n);a=new T([J=i.x,M=i.y,F=i.z,-(J*(H=a.x)+M*(P=a.y)+F*(S=a.z)),K=k.x,O=k.y,q=k.z,-(K*H+O*P+q*S),g=j.x,L=j.y,N=j.z,-(g*
H+L*P+N*S),0,0,0,1]);e=1/Math.tan(e/2);f/=f-d;g=new T([e,0,0,0,0,e/h,0,0,0,0,f,-f*d,0,0,1,0]);this.viewMatrix=a;this.projectionMatrix=g;d=(S=g._m11)*(E=a._m11)+(N=g._m12)*(k=a._m21)+(C=g._m13)*(L=a._m31)+(n=g._m14)*(q=a._m41);h=S*(e=a._m12)+N*(J=a._m22)+C*(M=a._m32)+n*(F=a._m42);f=S*(K=a._m13)+N*(H=a._m23)+C*(O=a._m33)+n*(P=a._m43);a=S*(S=a._m14)+N*(N=a._m24)+C*(C=a._m34)+n*(i=a._m44);n=(w=g._m21)*E+(z=g._m22)*k+(G=g._m23)*L+(A=g._m24)*q;p=(r=g._m31)*E+(x=g._m32)*k+(o=g._m33)*L+(t=g._m34)*q;q=(v=
g._m41)*E+(E=g._m42)*k+(k=g._m43)*L+(g=g._m44)*q;this.matrix=new T([d,h,f,a,n,w*e+z*J+G*M+A*F,w*K+z*H+G*O+A*P,w*S+z*N+G*C+A*i,p,r*e+x*J+o*M+t*F,r*K+x*H+o*O+t*P,r*S+x*N+o*C+t*i,q,v*e+E*J+k*M+g*F,v*K+E*H+k*O+g*P,v*S+E*N+k*C+g*i])};Cb.prototype={};ja.prototype=new Cb;Cb.prototype._to2DigitHex$I=function(a){a=Math.floor(a).toString(16);1===a.length&&(a="0"+a);return a};Cb.prototype.toHexString$=function(){return this._to2DigitHex$I(this.r)+this._to2DigitHex$I(this.g)+this._to2DigitHex$I(this.b)};Cb.prototype.toString=
function(){return"#"+this._to2DigitHex$I(this.r)+this._to2DigitHex$I(this.g)+this._to2DigitHex$I(this.b)};ob.prototype={};xc.prototype=new ob;ob.isHiddenXY$ALVector$LEngine$=function(a,b){var c,e,d,f,h;c=0;for(h=a.length;c<h;c++)if(e=a[c],-0<(d=e.x)&&d<b._width+0&&-0<(f=e.y)&&f<b._height+0)return!1;return!0};var kc=ob.isHiddenXY$ALVector$LEngine$;Wa.prototype=new ob;Hb.prototype=new Wa;Wa.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],
e=a._m11*(h=c.x)+a._m12*(g=c.y)+a._m13*(j=c.z)+a._m14*(i=c.w),d=a._m21*h+a._m22*g+a._m23*j+a._m24*i,f=a._m31*h+a._m32*g+a._m33*j+a._m34*i,h=a._m41*h+a._m42*g+a._m43*j+a._m44*i,c.x=e/h,c.y=d/h,c.z=f/h,c.w=1;this.updateCenter$()};Wa.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o;b=[];for(c=o=l=k=0;c<this.vertices.length;c++)e=this.vertices[c],e=a._m11*(h=e.x)+a._m12*(g=e.y)+a._m13*(j=e.z)+a._m14*(i=e.w),d=a._m21*h+a._m22*g+a._m23*j+a._m24*i,f=a._m31*h+a._m32*g+a._m33*j+a._m34*
i,h=a._m41*h+a._m42*g+a._m43*j+a._m44*i,e=new O(e,d,f,h),b.push(e),k+=e.x,l+=e.y,o+=e.z;a=this.vertices.length;this.vCenter=new m(k/a,l/a,o/a);this.vVertices=b};Wa.prototype.isHidden$LCamera$=function(a){var b;return a.nearZ<(b=this.vCenter.z)&&b<a.farZ?!1:!0};Wa.prototype.move$LVector$=function(a){var b,c;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],c.x+=a.x,c.y+=a.y,c.z+=a.z;this.updateCenter$()};Wa.prototype.updateCenter$=function(){var a,b,c,e,d;for(a=d=e=c=0;a<this.vertices.length;a++)b=
this.vertices[a],c+=b.x,e+=b.y,d+=b.z;a=this.vertices.length;this.center=new m(c/a,e/a,d/a)};Wa.prototype.toString=function(){var a,b;a="[";for(b=0;b<this.vertices.length;b++)a+=this.vertices[b].toString()+",";return a+"]"};Wa.prototype.draw$LEngine$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,r,n,p;b=a.context;c=this.vertices.length;e=this.vVertices;d=this._color;this._enabledLighting&&(f=this.vCenter,g=e[0],i=g.x-f.x,p=g.y-f.y,l=g.z-f.z,g=e[1],g=new m(g.x-f.x,g.y-f.y,g.z-f.z),k=(n=g.y)*l-(r=g.z)*p,
l=r*i-(r=g.x)*l,k=g.x=k,l=g.y=l,i=g.z=r*p-n*i,i=Math.sqrt(k*k+l*l+i*i),g=1E-9>i?new m(0,0,0):g.divSelf$N(i),i=Math.sqrt((h=f.x)*h+(j=f.y)*j+(o=f.z)*o),f=1E-9>i?new m(0,0,0):new m(f.x/i,f.y/i,f.z/i),j=g.x*f.x+g.y*f.y+g.z*f.z,f=(0.5599999999999999*j+0.5)*d.r,h=(0.5599999999999999*j+0.5)*d.g,d=(0.5599999999999999*j+0.5)*d.b,d=new ja(255<=f?255:f,255<=h?255:h,255<=d?255:d));for(f=0;f<c;f++)h=e[f],i=a.camera.projectionMatrix,j=i._m11*(p=h.x)+i._m12*(n=h.y)+i._m13*(r=h.z)+i._m14*(k=h.w),o=i._m21*p+i._m22*
n+i._m23*r+i._m24*k,g=i._m31*p+i._m32*n+i._m33*r+i._m34*k,i=i._m41*p+i._m42*n+i._m43*r+i._m44*k,h.x=j/i,h.y=o/i,h.z=g/i,h.w=1;for(f=0;f<c;f++)h=e[f],i=a.screenMatrix,j=i._m11*(p=h.x)+i._m12*(n=h.y)+i._m13*(r=h.z)+i._m14*(k=h.w),o=i._m21*p+i._m22*n+i._m23*r+i._m24*k,g=i._m31*p+i._m32*n+i._m33*r+i._m34*k,i=i._m41*p+i._m42*n+i._m43*r+i._m44*k,h.x=j/i,h.y=o/i,h.z=g/i,h.w=1;if(kc(e,a))return!1;f=0;for(j=e.length;f<j;f++)if(a=(f+1)%j,h=(f+2)%j,0>Tc(e[a].x-e[f].x,e[a].y-e[f].y,e[h].x-e[f].x,e[h].y-e[f].y))return!1;
d="#"+(d._to2DigitHex$I(d.r)+d._to2DigitHex$I(d.g)+d._to2DigitHex$I(d.b));b.strokeStyle=d;for(f=0;f<c;f++)b.beginPath(),b.moveTo(e[f].x,e[f].y),b.lineTo(e[(f+1)%c].x,e[(f+1)%c].y),b.stroke();b.fillStyle=d;b.beginPath();for(f=0;f<c;f++)d=e[f].x,a=e[f].y,b.lineTo(d,a);b.closePath();b.fill();return!0};pb.prototype=new ob;yc.prototype=new pb;fc.prototype=new pb;pb.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j;b=this.center;c=a._m11*(f=b.x)+a._m12*(h=b.y)+a._m13*(g=b.z)+a._m14*(j=
b.w);e=a._m21*f+a._m22*h+a._m23*g+a._m24*j;d=a._m31*f+a._m32*h+a._m33*g+a._m34*j;a=a._m41*f+a._m42*h+a._m43*g+a._m44*j;b.x=c/a;b.y=e/a;b.z=d/a;b.w=1};pb.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,e,d,f;b=this.center;b=a._m11*(c=b.x)+a._m12*(e=b.y)+a._m13*(d=b.z)+a._m14*(f=b.w);this.vCenter=new O(b,a._m21*c+a._m22*e+a._m23*d+a._m24*f,a._m31*c+a._m32*e+a._m33*d+a._m34*f,a._m41*c+a._m42*e+a._m43*d+a._m44*f)};pb.prototype.isHidden$LCamera$=function(a){return this._ignoringZHidden?!1:a.nearZ<
this.vCenter.z&&this.vCenter.z<a.farZ?!1:!0};pb.prototype.draw$LEngine$=function(a){this.polygons.forEach$F$LPolygon$V$(function(b){b.isHidden$LCamera$(a.camera)||b.draw$LEngine$(a)});return!0};kb.prototype=new Wa;gc.prototype=new kb;Ub.prototype=new kb;kb.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],e=a._m11*(h=c.x)+a._m12*(g=c.y)+a._m13*(j=c.z)+a._m14*(i=c.w),d=a._m21*h+a._m22*g+a._m23*j+a._m24*i,f=a._m31*h+a._m32*g+
a._m33*j+a._m34*i,h=a._m41*h+a._m42*g+a._m43*j+a._m44*i,c.x=e/h,c.y=d/h,c.z=f/h,c.w=1;b=this.center;c=a._m11*(f=b.x)+a._m12*(h=b.y)+a._m13*(g=b.z)+a._m14*(j=b.w);e=a._m21*f+a._m22*h+a._m23*g+a._m24*j;d=a._m31*f+a._m32*h+a._m33*g+a._m34*j;a=a._m41*f+a._m42*h+a._m43*g+a._m44*j;b.x=c/a;b.y=e/a;b.z=d/a;b.w=1};kb.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,e,d,f;b=[];for(c=0;c<this.vertices.length;c++)b.push(this.vertices[c].transform$LMatrix$(a));this.vVertices=b;e=this.center;e=a._m11*(b=
e.x)+a._m12*(c=e.y)+a._m13*(d=e.z)+a._m14*(f=e.w);this.vCenter=new O(e,a._m21*b+a._m22*c+a._m23*d+a._m24*f,a._m31*b+a._m32*c+a._m33*d+a._m34*f,a._m41*b+a._m42*c+a._m43*d+a._m44*f)};kb.prototype.isHidden$LCamera$=function(a){var b;return a.nearZ<(b=this.vCenter.z)&&b<a.farZ?!1:!0};kb.prototype.draw$LEngine$=function(a){var b=this,c,e,d,f,h,g,j,i,k,l,o,r,n,p,q,s,u,t,v,B,D,y,x,w,z,G,A,C,E,H,M,F,K,P,T,I,S,L,N,Q,W,X,Y,ia,Z,da,ea,ja,$,Wa,qb,rb,sb,mb,bb,cb,db,eb,Xa,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,Ya,Va,Za,
Ia,Ha,Ja,Ka,La,xa,ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,Ma,fb,gb,hb,ib,$a,ab,nb,ob,pb,jb,kb;if(!J.isLoadedImage[this._src])return!1;c=a.context;e=(ja=this.vertices)[3];d=ja[0];f=ja[1];h=ja[2];o=a.screenMatrix;M=($=a.camera).projectionMatrix;F=$.viewMatrix;K=(Wa=M._m11)*(mb=F._m11)+(qb=M._m12)*(bb=F._m21)+(rb=M._m13)*(cb=F._m31)+(sb=M._m14)*(db=F._m41);P=Wa*(Xa=F._m12)+qb*(Oa=F._m22)+rb*(Qa=F._m32)+sb*(ka=F._m42);T=Wa*(Sa=F._m13)+qb*(la=F._m23)+rb*(Ta=F._m33)+
sb*(Ua=F._m43);I=Wa*(Ya=F._m14)+qb*(Va=F._m24)+rb*(Za=F._m34)+sb*(Ia=F._m44);S=(eb=M._m21)*mb+(Na=M._m22)*bb+(Pa=M._m23)*cb+(Ra=M._m24)*db;L=eb*Xa+Na*Oa+Pa*Qa+Ra*ka;N=eb*Sa+Na*la+Pa*Ta+Ra*Ua;Q=eb*Ya+Na*Va+Pa*Za+Ra*Ia;W=(Ha=M._m31)*mb+(Ja=M._m32)*bb+(Ka=M._m33)*cb+(La=M._m34)*db;X=Ha*Xa+Ja*Oa+Ka*Qa+La*ka;Y=Ha*Sa+Ja*la+Ka*Ta+La*Ua;ia=Ha*Ya+Ja*Va+Ka*Za+La*Ia;Z=(xa=M._m41)*mb+(ya=M._m42)*bb+(za=M._m43)*cb+(Aa=M._m44)*db;da=xa*Xa+ya*Oa+za*Qa+Aa*ka;ea=xa*Sa+ya*la+za*Ta+Aa*Ua;kb=xa*Ya+ya*Va+za*Za+Aa*Ia;
r=(Ba=o._m11)*K+(Ca=o._m12)*S+(Da=o._m13)*W+(ua=o._m14)*Z;n=Ba*P+Ca*L+Da*X+ua*da;p=Ba*T+Ca*N+Da*Y+ua*ea;q=Ba*I+Ca*Q+Da*ia+ua*kb;s=(Ea=o._m21)*K+(va=o._m22)*S+(Fa=o._m23)*W+(wa=o._m24)*Z;u=Ea*P+va*L+Fa*X+wa*da;t=Ea*T+va*N+Fa*Y+wa*ea;v=Ea*I+va*Q+Fa*ia+wa*kb;B=(fa=o._m31)*K+(ga=o._m32)*S+(Ga=o._m33)*W+(aa=o._m34)*Z;D=fa*P+ga*L+Ga*X+aa*da;y=fa*T+ga*N+Ga*Y+aa*ea;x=fa*I+ga*Q+Ga*ia+aa*kb;w=(ba=o._m41)*K+(ca=o._m42)*S+(U=o._m43)*W+(ma=o._m44)*Z;z=ba*P+ca*L+U*X+ma*da;G=ba*T+ca*N+U*Y+ma*ea;jb=ba*I+ca*Q+U*ia+
ma*kb;A=r*(na=e.x)+n*(oa=e.y)+p*(pa=e.z)+q*(qa=e.w);g=new O(A,s*na+u*oa+t*pa+v*qa,B*na+D*oa+y*pa+x*qa,w*na+z*oa+G*pa+jb*qa);C=r*(ra=d.x)+n*(sa=d.y)+p*(ta=d.z)+q*(Ma=d.w);j=new O(C,s*ra+u*sa+t*ta+v*Ma,B*ra+D*sa+y*ta+x*Ma,w*ra+z*sa+G*ta+jb*Ma);E=r*(fb=f.x)+n*(gb=f.y)+p*(hb=f.z)+q*(ib=f.w);i=new O(E,s*fb+u*gb+t*hb+v*ib,B*fb+D*gb+y*hb+x*ib,w*fb+z*gb+G*hb+jb*ib);H=r*($a=h.x)+n*(ab=h.y)+p*(nb=h.z)+q*(ob=h.w);k=new O(H,s*$a+u*ab+t*nb+v*ob,B*$a+D*ab+y*nb+x*ob,w*$a+z*ab+G*nb+jb*ob);if(kc([g,j,i,k],a))return!1;
l=function(a,d,e,f,g,h,i,j,k,o,A,C,F,E){var H,J,V,M,N,K,P,S,T,L,I,R,Q,ha,W,X,Y,Z,da,ea,ia,ja,$,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,fa,ga,Ga,Ha,Ia,Ja,Ka,La,Ma,yb,ka,la,Ua,Xa,Ya,Za,bb,cb,db,eb,Na,Oa,Pa,Qa,Ra,Sa,Ta,Va,Wa,$a,ab,fb,gb,hb,ib,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Ib,Hb,Jb;H=function(a,b){return Math.sqrt(a*a+b*b)};J=H(j.x-i.x,j.y-i.y);V=H(k.x-h.x,k.y-h.y);M=H(h.x-i.x,h.y-i.y);N=H(k.x-j.x,k.y-j.y);K=J/V;P=N/M;1>K&&(K=1/K);1>P&&
(P=1/P);S=1.01<K;T=1.01<P;o<=b._minDiv||o<=b._maxDiv&&S&&T?($=new m(d.x+g.x,d.y+g.y,d.z+g.z),$.x/=2,$.y/=2,$.z/=2,L=$,aa=new m(e.x+f.x,e.y+f.y,e.z+f.z),aa.x/=2,aa.y/=2,aa.z/=2,I=aa,ba=new m(d.x+e.x,d.y+e.y,d.z+e.z),ba.x/=2,ba.y/=2,ba.z/=2,R=ba,ca=new m(g.x+f.x,g.y+f.y,g.z+f.z),ca.x/=2,ca.y/=2,ca.z/=2,Q=ca,U=new m(d.x+f.x,d.y+f.y,d.z+f.z),U.x/=2,U.y/=2,U.z/=2,ma=r*(Na=L.x)+n*(Oa=L.y)+p*(Pa=L.z)+q*(Qa=L.w),na=s*Na+u*Oa+t*Pa+v*Qa,oa=B*Na+D*Oa+y*Pa+x*Qa,pa=w*Na+z*Oa+G*Pa+jb*Qa,ha=new O(ma,na,oa,pa),qa=
r*(Ra=I.x)+n*(Sa=I.y)+p*(Ta=I.z)+q*(Va=I.w),ra=s*Ra+u*Sa+t*Ta+v*Va,sa=B*Ra+D*Sa+y*Ta+x*Va,ta=w*Ra+z*Sa+G*Ta+jb*Va,W=new O(qa,ra,sa,ta),ua=r*(Wa=R.x)+n*($a=R.y)+p*(ab=R.z)+q*(fb=R.w),va=s*Wa+u*$a+t*ab+v*fb,wa=B*Wa+D*$a+y*ab+x*fb,xa=w*Wa+z*$a+G*ab+jb*fb,X=new O(ua,va,wa,xa),ya=r*(gb=Q.x)+n*(hb=Q.y)+p*(ib=Q.z)+q*(kb=Q.w),za=s*gb+u*hb+t*ib+v*kb,Aa=B*gb+D*hb+y*ib+x*kb,Ba=w*gb+z*hb+G*ib+jb*kb,Y=new O(ya,za,Aa,Ba),Ca=r*(lb=U.x)+n*(mb=U.y)+p*(nb=U.z)+q*(ob=U.w),Da=s*lb+u*mb+t*nb+v*ob,Ea=B*lb+D*mb+y*nb+x*
ob,Fa=w*lb+z*mb+G*nb+jb*ob,Z=new O(Ca,Da,Ea,Fa),l(a,d,R,U,L,h,X,Z,ha,o+1,A,C,F/2,E/2),l(a,R,e,I,U,X,i,W,Z,o+1,A,C+E/2,F/2,E/2),l(a,L,U,Q,g,ha,Z,Y,k,o+1,A+F/2,C,F/2,E/2),l(a,U,I,f,Q,Z,W,j,Y,o+1,A+F/2,C+E/2,F/2,E/2)):o<=b._maxVerticalDiv&&T?(fa=new m(d.x+g.x,d.y+g.y,d.z+g.z),fa.x/=2,fa.y/=2,fa.z/=2,L=fa,ga=new m(e.x+f.x,e.y+f.y,e.z+f.z),ga.x/=2,ga.y/=2,ga.z/=2,I=ga,Ga=r*(pb=L.x)+n*(qb=L.y)+p*(rb=L.z)+q*(sb=L.w),Ha=s*pb+u*qb+t*rb+v*sb,Ia=B*pb+D*qb+y*rb+x*sb,Ja=w*pb+z*qb+G*rb+jb*sb,ha=new O(Ga,Ha,Ia,
Ja),Ka=r*(tb=I.x)+n*(ub=I.y)+p*(vb=I.z)+q*(wb=I.w),La=s*tb+u*ub+t*vb+v*wb,Ma=B*tb+D*ub+y*vb+x*wb,yb=w*tb+z*ub+G*vb+jb*wb,W=new O(Ka,La,Ma,yb),l(a,d,e,I,L,h,i,W,ha,o+1,A,C,F/2,E),l(a,L,I,f,g,ha,W,j,k,o+1,A+F/2,C,F/2,E)):o<=b._maxHorizontalDiv&&S?(ka=new m(d.x+e.x,d.y+e.y,d.z+e.z),ka.x/=2,ka.y/=2,ka.z/=2,R=ka,la=new m(g.x+f.x,g.y+f.y,g.z+f.z),la.x/=2,la.y/=2,la.z/=2,Q=la,Ua=r*(xb=R.x)+n*(zb=R.y)+p*(Ab=R.z)+q*(Bb=R.w),Xa=s*xb+u*zb+t*Ab+v*Bb,Ya=B*xb+D*zb+y*Ab+x*Bb,Za=w*xb+z*zb+G*Ab+jb*Bb,X=new O(Ua,Xa,
Ya,Za),bb=r*(Cb=Q.x)+n*(Db=Q.y)+p*(Eb=Q.z)+q*(Fb=Q.w),cb=s*Cb+u*Db+t*Eb+v*Fb,db=B*Cb+D*Db+y*Eb+x*Fb,eb=w*Cb+z*Db+G*Eb+jb*Fb,Y=new O(bb,cb,db,eb),l(a,d,R,Q,g,h,X,Y,k,o+1,A,C,F,E/2),l(a,R,e,f,Q,X,i,j,Y,o+1,A,C+E/2,F,E/2)):(da=((Ib=k.x)-(Hb=h.x))/F,ea=((Jb=i.y)-(Gb=h.y))/E,ia=(k.y-Gb)/(Ib-Hb),ja=(i.x-Hb)/(Jb-Gb),c.transform(1,0,0,1,Hb,Gb),c.transform(1,ia,ja,1,0,0),c.transform(da,0,0,ea,0,0),c.drawImage(a,~~A,~~C,~~F,~~E,0,0,Math.ceil(F),Math.ceil(E)),c.setTransform(1,0,0,1,0,0))};l(pb=this._image,e,
d,f,h,g,j,i,k,1,0,0,pb.width,pb.height);return!0};zb.prototype=new ob;hc.prototype=new zb;zb.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j;b=this.center;c=a._m11*(f=b.x)+a._m12*(h=b.y)+a._m13*(g=b.z)+a._m14*(j=b.w);e=a._m21*f+a._m22*h+a._m23*g+a._m24*j;d=a._m31*f+a._m32*h+a._m33*g+a._m34*j;a=a._m41*f+a._m42*h+a._m43*g+a._m44*j;b.x=c/a;b.y=e/a;b.z=d/a;b.w=1};zb.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,e,d,f;b=this.center;b=a._m11*(c=b.x)+a._m12*(e=b.y)+a._m13*(d=
b.z)+a._m14*(f=b.w);this.vCenter=new O(b,a._m21*c+a._m22*e+a._m23*d+a._m24*f,a._m31*c+a._m32*e+a._m33*d+a._m34*f,a._m41*c+a._m42*e+a._m43*d+a._m44*f)};zb.prototype.isHidden$LCamera$=function(a){var b;return a.nearZ<(b=this.vCenter.z)&&b<a.farZ?!1:!0};zb.prototype.draw$LEngine$=function(a){var b,c,e,d,f,h,g,j,i,k,l,m,r,n,p,q,s,u,t,v,B,D,y,x,w,z,A,C,E,H,I,M,F;if(!J.isLoadedImage[this._src])return!1;b=a.context;h=a.screenMatrix;g=a.camera.projectionMatrix;d=(l=h._m11)*(v=g._m11)+(k=h._m12)*(B=g._m21)+
(i=h._m13)*(D=g._m31)+(j=h._m14)*(q=g._m41);e=l*(s=g._m12)+k*(y=g._m22)+i*(x=g._m32)+j*(w=g._m42);f=l*(u=g._m13)+k*(z=g._m23)+i*(A=g._m33)+j*(C=g._m43);g=l*(c=g._m14)+k*(t=g._m24)+i*(E=g._m34)+j*(H=g._m44);j=(l=h._m21)*v+(m=h._m22)*B+(r=h._m23)*D+(n=h._m24)*q;i=l*s+m*y+r*x+n*w;k=l*u+m*z+r*A+n*C;l=l*c+m*t+r*E+n*H;m=(p=h._m31)*v+(I=h._m32)*B+(M=h._m33)*D+(F=h._m34)*q;r=p*s+I*y+M*x+F*w;n=p*u+I*z+M*A+F*C;p=p*c+I*t+M*E+F*H;q=(I=h._m41)*v+(v=h._m42)*B+(B=h._m43)*D+(h=h._m44)*q;s=I*s+v*y+B*x+h*w;u=I*u+v*
z+B*A+h*C;z=I*c+v*t+B*E+h*H;c=this.vCenter;A=this._width/2;C=this._height/2;A=c.x-A;C=c.y-C;y=c.z-0;t=this.vCenter;t=d*(c=t.x)+e*(x=t.y)+f*(w=t.z)+g*(E=t.w);c=new O(t,j*c+i*x+k*w+l*E,m*c+r*x+n*w+p*E,q*c+s*x+u*w+z*E);e=new O(d*A+e*C+f*y+1*g,j*A+i*C+k*y+1*l,m*A+r*C+n*y+1*p,q*A+s*C+u*y+1*z);d=e.x-c.x;e=e.y-c.y;if(kc([c],a))return!1;a=2*(d/(f=this._image).width);f=2*(e/f.height);b.setTransform(a,0,0,f,0,0);b.drawImage(this._image,~~((c.x-d)/a),~~((c.y-e)/f));b.setTransform(1,0,0,1,0,0);return!0};Y.prototype=
{};(function(){this.tail=this.head=null;this.length=0}).prototype=new Y;Ib.prototype=new Y;Y.prototype.prepend$LVector$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};Y.prototype.append$LVector$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};Y.prototype.remove$LNode$Vector$E$=function(a){a._prev?
a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};Y.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=null);this.length--;return a.value};Y.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};Y.prototype.insertAfter$LNode$Vector$E$LVector$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=
a,this.tail=a._next=c):(c._next=e=a._next,c._prev=a,e._prev=c,a._next=c);this.length++;return this};Y.prototype.insertBefore$LNode$Vector$E$LVector$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=e=a._prev,e._next=c,a._prev=c);this.length++;return this};Y.prototype.forEach$F$LVector$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};Y.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=
" "+b.value.toString()+",";return a+"]"};Vb.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new Vb;Vb.prev$LNode$Vector$E$=function(a){return a._prev};Vb.next$LNode$Vector$E$=function(a){return a._next};Z.prototype={};ec.prototype=new Z;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LMatrix$(a.pop())}).prototype=new Z;Z.prototype.prepend$LMatrix$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=
this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};Z.prototype.append$LMatrix$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};Z.prototype.remove$LNode$Matrix$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};Z.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=
b&&(a._next._prev=null);this.length--;return a.value};Z.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};Z.prototype.insertAfter$LNode$Matrix$E$LMatrix$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=e=a._next,c._prev=a,e._prev=c,a._next=c);this.length++;return this};Z.prototype.insertBefore$LNode$Matrix$E$LMatrix$=function(a,b){var c,e;c={value:b,_prev:null,
_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=e=a._prev,e._next=c,a._prev=c);this.length++;return this};Z.prototype.forEach$F$LMatrix$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};Z.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};Wb.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new Wb;Wb.prev$LNode$Matrix$E$=function(a){return a._prev};Wb.next$LNode$Matrix$E$=
function(a){return a._next};da.prototype={};$.prototype=new da;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LRenderable$(a.pop())}).prototype=new da;da.prototype.prepend$LRenderable$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};da.prototype.append$LRenderable$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=
a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};da.prototype.remove$LNode$Renderable$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};da.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=null);this.length--;return a.value};da.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};
da.prototype.insertAfter$LNode$Renderable$E$LRenderable$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=e=a._next,c._prev=a,e._prev=c,a._next=c);this.length++;return this};da.prototype.insertBefore$LNode$Renderable$E$LRenderable$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=e=a._prev,e._next=c,a._prev=c);this.length++;return this};da.prototype.forEach$F$LRenderable$V$=
function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};da.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};Xb.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new Xb;Xb.prev$LNode$Renderable$E$=function(a){return a._prev};Xb.next$LNode$Renderable$E$=function(a){return a._next};ea.prototype={};Db.prototype=new ea;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=
0;c<b;c++)this.prepend$LPolygon$(a.pop())}).prototype=new ea;ea.prototype.prepend$LPolygon$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};ea.prototype.append$LPolygon$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};ea.prototype.remove$LNode$Polygon$E$=function(a){a._prev?a._prev._next=
a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};ea.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=null);this.length--;return a.value};ea.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};ea.prototype.insertAfter$LNode$Polygon$E$LPolygon$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=
a._next=c):(c._next=e=a._next,c._prev=a,e._prev=c,a._next=c);this.length++;return this};ea.prototype.insertBefore$LNode$Polygon$E$LPolygon$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=e=a._prev,e._next=c,a._prev=c);this.length++;return this};ea.prototype.forEach$F$LPolygon$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};ea.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=
" "+b.value.toString()+",";return a+"]"};Yb.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new Yb;Yb.prev$LNode$Polygon$E$=function(a){return a._prev};Yb.next$LNode$Polygon$E$=function(a){return a._next};P.prototype={};zc.prototype=new P;P.id$S=function(a){a=P.document.getElementById(a);return a instanceof HTMLElement?a:null};P.getElementById$S=function(a){a=P.document.getElementById(a);return a instanceof HTMLElement?a:null};P.createElement$S=function(a){return P.document.createElement(a)};
H.prototype={};Ac.prototype=new H;H.setTimeout$F$V$N=function(a,b){return A.global.setTimeout(a,b)};H.clearTimeout$LTimerHandle$=function(a){A.global.clearTimeout(a)};var Uc=H.clearTimeout$LTimerHandle$;H.setInterval$F$V$N=function(a,b){return A.global.setInterval(a,b)};H.clearInterval$LTimerHandle$=function(a){A.global.clearInterval(a)};H.requestAnimationFrame$F$NV$=function(a){return H._requestAnimationFrame(a)};H.cancelAnimationFrame$LTimerHandle$=function(a){H._cancelAnimationFrame(a)};H.useNativeRAF$B=
function(a){H._requestAnimationFrame=Jc(a);H._cancelAnimationFrame=Kc(a)};H._getRequestAnimationFrameImpl$B=function(a){var b;if(a){if(A.global.requestAnimationFrame)return function(a){return A.global.requestAnimationFrame(a)};if(A.global.webkitRequestAnimationFrame)return function(a){return A.global.webkitRequestAnimationFrame(a)};if(A.global.mozRequestAnimationFrame)return function(a){return A.global.mozRequestAnimationFrame(a)};if(A.global.oRequestAnimationFrame)return function(a){return A.global.oRequestAnimationFrame(a)};
if(A.global.msRequestAnimationFrame)return function(a){return A.global.msRequestAnimationFrame(a)}}b=0;return function(a){var e,d,f;e=Date.now();f=16-(e-b);d=0>=f?0:f;b=e+d;return A.global.setTimeout(function(){a(e+d)},d)}};var Jc=H._getRequestAnimationFrameImpl$B;H._getCancelAnimationFrameImpl$B=function(a){if(a){if(A.global.cancelAnimationFrame)return function(a){A.global.cancelAnimationFrame(a)};if(A.global.webkitCancelAnimationFrame)return function(a){A.global.webkitCancelAnimationFrame(a)};if(A.global.mozCancelAnimationFrame)return function(a){A.global.mozCancelAnimationFrame(a)};
if(A.global.oCancelAnimationFrame)return function(a){A.global.oCancelAnimationFrame(a)};if(A.global.msCancelAnimationFrame)return function(a){A.global.msCancelAnimationFrame(a)}}return Uc};var Kc=H._getCancelAnimationFrameImpl$B;ic.prototype={};Bc.prototype=new ic;Jb.prototype={};Cc.prototype=new Jb;Jb.cross$NNNN=function(a,b,c,e){return a*e-c*b};var Tc=Jb.cross$NNNN;W.prototype={};Dc.prototype=new W;W._currentMsec$LStopwatch$=function(){return Date.now()};W.start$LStopwatch$=function(a){if(null!=
a._startedMsec){debugger;throw Error("[jsx/util.jsx:39] assertion failure");}a._startedMsec=a._lastLapMsec=Date.now()};var Ic=W.start$LStopwatch$;W.stop$LStopwatch$=function(a){if(null==a._startedMsec){debugger;throw Error("[jsx/util.jsx:45] assertion failure");}a._elapsedMsec+=Date.now()-a._startedMsec;a._startedMsec=null;a._lastLapMsec=null};W.isStarted$LStopwatch$=function(a){return null!=a._startedMsec};W.isStopped$LStopwatch$=function(a){return null==a._startedMsec};var Vc=W.isStopped$LStopwatch$;
W.lap$LStopwatch$=function(a){var b,c;if(null==a._lastLapMsec){debugger;throw Error("[jsx/util.jsx:65] assertion failure");}b=Date.now();c=b-a._lastLapMsec;a._lastLapMsec=b;return c};var Wc=W.lap$LStopwatch$;W.getElapsedMsec$LStopwatch$=function(a){return a._elapsedMsec};tb.prototype={};Ec.prototype=new tb;Fc.prototype=new tb;tb.start$LFpsManager$=function(a){Ic(a._stopwatch)};tb.lastLap$LFpsManager$=function(a){return a._lastMsec};tb.update$LFpsManager$=function(a){var b,c,e;if(Vc(a._stopwatch)){debugger;
throw Error("[jsx/util.jsx:126] assertion failure");}b=Wc(a._stopwatch);a._lastMsec=b;1>a._recentlyMsecLog.length?a._recentlyMsecLog.push(b):(a._recentlyMsecLog.push(b),a._recentlyMsecLog.shift());b=a._recentlyMsecLog.length;for(e=c=0;e<b;e++)c+=a._recentlyMsecLog[e];b/=c/1E3;null!=a._fpsElement&&a._enabledHtmlLog?a._fpsElement.innerHTML=b.toFixed(1)+"fps":a._enabledConsoleLog&&console.log(b.toFixed(1)+"fps")};var Sc=tb.update$LFpsManager$;A.prototype={};Gc.prototype=new A;wb(J,"images",function(){return{}});
wb(J,"imageDatas",function(){return{}});wb(J,"isLoadedImage",function(){return{}});wb(P,"window",function(){return A.global.window});wb(P,"document",function(){return A.global.document});wb(H,"_requestAnimationFrame",function(){return Jc(!0)});wb(H,"_cancelAnimationFrame",function(){return Kc(!0)});A.global=function(){return this}();var Nc={"jsx/ball.jsx":{Util3D:$a,Util3D$:lc,Player:ab,Player$:mc,BlueBall:I,BlueBall$:ac,_Main:Tb,_Main$:sc},"jsx/vector.jsx":{Vector:C,Vector$NNN:m,Vector$NNNN:O,Vector$LVector$:tc},
"jsx/matrix.jsx":{Matrix:Q,Matrix$:nb,Matrix$AN:T},"jsx/quaternion.jsx":{Quaternion:X,Quaternion$NLVector$:uc,Quaternion$LVector$:vc,Quaternion$NNNN:xb},"jsx/engine.jsx":{Engine:J,Engine$S:bc,Context3D:E,Context3D$LCamera$:wc,Camera:Bb,Camera$LVector$LVector$LVector$NNNN:dc,Color:Cb,Color$III:ja,Renderable:ob,Renderable$:xc,Polygon:Wa,Polygon$ALVector$LColor$:Hb,PolygonGroup:pb,PolygonGroup$LList$Polygon$E$LVector$:yc,PolygonGroup$LList$Polygon$E$LVector$B:fc,SmoothTexture:kb,SmoothTexture$ALVector$S:gc,
SmoothTexture$ALVector$SIIII:Ub,Billboard:zb,Billboard$LVector$NNS:hc},"system:lib/js/js/web.jsx":{dom:P,dom$:zc},"system:lib/js/timer.jsx":{Timer:H,Timer$:Ac,TimerHandle:ic,TimerHandle$:Bc},"jsx/util.jsx":{Math2D:Jb,Math2D$:Cc,Stopwatch:W,Stopwatch$:Dc,FpsManager:tb,FpsManager$:Ec,FpsManager$S:Fc},"system:lib/js/js.jsx":{js:A,js$:Gc}};JSX.runMain=function(a,b){var c=JSX.require(a);if(!c._Main)throw Error("entry point _Main not found in "+a);if(!c._Main.main$AS)throw Error("entry point _Main.main(:string[]):void not found in "+
a);c._Main.main$AS(b)};JSX.runTests=function(a,b){var c=JSX.require(a)._Test$;if(c){if(0===b.length){var e=c.prototype,d;for(d in e)e[d]instanceof Function&&/^test.*[$]$/.test(d)&&b.push(d)}var f=new c;null!=f.beforeClass$AS&&f.beforeClass$AS(b);for(c=0;c<b.length;++c)(function(a){f.run$SF$V$(a,function(){f[a]()})})(b[c]);null!=f.afterClass$&&f.afterClass$()}};window.addEventListener("load",Zb);document.addEventListener("DOMContentLoaded",Zb)})();
