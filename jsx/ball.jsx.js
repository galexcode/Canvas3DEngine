var JSX={};
(function(){function zb(a,b,c){Object.defineProperty(a,b,{get:function(){var d=c();delete a[b];return a[b]=d},set:function(c){delete a[b];a[b]=c},enumerable:!0,configurable:!0})}function Gb(){}function pb(){}function rc(){}function rb(){}function sc(){var a,b;this.r=12;this.x=0;this.y=10;this.ax=this.vz=this.vy=this.vx=this.z=0;this.ay=-120;this.az=0;a=Math.cos(0);b=Math.sin(0);this.rot=new Ab(a,b,0*b,0*b);this.radius=8;this.isBraking=!1}function O(){}function gc(){var a=this,b,c,d,e,f,g,h,j,i,k,
l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R,X,T,W,F,ca,bb,P,Q,mb,wb,M,B,C,G,L,U,S,N,Bb,ub,O,Wa,Xa,Ya,Za,$a,ab,Ka,La,cb,Na,db,eb,Oa,fb,Pa,ka,la,Qa,gb,Ra,Ea,Ma,Fa,ea,fa,Ga,Ha,Ia,ra,sa,ta,ua,va,wa,xa,V,ma,na,ya,oa,pa,za,qa,da,ga,ha,ia,ja,Y,Z,$,aa,Ba,Ca,Da,hb,ib,jb,kb,lb,K;this.trees=this.player=null;this.treeRadius=0;this.items=null;this.totalElapsedMsec=this.itemRadius=0;Pc(["./image/tree.png","./image/so-nya.png","./image/redbull_free.png","./image/sky1.jpg"]);this.isStarted=!1;K=this.engine=new hc("canvas");
K._skyImageSrc="./image/sky1.jpg";K._skyImage=J.images["./image/sky1.jpg"];K._isMobile&&((U=this.engine.camera).farZ=200,U.fovyX=0.7853981633974483,h=U.view,j=U.target,i=U.upper,k=U.fovyX,l=U.nearZ,p=U.farZ,r=U.aspectRatio,t=new m(j.x-h.x,j.y-h.y,j.z-h.z),v=Math.sqrt((S=t.x)*S+(N=t.y)*N+(Bb=t.z)*Bb),q=1E-9>v?new m(0,0,0):t.divSelf$N(v),z=new m((Ya=i.y)*(O=q.z)-(ub=i.z)*(Xa=q.y),ub*(Za=q.x)-(Wa=i.x)*O,Wa*Xa-Ya*Za),D=Math.sqrt(($a=z.x)*$a+(ab=z.y)*ab+(Ka=z.z)*Ka),s=1E-9>D?new m(0,0,0):z.divSelf$N(D),
x=new m((eb=q.y)*(cb=s.z)-(La=q.z)*(db=s.y),La*(Oa=s.x)-(Na=q.x)*cb,Na*db-eb*Oa),y=Math.sqrt((fb=x.x)*fb+(Pa=x.y)*Pa+(ka=x.z)*ka),u=1E-9>y?new m(0,0,0):x.divSelf$N(y),n=new I([la=s.x,Qa=s.y,gb=s.z,-(la*(Ea=h.x)+Qa*(Fa=h.y)+gb*(fa=h.z)),Ra=u.x,Ma=u.y,ea=u.z,-(Ra*Ea+Ma*Fa+ea*fa),Ga=q.x,Ha=q.y,Ia=q.z,-(Ga*Ea+Ha*Fa+Ia*fa),0,0,0,1]),w=1/Math.tan(k/2),A=w/r,E=p/(p-l),H=-E*l,o=new I([w,0,0,0,0,A,0,0,0,0,E,H,0,0,1,0]),U.viewMatrix=n,U.projectionMatrix=o,R=(ra=o._m11)*(va=n._m11)+(sa=o._m12)*(wa=n._m21)+(ta=
o._m13)*(xa=n._m31)+(ua=o._m14)*(V=n._m41),X=ra*(na=n._m12)+sa*(oa=n._m22)+ta*(za=n._m32)+ua*(da=n._m42),T=ra*(ga=n._m13)+sa*(ha=n._m23)+ta*(ia=n._m33)+ua*(ja=n._m43),W=ra*(Y=n._m14)+sa*(Z=n._m24)+ta*($=n._m34)+ua*(aa=n._m44),F=(ma=o._m21)*va+(ya=o._m22)*wa+(pa=o._m23)*xa+(qa=o._m24)*V,ca=ma*na+ya*oa+pa*za+qa*da,bb=ma*ga+ya*ha+pa*ia+qa*ja,P=ma*Y+ya*Z+pa*$+qa*aa,Q=(Ba=o._m31)*va+(Ca=o._m32)*wa+(Da=o._m33)*xa+(hb=o._m34)*V,mb=Ba*na+Ca*oa+Da*za+hb*da,wb=Ba*ga+Ca*ha+Da*ia+hb*ja,M=Ba*Y+Ca*Z+Da*$+hb*aa,
B=(ib=o._m41)*va+(jb=o._m42)*wa+(kb=o._m43)*xa+(lb=o._m44)*V,C=ib*na+jb*oa+kb*za+lb*da,G=ib*ga+jb*ha+kb*ia+lb*ja,L=ib*Y+jb*Z+kb*$+lb*aa,U.matrix=new I([R,X,T,W,F,ca,bb,P,Q,mb,wb,M,B,C,G,L]));this.player={r:12,x:0,y:10,z:0,vx:0,vy:0,vz:0,ax:0,ay:-120,az:0,rot:uc(0,1,0,0),radius:8,isBraking:!1};this.trees=new Lb([new m(-271,-3,450),new m(-200,-3,720),new m(139,-3,351),new m(171,-3,254),new m(214,-3,192),new m(-253,-3,555),new m(29,-3,385),new m(-72,-3,530),new m(96,-3,678),new m(-49,-3,222)]);this.treeRadius=
24;this.items=new Lb([new m(149,-10,724),new m(107,-10,483),new m(279,-10,551),new m(-295,-10,261),new m(-16,-10,225),new m(95,-10,165),new m(264,-10,161),new m(-50,-10,325),new m(-169,-10,254),new m(271,-10,401)]);this.itemRadius=8;b=function(b){var c,d,e,f,g,h,i,j,k,l,n,o,p,r,q,s,t,u,v,w,x,y,z,A,D,E,F,H,R,X,T,W,ca,Q,bb,mb,M,P,wb,U,B,C,G,tc,da,ga,ha,ia,ja,Y,Z,$,aa,V,na,oa,ra,sa,ta,ua,va,wa,xa,ma,ya,pa,za,qa,J,L,fa,Ba,Ca,Da,S,N,Ea,Fa,ea,Ga,Ha,Ia,O,Ma,K,Qb,Bb,Na,Oa,Pa,ka,la,Qa,Ra,ub,Wa,Xa,Ya,Za,$a,
ab,Ka,La;a._updateClearedPlayer$N(b);c=a.player;d=new m(c.x+Math.sin(a.totalElapsedMsec/5E3)*50,c.y+20,c.z+Math.cos(a.totalElapsedMsec/5E3)*50);e=new m(c.x,c.y,c.z);(P=a.engine.camera).target=e;P.view=d;f=P.view;g=P.target;h=P.upper;i=P.fovyX;j=P.nearZ;k=P.farZ;l=P.aspectRatio;s=new m(g.x-f.x,g.y-f.y,g.z-f.z);t=Math.sqrt((wb=s.x)*wb+(U=s.y)*U+(B=s.z)*B);p=t<1E-9?new m(0,0,0):s.divSelf$N(t);u=new m((ga=h.y)*(G=p.z)-(C=h.z)*(da=p.y),C*(ha=p.x)-(tc=h.x)*G,tc*da-ga*ha);v=Math.sqrt((ia=u.x)*ia+(ja=u.y)*
ja+(Y=u.z)*Y);r=v<1E-9?new m(0,0,0):u.divSelf$N(v);w=new m((na=p.y)*($=r.z)-(Z=p.z)*(V=r.y),Z*(oa=r.x)-(aa=p.x)*$,aa*V-na*oa);x=Math.sqrt((ra=w.x)*ra+(sa=w.y)*sa+(ta=w.z)*ta);q=x<1E-9?new m(0,0,0):w.divSelf$N(x);n=new I([ua=r.x,va=r.y,wa=r.z,-(ua*(ma=f.x)+va*(pa=f.y)+wa*(qa=f.z)),xa=q.x,ya=q.y,za=q.z,-(xa*ma+ya*pa+za*qa),J=p.x,L=p.y,fa=p.z,-(J*ma+L*pa+fa*qa),0,0,0,1]);y=1/Math.tan(i/2);z=y/l;A=k/(k-j);o=new I([y,0,0,0,0,z,0,0,0,0,A,-A*j,0,0,1,0]);P.viewMatrix=n;P.projectionMatrix=o;D=(Ba=o._m11)*
(N=n._m11)+(Ca=o._m12)*(Ea=n._m21)+(Da=o._m13)*(Fa=n._m31)+(S=o._m14)*(ea=n._m41);E=Ba*(Ha=n._m12)+Ca*(O=n._m22)+Da*(K=n._m32)+S*(Bb=n._m42);F=Ba*(Na=n._m13)+Ca*(Oa=n._m23)+Da*(Pa=n._m33)+S*(ka=n._m43);H=Ba*(la=n._m14)+Ca*(Qa=n._m24)+Da*(Ra=n._m34)+S*(ub=n._m44);R=(Ga=o._m21)*N+(Ia=o._m22)*Ea+(Ma=o._m23)*Fa+(Qb=o._m24)*ea;X=Ga*Ha+Ia*O+Ma*K+Qb*Bb;T=Ga*Na+Ia*Oa+Ma*Pa+Qb*ka;W=Ga*la+Ia*Qa+Ma*Ra+Qb*ub;ca=(Wa=o._m31)*N+(Xa=o._m32)*Ea+(Ya=o._m33)*Fa+(Za=o._m34)*ea;Q=Wa*Ha+Xa*O+Ya*K+Za*Bb;bb=Wa*Na+Xa*Oa+
Ya*Pa+Za*ka;mb=Wa*la+Xa*Qa+Ya*Ra+Za*ub;M=($a=o._m41)*N+(ab=o._m42)*Ea+(Ka=o._m43)*Fa+(La=o._m44)*ea;P.matrix=new I([D,E,F,H,R,X,T,W,ca,Q,bb,mb,M,$a*Ha+ab*O+Ka*K+La*Bb,$a*Na+ab*Oa+Ka*Pa+La*ka,$a*la+ab*Qa+Ka*Ra+La*ub])};c=function(b){a._checkCollisionWithFloor$N(b);a._checkCollisionWithTrees$();a._checkCollisionWithItems$();a._updateViewpoint$()};d=function(b){a._renderPlayer$LContext3D$(b);a._renderField$LContext3D$(b)};e=function(b){a._renderPlayer$LContext3D$(b);a._renderTrees$LContext3D$(b);a._renderItems$LContext3D$(b);
a._renderField$LContext3D$(b)};f=!1;this.engine.onUpdate=function(g){var h,i,j;if(a.isStarted){if(a.player.y<-1E3){a.player={r:12,x:0,y:10,z:0,vx:0,vy:0,vz:0,ax:0,ay:-120,az:0,rot:uc(0,1,0,0),radius:8,isBraking:false};a.isStarted=false}if(!f&&1050<=(h=(i=a.player).x)&&h<=1110&&1350<=(j=i.z)&&j<=1410){c=b;e=d;f=true}c(g)}};g=new Aa(90,135,150);this.engine.onRender=function(b,c){a.totalElapsedMsec=a.totalElapsedMsec+c;b.backgroundColor=g;e(b)};this.engine._isMobile?this._setMobileOperation$():this._setPCOperation$()}
function Zb(){}function xc(){}function C(){}function m(a,b,c){this.x=a;this.y=b;this.z=c;this.w=1}function L(a,b,c,d){a=this.x=a/d;this.y=b/d;this.z=c/d;this.w=1;NaN===a&&console.log(d)}function yc(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=1}function K(){}function Cb(){this._m11=1;this._m21=this._m14=this._m13=this._m12=0;this._m22=1;this._m32=this._m31=this._m24=this._m23=0;this._m33=1;this._m43=this._m42=this._m41=this._m34=0;this._m44=1}function I(a){this._m11=a[0];this._m12=a[1];this._m13=a[2];
this._m14=a[3];this._m21=a[4];this._m22=a[5];this._m23=a[6];this._m24=a[7];this._m31=a[8];this._m32=a[9];this._m33=a[10];this._m34=a[11];this._m41=a[12];this._m42=a[13];this._m43=a[14];this._m44=a[15]}function ba(){}function zc(a,b){this.t=a;this.x=b.x;this.y=b.y;this.z=b.z}function Ac(a){this.t=0;this.x=a.x;this.y=a.y;this.z=a.z}function Ab(a,b,c,d){this.t=a;this.x=b;this.y=c;this.z=d}function J(){}function hc(a){var b,c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R,X,T,W,F,ca,bb,P,Q,mb,
wb,M,B,C,G,J,U,L,N,O,K,Aa,Wa,Xa,Ya,Za,$a,ab,Ka,La,cb,Na,db,eb,Oa,fb,Pa,ka,la,Qa,gb,Ra,Ea,Ma,Fa,ea,fa,Ga,Ha,Ia,ra,sa,ta,ua,va,wa,xa,V,ma,na,ya,oa,pa,za,qa,da,ga,ha,ia,ja,Y,Z,$,aa,Ba,Ca,Da,hb,ib,jb,kb,lb,ba,Ja,Sa,Ta,Ua,sb,Va,Rb,Sb,Tb,Ub,Vb,Wb,Xb,Yb;this._skyImage=this._skyImageSrc=this.onRender=this.onUpdate=this.screenMatrix=this.camera=null;this._isMobile=/iPhone/.test(S.window.navigator.userAgent);var ic,vc=S.document.getElementById(a);ic=vc instanceof HTMLElement?vc:null;b=ic instanceof HTMLCanvasElement?
ic:null;var wc=b.getContext("2d");this.context=wc instanceof CanvasRenderingContext2D?wc:null;Na=this._width=b.width;f=this._height=b.height;g=new I([1,0,0,Na/2,0,1,0,f/2,0,0,1,0,0,0,0,1]);x=Na/2;y=-f/2;h=g._m11;j=g._m12;i=g._m13;k=g._m14;l=g._m21;p=g._m22;r=g._m23;n=g._m24;o=g._m31;q=g._m32;s=g._m33;u=g._m34;t=g._m41;v=g._m42;z=g._m43;D=g._m44;g._m11=h*x+0*j+0*i+0*k;g._m12=0*h+j*y+0*i+0*k;g._m13=0*h+0*j+1*i+0*k;g._m14=0*h+0*j+0*i+1*k;g._m21=l*x+0*p+0*r+0*n;g._m22=0*l+p*y+0*r+0*n;g._m23=0*l+0*p+1*
r+0*n;g._m24=0*l+0*p+0*r+1*n;g._m31=o*x+0*q+0*s+0*u;g._m32=0*o+q*y+0*s+0*u;g._m33=0*o+0*q+1*s+0*u;g._m34=0*o+0*q+0*s+1*u;g._m41=t*x+0*v+0*z+0*D;g._m42=0*t+v*y+0*z+0*D;g._m43=0*t+0*v+1*z+0*D;g._m44=0*t+0*v+0*z+1*D;this.screenMatrix=g;this._skyImage=this._skyImageSrc=null;c=new m(0,0,-90);d=new m(0,0,0);e=new m(0,1,0);w=this.camera=new jc(c,d,e,1.0471975511965976,0,500,this._height/this._width);A=w.view;E=w.target;H=w.upper;R=w.fovyX;X=w.nearZ;T=w.farZ;W=w.aspectRatio;mb=new m(E.x-A.x,E.y-A.y,E.z-A.z);
wb=Math.sqrt((db=mb.x)*db+(eb=mb.y)*eb+(Oa=mb.z)*Oa);bb=1E-9>wb?new m(0,0,0):mb.divSelf$N(wb);M=new m((Qa=H.y)*(Pa=bb.z)-(fb=H.z)*(la=bb.y),fb*(gb=bb.x)-(ka=H.x)*Pa,ka*la-Qa*gb);B=Math.sqrt((Ra=M.x)*Ra+(Ea=M.y)*Ea+(Ma=M.z)*Ma);P=1E-9>B?new m(0,0,0):M.divSelf$N(B);C=new m((Ha=bb.y)*(ea=P.z)-(Fa=bb.z)*(Ga=P.y),Fa*(Ia=P.x)-(fa=bb.x)*ea,fa*Ga-Ha*Ia);G=Math.sqrt((ra=C.x)*ra+(sa=C.y)*sa+(ta=C.z)*ta);Q=1E-9>G?new m(0,0,0):C.divSelf$N(G);F=new I([ua=P.x,va=P.y,wa=P.z,-(ua*(V=A.x)+va*(na=A.y)+wa*(oa=A.z)),
xa=Q.x,ma=Q.y,ya=Q.z,-(xa*V+ma*na+ya*oa),pa=bb.x,za=bb.y,qa=bb.z,-(pa*V+za*na+qa*oa),0,0,0,1]);J=1/Math.tan(R/2);U=J/W;L=T/(T-X);ca=new I([J,0,0,0,0,U,0,0,0,0,L,-L*X,0,0,1,0]);w.viewMatrix=F;w.projectionMatrix=ca;N=(da=ca._m11)*(ja=F._m11)+(ga=ca._m12)*(Y=F._m21)+(ha=ca._m13)*(Z=F._m31)+(ia=ca._m14)*($=F._m41);O=da*(Ba=F._m12)+ga*(Da=F._m22)+ha*(ib=F._m32)+ia*(kb=F._m42);K=da*(lb=F._m13)+ga*(ba=F._m23)+ha*(Ja=F._m33)+ia*(Sa=F._m43);Aa=da*(Ta=F._m14)+ga*(Ua=F._m24)+ha*(sb=F._m34)+ia*(Va=F._m44);Wa=
(aa=ca._m21)*ja+(Ca=ca._m22)*Y+(hb=ca._m23)*Z+(jb=ca._m24)*$;Xa=aa*Ba+Ca*Da+hb*ib+jb*kb;Ya=aa*lb+Ca*ba+hb*Ja+jb*Sa;Za=aa*Ta+Ca*Ua+hb*sb+jb*Va;$a=(Rb=ca._m31)*ja+(Sb=ca._m32)*Y+(Tb=ca._m33)*Z+(Ub=ca._m34)*$;ab=Rb*Ba+Sb*Da+Tb*ib+Ub*kb;Ka=Rb*lb+Sb*ba+Tb*Ja+Ub*Sa;La=Rb*Ta+Sb*Ua+Tb*sb+Ub*Va;cb=(Vb=ca._m41)*ja+(Wb=ca._m42)*Y+(Xb=ca._m43)*Z+(Yb=ca._m44)*$;w.matrix=new I([N,O,K,Aa,Wa,Xa,Ya,Za,$a,ab,Ka,La,cb,Vb*Ba+Wb*Da+Xb*ib+Yb*kb,Vb*lb+Wb*ba+Xb*Ja+Yb*Sa,Vb*Ta+Wb*Ua+Xb*sb+Yb*Va])}function G(){}function Bc(a){this._groupCenter=
this._polygonList=null;this._ignoringZHidden=!1;this._worldMatrix=new Cb;this._matrixStack=new kc;this.camera=a;this._depth=3;this.modelList1=new nb;this.modelList2=new nb;this.modelList3=new nb;this.modelList4=new nb;this.modelList5=new nb;this.backgroundColor=new Aa(90,135,158)}function Ib(){}function jc(a,b,c,d,e,f,g){var h,j,i,k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R,X,T,W,F,ca,bb,P,Q,mb,B,M,C,G,J,L,U,N,O,K,S,ba,Wa,Xa,Ya,Za,$a,ab,Ka,La,cb,Na,db,eb,Oa,fb,Pa,ka,la,Qa,gb,Ra,Ea,Ma,Fa,ea,fa,Ga,Ha,Ia,
ra,sa,ta,ua,va,wa,xa,V,ma,na,ya,oa,pa,za,qa,da,ga,ha,ia,ja,Y,Z,$,aa,Ba,Ca,Da;this.matrix=this.projectionMatrix=this.viewMatrix=null;this.view=a;this.target=b;this.upper=c;this.fovyX=d;this.nearZ=e;this.farZ=f;this.aspectRatio=g;this.rotatingMatrix=new Cb;h=this.view;j=this.target;i=this.upper;k=this.fovyX;l=this.nearZ;p=this.farZ;r=this.aspectRatio;t=new m(j.x-h.x,j.y-h.y,j.z-h.z);v=Math.sqrt((C=t.x)*C+(G=t.y)*G+(J=t.z)*J);q=1E-9>v?new m(0,0,0):t.divSelf$N(v);z=new m((K=i.y)*(U=q.z)-(L=i.z)*(O=q.y),
L*(S=q.x)-(N=i.x)*U,N*O-K*S);D=Math.sqrt((ba=z.x)*ba+(Wa=z.y)*Wa+(Xa=z.z)*Xa);s=1E-9>D?new m(0,0,0):z.divSelf$N(D);x=new m((Ka=q.y)*(Za=s.z)-(Ya=q.z)*(ab=s.y),Ya*(La=s.x)-($a=q.x)*Za,$a*ab-Ka*La);y=Math.sqrt((cb=x.x)*cb+(Na=x.y)*Na+(db=x.z)*db);u=1E-9>y?new m(0,0,0):x.divSelf$N(y);n=new I([eb=s.x,Oa=s.y,fb=s.z,-(eb*(ka=h.x)+Oa*(Qa=h.y)+fb*(Ra=h.z)),Pa=u.x,la=u.y,gb=u.z,-(Pa*ka+la*Qa+gb*Ra),Ea=q.x,Ma=q.y,Fa=q.z,-(Ea*ka+Ma*Qa+Fa*Ra),0,0,0,1]);w=1/Math.tan(k/2);A=w/r;E=p/(p-l);o=new I([w,0,0,0,0,A,0,
0,0,0,E,-E*l,0,0,1,0]);this.viewMatrix=n;this.projectionMatrix=o;H=(ea=o._m11)*(Ia=n._m11)+(fa=o._m12)*(ra=n._m21)+(Ga=o._m13)*(sa=n._m31)+(Ha=o._m14)*(ta=n._m41);R=ea*(va=n._m12)+fa*(xa=n._m22)+Ga*(ma=n._m32)+Ha*(ya=n._m42);X=ea*(oa=n._m13)+fa*(pa=n._m23)+Ga*(za=n._m33)+Ha*(qa=n._m43);T=ea*(da=n._m14)+fa*(ga=n._m24)+Ga*(ha=n._m34)+Ha*(ia=n._m44);W=(ua=o._m21)*Ia+(wa=o._m22)*ra+(V=o._m23)*sa+(na=o._m24)*ta;F=ua*va+wa*xa+V*ma+na*ya;ca=ua*oa+wa*pa+V*za+na*qa;bb=ua*da+wa*ga+V*ha+na*ia;P=(ja=o._m31)*
Ia+(Y=o._m32)*ra+(Z=o._m33)*sa+($=o._m34)*ta;Q=ja*va+Y*xa+Z*ma+$*ya;mb=ja*oa+Y*pa+Z*za+$*qa;B=ja*da+Y*ga+Z*ha+$*ia;M=(aa=o._m41)*Ia+(Ba=o._m42)*ra+(Ca=o._m43)*sa+(Da=o._m44)*ta;this.matrix=new I([H,R,X,T,W,F,ca,bb,P,Q,mb,B,M,aa*va+Ba*xa+Ca*ma+Da*ya,aa*oa+Ba*pa+Ca*za+Da*qa,aa*da+Ba*ga+Ca*ha+Da*ia])}function Hb(){}function Aa(a,b,c){this.r=a;this.g=b;this.b=c}function vb(){}function Cc(){this.vCenter=this.center=null}function ob(){}function Mb(a,b){this.vVertices=this.vCenter=this.center=null;this.vertices=
a;this._color=b;this._enabledLighting=!0;this.updateCenter$()}function tb(){}function Dc(a,b){this.vCenter=null;this.polygons=a;this.center=b;this._ignoringZHidden=!1}function lc(a,b,c){this.vCenter=null;this.polygons=a;this.center=b;this._ignoringZHidden=c}function xb(){}function mc(a,b){$b.call(this,a,b,6,6,4,2)}function $b(a,b,c,d,e,f){var g,h,j,i,k;g=new Aa(0,0,0);this.vVertices=this.vCenter=this.center=null;this.vertices=a;this._color=g;this._enabledLighting=!0;this.updateCenter$();this._src=
b;this._image=J.images[b];this.vertices=a;b=a[1];g=a[0];i=b.x-g.x;k=b.y-g.y;b=Math.sqrt(i*i+k*k+(h=b.z-g.z)*h);this._width=0<=b?b:-b;h=a[2];a=a[1];b=h.x-a.x;g=h.y-a.y;a=Math.sqrt(b*b+g*g+(j=h.z-a.z)*j);this._height=0<=a?a:-a;this._maxHorizontalDiv=c;this._maxVerticalDiv=d;this._maxDiv=e;this._minDiv=f;this.updateCenter$()}function Db(){}function nc(a,b,c,d){this.vCenter=null;this._width=b;this._height=c;this._src=d;this._image=J.images[d];this.center=a}function Sa(){}function Lb(a){var b,c;this.tail=
this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LVector$(a.pop())}function ac(){}function Ta(){}function kc(){this.tail=this.head=null;this.length=0}function bc(){}function Ua(){}function nb(){this.tail=this.head=null;this.length=0}function cc(){}function Va(){}function Eb(){this.tail=this.head=null;this.length=0}function dc(){}function S(){}function Ec(){}function N(){}function Fc(){}function oc(){}function Gc(){}function Nb(){}function Hc(){}function Ja(){}function Ic(){this._lastLapMsec=
null;this._elapsedMsec=0;this._startedMsec=null}function yb(){}function Jc(){this._fpsElement=null;this._stopwatch={_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null};this._recentlyMsecLog=[];this._lastMsec=0;this._enabledHtmlLog=!1;this._enabledConsoleLog=!0}function Kc(a){a=S.document.getElementById(a);this._fpsElement=a instanceof HTMLElement?a:null;this._stopwatch={_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null};this._recentlyMsecLog=[];this._lastMsec=0;this._enabledHtmlLog=!0;this._enabledConsoleLog=
!1}function B(){}function Lc(){}function ec(){window.removeEventListener("load",ec);document.removeEventListener("DOMContentLoaded",ec);JSX.runMain("jsx/ball.jsx",[])}JSX.require=function(a){a=Qc[a];return void 0!==a?a:null};JSX.profilerIsRunning=function(){return null!=Gb.getResults};JSX.getProfileResults=function(){return(Gb.getResults||function(){return{}})()};JSX.postProfileResults=function(a){if(null==Gb.postResults)throw Error("profiler has not been turned on");return Gb.postResults(a)};JSX.resetProfileResults=
function(){if(null==Gb.resetResults)throw Error("profiler has not been turned on");return Gb.resetResults()};pb.prototype={};rc.prototype=new pb;pb.sphere$LContext3D$NI=function(a,b,c){var d,e,f,g,h,j,i,k,l;d=2*c;e=Math.sin;f=Math.cos;g=new m(0,0,0);a._polygonList=new Eb;a._groupCenter=g;a._ignoringZHidden=!1;for(g=0;g<d;g++)j=1,i=g+1,k=g,Ob(a,[new m(f(6.283185307179586*i/d)*e(0/c)*b,f(0/c)*b,e(6.283185307179586*i/d)*e(0/c)*b),new m(f(6.283185307179586*i/d)*e(3.141592653589793*j/c)*b,f(3.141592653589793*
j/c)*b,e(6.283185307179586*i/d)*e(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/d)*e(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,e(6.283185307179586*k/d)*e(3.141592653589793*j/c)*b)],new Aa(128,128,255));for(g=1;g<c-1;g++)for(l=0;l<d;l++)h=g,j=g+1,i=l+1,k=l,Ob(a,[new m(f(6.283185307179586*i/d)*e(3.141592653589793*g/c)*b,f(3.141592653589793*g/c)*b,e(6.283185307179586*i/d)*e(3.141592653589793*g/c)*b),new m(f(6.283185307179586*i/d)*e(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*
b,e(6.283185307179586*i/d)*e(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/d)*e(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,e(6.283185307179586*k/d)*e(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/d)*e(3.141592653589793*h/c)*b,f(3.141592653589793*h/c)*b,e(6.283185307179586*k/d)*e(3.141592653589793*h/c)*b)],new Aa(128,128,255));for(g=0;g<d;g++)h=c-1,j=c,i=g+1,k=g,Ob(a,[new m(f(6.283185307179586*g/d)*e(3.141592653589793*h/c)*b,f(3.141592653589793*h/c)*b,e(6.283185307179586*g/
d)*e(3.141592653589793*h/c)*b),new m(f(6.283185307179586*i/d)*e(3.141592653589793*h/c)*b,f(3.141592653589793*h/c)*b,e(6.283185307179586*i/d)*e(3.141592653589793*h/c)*b),new m(f(6.283185307179586*k/d)*e(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,e(6.283185307179586*k/d)*e(3.141592653589793*j/c)*b)],new Aa(128,128,255));fc(a)};var Rc=pb.sphere$LContext3D$NI;pb.tile$LContext3D$IIIILColor$=function(a,b,c,d,e,f){b=[new m(b-e/2,c,d-e/2),new m(b-e/2,c,d+e/2),new m(b+e/2,c,d+e/2),new m(b+e/2,c,d-
e/2)];Jb(a,new Mb(b,f))};pb.tileOnGroup$LContext3D$IIIILColor$=function(a,b,c,d,e,f){Ob(a,[new m(b-e/2,c,d-e/2),new m(b-e/2,c,d+e/2),new m(b+e/2,c,d+e/2),new m(b+e/2,c,d-e/2)],f)};var pc=pb.tileOnGroup$LContext3D$IIIILColor$;pb.tileRectXZ$LContext3D$IIIIIILColor$LColor$=function(a,b,c,d,e,f,g,h,j){var i,k,l,p,r;i=e/g;k=d/g;l=new m(0,0,0);a._polygonList=new Eb;a._groupCenter=l;a._ignoringZHidden=!0;for(l=0;l<i;l++)for(p=0;p<k;p++)r=0===(l+p)%2?h:j,pc(a,b-d/2+(p+0.5)*g,f,c-e/2+(l+0.5)*g,g,r);fc(a)};
var Fb=pb.tileRectXZ$LContext3D$IIIIIILColor$LColor$;rb.prototype={};sc.prototype=new rb;rb.moveForward$LPlayer$=function(a){qb(a,50,0)};rb.move$LPlayer$NN=function(a,b,c){var d,e,f;d=a.vx;e=a.vz;f=Math.sqrt(d*d+e*e);if(1E-9<(0<=e?e:-e))e/=f;if(1E-9<(0<=d?d:-d))d/=f;e=Math.atan2(d,e);d=Math.sin(e);e=Math.cos(e);a.az=e*b-d*c;a.ax=d*b+e*c};var qb=rb.move$LPlayer$NN;rb.brake$LPlayer$=function(a){a.isBraking=!0};rb.unbrake$LPlayer$=function(a){a.isBraking=!1};rb.update$LPlayer$N=function(a,b){var c,d,
e,f,g,h,j,i,k,l;c=b/1E3;0.1<c&&(c=0.1);d=a.vx+=a.ax*c;a.vy+=a.ay*c;a.vz+=a.az*c;d=-100>=d?-100:d;a.vx=100<=d?100:d;d=a.vy;d=-3E3>=d?-3E3:d;a.vy=3E3<=d?3E3:d;d=a.vz;d=-100>=d?-100:d;f=a.vz=100<=d?100:d;d=a.vx*c;e=a.vy*c;f*=c;a.x+=d;a.y+=e;a.z+=f;e=a.isBraking?0.05:0.0010;a.vx-=(0<=d?d:-d)*a.vx*e;a.vz-=(0<=f?f:-f)*a.vz*e;a.isBraking&&(c=Math.pow(2.718281828459045,-c),a.az*=c,a.ax*=c);c=new m(0-1*f,0*f-0*d,1*d-0);e=Math.sqrt((g=c.x)*g+(h=c.y)*h+(j=c.z)*j);g=1E-9>e?new m(0,0,0):c.divSelf$N(e);d=Math.sqrt(d*
d+0+f*f)/a.r;h=g.x;j=g.y;c=g.z;g=Math.cos(d/2);d=Math.sin(d/2);h*=d;j*=d;l=c*d;c=a.rot;d=(f=c.t)*g-((e=c.x)*h+(i=c.y)*j+(k=c.z)*l);c.t=d;c.x=f*h+g*e+(i*l-k*j);c.y=f*j+g*i+(k*h-e*l);c.z=f*l+g*k+(e*j-i*h)};var Sc=rb.update$LPlayer$N;rb.bounce$LPlayer$LVector$=function(a,b){var c,d,e,f;c=a.vx*(d=b.x)+a.vy*(e=b.y)+a.vz*(f=b.z);a.vx-=1.5*c*d;a.vy-=1.5*c*e;a.vz-=1.5*c*f};O.prototype={};gc.prototype=new O;O.prototype._initTrees$=function(){this.trees=new Lb([new m(-271,-3,450),new m(-200,-3,720),new m(139,
-3,351),new m(171,-3,254),new m(214,-3,192),new m(-253,-3,555),new m(29,-3,385),new m(-72,-3,530),new m(96,-3,678),new m(-49,-3,222)]);this.treeRadius=24};O.prototype._initItems$=function(){this.items=new Lb([new m(149,-10,724),new m(107,-10,483),new m(279,-10,551),new m(-295,-10,261),new m(-16,-10,225),new m(95,-10,165),new m(264,-10,161),new m(-50,-10,325),new m(-169,-10,254),new m(271,-10,401)]);this.itemRadius=8};O.prototype._checkCollisionWithFloor$N=function(a){var b,c,d,e,f,g,h,j,i,k,l,p,r,
n,o;b=this.player;Sc(b,a);c=b.x;d=b.y;e=b.z;if((-30<=c&&30>=c&&-30<=e&&150>=e||-300<=c&&300>=c&&150<=e&&750>=e||-30<=c&&30>=c&&750<=e&&810>=e||-30<=c&&570>=c&&810<=e&&870>=e||510<=c&&1110>=c&&150<=e&&210>=e||1050<=c&&1110>=c&&750<=e&&1350>=e)&&2*-b.radius<d&&0>d)a=0*b.vx+1*b.vy+0*b.vz,b.vx-=0*a,b.vy-=1.5*a,b.vz-=0*a,b.y=0;510<=c&&(570>=c&&510<=e&&810>=e)&&(a=Math.floor((810-e)/30),a*=5,a-2*b.radius<d&&d<a&&(j=new m(0,30,5),i=Math.sqrt((k=j.x)*k+(l=j.y)*l+(f=j.z)*f),f=1E-9>i?new m(0,0,0):j.divSelf$N(i),
f=b.vx*(k=f.x)+b.vy*(l=f.y)+b.vz*(j=f.z),b.vx-=1.5*f*k,b.vy-=1.5*f*l,b.vz-=1.5*f*j,b.y=a));510<=c&&(570>=c&&210<=e&&510>e)&&(a=Math.floor((e-210)/30),a*=5,a-2*b.radius<d&&d<a&&(k=new m(0,30,-5),l=Math.sqrt((p=k.x)*p+(r=k.y)*r+(g=k.z)*g),g=1E-9>l?new m(0,0,0):k.divSelf$N(l),g=b.vx*(p=g.x)+b.vy*(r=g.y)+b.vz*(k=g.z),b.vx-=1.5*g*p,b.vy-=1.5*g*r,b.vz-=1.5*g*k,b.y=a));1110<=c&&(1270>=c&&150<=e&&810>=e)&&(a=80*((c-1110)/160),a-2*b.radius<d&&d<a&&(c=new m(-1,2,0),d=Math.sqrt((n=c.x)*n+(o=c.y)*o+(h=c.z)*h),
h=1E-9>d?new m(0,0,0):c.divSelf$N(d),h=b.vx*(n=h.x)+b.vy*(o=h.y)+b.vz*(c=h.z),b.vx-=1.5*h*n,b.vy-=1.5*h*o,b.vz-=1.5*h*c,b.y=a))};O.prototype._checkCollisionWithTrees$=function(){var a=this,b;b=this.player;this.trees.forEach$F$LVector$V$(function(c){var d,e,f,g,h,j,i,k,l;d=b.x-c.x;e=b.y-c.y;c=b.z-c.z;f=a.treeRadius+b.radius;d*d+e*e+c*c<f*f&&(d=new m(d,e,c),e=Math.sqrt((g=d.x)*g+(h=d.y)*h+(j=d.z)*j),g=1E-9>e?new m(0,0,0):d.divSelf$N(e),h=Math.sqrt((i=b.vx)*i+(k=b.vy)*k+(l=b.vz)*l),b.ax+=2*h*(i=g.x),
b.vy+=2*h*g.y,b.az+=2*h*(k=g.z),b.x+=i*(i=a.treeRadius)/4,b.z+=k*i/4)})};O.prototype._checkCollisionWithItems$=function(){var a,b,c,d,e,f,g,h;a=this.player;b=this.items;c=this.itemRadius;for(d=b.head;d;d=d._next)e=d.value,f=e.x-a.x,g=e.y-a.y,e=e.z-a.z,h=c+a.radius,f*f+g*g+e*e<h*h&&b.remove$LNode$Vector$E$(d)};O.prototype._updateViewpoint$=function(){var a,b,c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R,X,T,W,F,ca,B,P,Q,mb,C,M,G,J,L,N,U,O,K,S,ba,Aa,Wa,Xa,Ya,Za,$a,ab,Ka,La,cb,Na,db,eb,Oa,
fb,Pa,ka,la,Qa,gb,Ra,Ea,Ma,Fa,ea,fa,Ga,Ha,Ia,ra,sa,ta,ua,va,wa,xa,V,ma,na,ya,oa,pa,za,qa,da,ga,ha,ia,ja,Y,Z,$,aa,Ba,Ca,Da,hb,ib,jb,kb,lb;a=this.player;b=-a.vz;c=-a.vx;d=Math.sqrt(b*b+c*c);1E-9>d?(b=-1,c=0):(b/=d,c/=d);e=a.y;0>e&&(e=-300<=e?e:-300,e=-e/2);f=10;g=Math.sqrt((L=a.vx)*L+(N=a.vz)*N);50>g&&(f-=0.6*(50-g));h=new m(a.x+50*c,1.2*e+f,a.z+50*b);j=new m(a.x,a.y,a.z);(U=this.engine.camera).target=j;U.view=h;i=U.view;k=U.target;l=U.upper;p=U.fovyX;r=U.nearZ;n=U.farZ;o=U.aspectRatio;z=new m(k.x-
i.x,k.y-i.y,k.z-i.z);D=Math.sqrt((O=z.x)*O+(K=z.y)*K+(S=z.z)*S);u=1E-9>D?new m(0,0,0):z.divSelf$N(D);x=new m((Ya=l.y)*(Aa=u.z)-(ba=l.z)*(Xa=u.y),ba*(Za=u.x)-(Wa=l.x)*Aa,Wa*Xa-Ya*Za);y=Math.sqrt(($a=x.x)*$a+(ab=x.y)*ab+(Ka=x.z)*Ka);t=1E-9>y?new m(0,0,0):x.divSelf$N(y);w=new m((eb=u.y)*(cb=t.z)-(La=u.z)*(db=t.y),La*(Oa=t.x)-(Na=u.x)*cb,Na*db-eb*Oa);A=Math.sqrt((fb=w.x)*fb+(Pa=w.y)*Pa+(ka=w.z)*ka);v=1E-9>A?new m(0,0,0):w.divSelf$N(A);q=new I([la=t.x,Qa=t.y,gb=t.z,-(la*(Ea=i.x)+Qa*(Fa=i.y)+gb*(fa=i.z)),
Ra=v.x,Ma=v.y,ea=v.z,-(Ra*Ea+Ma*Fa+ea*fa),Ga=u.x,Ha=u.y,Ia=u.z,-(Ga*Ea+Ha*Fa+Ia*fa),0,0,0,1]);E=1/Math.tan(p/2);H=E/o;R=n/(n-r);s=new I([E,0,0,0,0,H,0,0,0,0,R,-R*r,0,0,1,0]);U.viewMatrix=q;U.projectionMatrix=s;X=(ra=s._m11)*(va=q._m11)+(sa=s._m12)*(wa=q._m21)+(ta=s._m13)*(xa=q._m31)+(ua=s._m14)*(V=q._m41);T=ra*(na=q._m12)+sa*(oa=q._m22)+ta*(za=q._m32)+ua*(da=q._m42);W=ra*(ga=q._m13)+sa*(ha=q._m23)+ta*(ia=q._m33)+ua*(ja=q._m43);F=ra*(Y=q._m14)+sa*(Z=q._m24)+ta*($=q._m34)+ua*(aa=q._m44);ca=(ma=s._m21)*
va+(ya=s._m22)*wa+(pa=s._m23)*xa+(qa=s._m24)*V;B=ma*na+ya*oa+pa*za+qa*da;P=ma*ga+ya*ha+pa*ia+qa*ja;Q=ma*Y+ya*Z+pa*$+qa*aa;mb=(Ba=s._m31)*va+(Ca=s._m32)*wa+(Da=s._m33)*xa+(hb=s._m34)*V;C=Ba*na+Ca*oa+Da*za+hb*da;M=Ba*ga+Ca*ha+Da*ia+hb*ja;G=Ba*Y+Ca*Z+Da*$+hb*aa;J=(ib=s._m41)*va+(jb=s._m42)*wa+(kb=s._m43)*xa+(lb=s._m44)*V;U.matrix=new I([X,T,W,F,ca,B,P,Q,mb,C,M,G,J,ib*na+jb*oa+kb*za+lb*da,ib*ga+jb*ha+kb*ia+lb*ja,ib*Y+jb*Z+kb*$+lb*aa])};O.prototype._updateClearedPlayer$N=function(a){var b,c,d,e;b=this.player;
c=b.x-1080;d=b.y-20;e=b.z-1380;1>(0<=c?c:-c)&&1>(0<=e?e:-e)?b.y-=10*Math.sin(this.totalElapsedMsec/1E3)*a/1E3:(b.x-=c*a/1E3,b.y-=d*a/1E3,b.z-=e*a/1E3)};O.prototype._updateClearedViewpoint$=function(){var a,b,c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R,X,T,W,F,ca,B,P,Q,C,G,M,J,L,N,O,U,K,S,ba,Aa,Ja,Wa,Xa,Ya,Za,$a,ab,Ka,La,cb,Na,db,eb,Oa,fb,Pa,ka,la,Qa,gb,Ra,Ea,Ma,Fa,ea,fa,Ga,Ha,Ia,ra,sa,ta,ua,va,wa,xa,V,ma,na,ya,oa,pa,za,qa,da,ga,ha,ia,ja,Y,Z,$,aa;a=this.player;b=new m(a.x+50*Math.sin(this.totalElapsedMsec/
5E3),a.y+20,a.z+50*Math.cos(this.totalElapsedMsec/5E3));c=new m(a.x,a.y,a.z);(Q=this.engine.camera).target=c;Q.view=b;d=Q.view;e=Q.target;f=Q.upper;g=Q.fovyX;h=Q.nearZ;j=Q.farZ;i=Q.aspectRatio;o=new m(e.x-d.x,e.y-d.y,e.z-d.z);q=Math.sqrt((C=o.x)*C+(G=o.y)*G+(M=o.z)*M);p=1E-9>q?new m(0,0,0):o.divSelf$N(q);s=new m((U=f.y)*(L=p.z)-(J=f.z)*(O=p.y),J*(K=p.x)-(N=f.x)*L,N*O-U*K);u=Math.sqrt((S=s.x)*S+(ba=s.y)*ba+(Aa=s.z)*Aa);r=1E-9>u?new m(0,0,0):s.divSelf$N(u);t=new m((Za=p.y)*(Wa=r.z)-(Ja=p.z)*(Ya=r.y),
Ja*($a=r.x)-(Xa=p.x)*Wa,Xa*Ya-Za*$a);v=Math.sqrt((ab=t.x)*ab+(Ka=t.y)*Ka+(La=t.z)*La);n=1E-9>v?new m(0,0,0):t.divSelf$N(v);k=new I([cb=r.x,Na=r.y,db=r.z,-(cb*(Oa=d.x)+Na*(Pa=d.y)+db*(la=d.z)),eb=n.x,fb=n.y,ka=n.z,-(eb*Oa+fb*Pa+ka*la),Qa=p.x,gb=p.y,Ra=p.z,-(Qa*Oa+gb*Pa+Ra*la),0,0,0,1]);z=1/Math.tan(g/2);D=z/i;x=j/(j-h);l=new I([z,0,0,0,0,D,0,0,0,0,x,-x*h,0,0,1,0]);Q.viewMatrix=k;Q.projectionMatrix=l;y=(Ea=l._m11)*(fa=k._m11)+(Ma=l._m12)*(Ga=k._m21)+(Fa=l._m13)*(Ha=k._m31)+(ea=l._m14)*(Ia=k._m41);w=
Ea*(sa=k._m12)+Ma*(ua=k._m22)+Fa*(wa=k._m32)+ea*(V=k._m42);A=Ea*(ma=k._m13)+Ma*(na=k._m23)+Fa*(ya=k._m33)+ea*(oa=k._m43);E=Ea*(pa=k._m14)+Ma*(za=k._m24)+Fa*(qa=k._m34)+ea*(da=k._m44);H=(ra=l._m21)*fa+(ta=l._m22)*Ga+(va=l._m23)*Ha+(xa=l._m24)*Ia;R=ra*sa+ta*ua+va*wa+xa*V;X=ra*ma+ta*na+va*ya+xa*oa;T=ra*pa+ta*za+va*qa+xa*da;W=(ga=l._m31)*fa+(ha=l._m32)*Ga+(ia=l._m33)*Ha+(ja=l._m34)*Ia;F=ga*sa+ha*ua+ia*wa+ja*V;ca=ga*ma+ha*na+ia*ya+ja*oa;B=ga*pa+ha*za+ia*qa+ja*da;P=(Y=l._m41)*fa+(Z=l._m42)*Ga+($=l._m43)*
Ha+(aa=l._m44)*Ia;Q.matrix=new I([y,w,A,E,H,R,X,T,W,F,ca,B,P,Y*sa+Z*ua+$*wa+aa*V,Y*ma+Z*na+$*ya+aa*oa,Y*pa+Z*za+$*qa+aa*da])};O.prototype._renderPlayer$LContext3D$=function(a){var b,c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,m,u,t,v,z,D,x,y,w,A;(b=this.player).y<-b.radius?Kb(a,5):Kb(a,3);b=(d=this.player).x;c=d.y-12;d=d.z;e=a._worldMatrix;f=e._m11;g=e._m12;h=e._m13;j=e._m14;i=e._m21;k=e._m22;l=e._m23;p=e._m24;r=e._m31;n=e._m32;o=e._m33;q=e._m34;m=e._m41;u=e._m42;t=e._m43;v=e._m44;e._m11=1*f+0*g+0*h+0*j;e._m12=
0*f+1*g+0*h+0*j;e._m13=0*f+0*g+1*h+0*j;e._m14=f*b+g*c+h*d+1*j;e._m21=1*i+0*k+0*l+0*p;e._m22=0*i+1*k+0*l+0*p;e._m23=0*i+0*k+1*l+0*p;e._m24=i*b+k*c+l*d+1*p;e._m31=1*r+0*n+0*o+0*q;e._m32=0*r+1*n+0*o+0*q;e._m33=0*r+0*n+1*o+0*q;e._m34=r*b+n*c+o*d+1*q;e._m41=1*m+0*u+0*t+0*v;e._m42=0*m+1*u+0*t+0*v;e._m43=0*m+0*u+1*t+0*v;e._m44=m*b+u*c+t*d+1*v;e=this.player.rot;b=a._worldMatrix;h=2*(x=e.x)*x;j=2*(y=e.y)*y;d=2*(w=e.z)*w;c=2*x*y;f=2*x*w;g=2*y*w;i=2*x*(x=e.t);k=2*y*x;e=2*w*x;w=1-j-d;y=c+e;x=f-k;c-=e;d=1-h-d;
e=g+i;f+=k;g-=i;A=1-h-j;h=b._m11;j=b._m12;i=b._m13;k=b._m14;l=b._m21;p=b._m22;r=b._m23;n=b._m24;o=b._m31;q=b._m32;m=b._m33;u=b._m34;t=b._m41;v=b._m42;z=b._m43;D=b._m44;b._m11=h*w+j*c+i*f+0*k;b._m12=h*y+j*d+i*g+0*k;b._m13=h*x+j*e+i*A+0*k;b._m14=0*h+0*j+0*i+1*k;b._m21=l*w+p*c+r*f+0*n;b._m22=l*y+p*d+r*g+0*n;b._m23=l*x+p*e+r*A+0*n;b._m24=0*l+0*p+0*r+1*n;b._m31=o*w+q*c+m*f+0*u;b._m32=o*y+q*d+m*g+0*u;b._m33=o*x+q*e+m*A+0*u;b._m34=0*o+0*q+0*m+1*u;b._m41=t*w+v*c+z*f+0*D;b._m42=t*y+v*d+z*g+0*D;b._m43=t*x+
v*e+z*A+0*D;b._m44=0*t+0*v+0*z+1*D;Rc(a,this.player.radius,6);a._worldMatrix=new Cb};O.prototype._renderTrees$LContext3D$=function(a){Kb(a,3);this.trees.forEach$F$LVector$V$(function(b){var c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,s,u,t,v;c=b.x;d=b.y;b=b.z;a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());e=a._worldMatrix;f=e._m11;g=e._m12;h=e._m13;j=e._m14;i=e._m21;k=e._m22;l=e._m23;p=e._m24;r=e._m31;n=e._m32;o=e._m33;q=e._m34;s=e._m41;u=e._m42;t=e._m43;v=e._m44;e._m11=1*f+0*g+0*h+0*j;e._m12=0*f+1*g+
0*h+0*j;e._m13=0*f+0*g+1*h+0*j;e._m14=f*c+g*d+h*b+1*j;e._m21=1*i+0*k+0*l+0*p;e._m22=0*i+1*k+0*l+0*p;e._m23=0*i+0*k+1*l+0*p;e._m24=i*c+k*d+l*b+1*p;e._m31=1*r+0*n+0*o+0*q;e._m32=0*r+1*n+0*o+0*q;e._m33=0*r+0*n+1*o+0*q;e._m34=r*c+n*d+o*b+1*q;e._m41=1*s+0*u+0*t+0*v;e._m42=0*s+1*u+0*t+0*v;e._m43=0*s+0*u+1*t+0*v;e._m44=s*c+u*d+t*b+1*v;Tc(a,new m(0,0,0),50,34,"./image/tree.png");a._worldMatrix=a._matrixStack.removeFirst$()})};O.prototype._renderItems$LContext3D$=function(a){var b,c,d,e,f;Kb(a,3);b=3.141592653589793*
this.totalElapsedMsec/1E3;c=Math.cos(b/2);d=Math.sin(b/2);e=0*d;f=0*d;this.items.forEach$F$LVector$V$(function(b){var h,j,i,k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R,X,T;h=b.x;j=b.y;b=b.z;a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());i=a._worldMatrix;k=i._m11;l=i._m12;p=i._m13;r=i._m14;n=i._m21;o=i._m22;q=i._m23;s=i._m24;u=i._m31;t=i._m32;v=i._m33;z=i._m34;D=i._m41;x=i._m42;y=i._m43;w=i._m44;i._m11=1*k+0*l+0*p+0*r;i._m12=0*k+1*l+0*p+0*r;i._m13=0*k+0*l+1*p+0*r;i._m14=k*h+l*j+p*b+1*r;i._m21=
1*n+0*o+0*q+0*s;i._m22=0*n+1*o+0*q+0*s;i._m23=0*n+0*o+1*q+0*s;i._m24=n*h+o*j+q*b+1*s;i._m31=1*u+0*t+0*v+0*z;i._m32=0*u+1*t+0*v+0*z;i._m33=0*u+0*t+1*v+0*z;i._m34=u*h+t*j+v*b+1*z;i._m41=1*D+0*x+0*y+0*w;i._m42=0*D+1*x+0*y+0*w;i._m43=0*D+0*x+1*y+0*w;i._m44=D*h+x*j+y*b+1*w;h=a._worldMatrix;o=2*e*e;q=2*d*d;l=2*f*f;k=2*e*d;r=2*e*f;n=2*d*f;s=2*e*c;u=2*d*c;p=2*f*c;j=1-q-l;b=k+p;i=r-u;k-=p;l=1-o-l;p=n+s;r+=u;n-=s;T=1-o-q;o=h._m11;q=h._m12;s=h._m13;u=h._m14;t=h._m21;v=h._m22;z=h._m23;D=h._m24;x=h._m31;y=h._m32;
w=h._m33;A=h._m34;E=h._m41;H=h._m42;R=h._m43;X=h._m44;h._m11=o*j+q*k+s*r+0*u;h._m12=o*b+q*l+s*n+0*u;h._m13=o*i+q*p+s*T+0*u;h._m14=0*o+0*q+0*s+1*u;h._m21=t*j+v*k+z*r+0*D;h._m22=t*b+v*l+z*n+0*D;h._m23=t*i+v*p+z*T+0*D;h._m24=0*t+0*v+0*z+1*D;h._m31=x*j+y*k+w*r+0*A;h._m32=x*b+y*l+w*n+0*A;h._m33=x*i+y*p+w*T+0*A;h._m34=0*x+0*y+0*w+1*A;h._m41=E*j+H*k+R*r+0*X;h._m42=E*b+H*l+R*n+0*X;h._m43=E*i+H*p+R*T+0*X;h._m44=0*E+0*H+0*R+1*X;Uc(a,[new m(-15,-10,0),new m(15,-10,0),new m(15,10,0),new m(-15,10,0)],"./image/redbull_free.png",
2,2,1,1);a._worldMatrix=a._matrixStack.removeFirst$()})};O.prototype._renderField$LContext3D$=function(a){var b,c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,s,u,t;b=new Aa(192,192,192);c=new Aa(160,255,160);d=new Aa(96,255,96);Kb(a,4);Fb(a,0,60,60,180,-20,30,b,b);Fb(a,0,450,600,600,-20,30,c,d);Fb(a,0,780,60,60,-20,30,d,c);Fb(a,270,840,600,60,-20,30,d,c);a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());b=new m(0,0,0);a._polygonList=new Eb;a._groupCenter=b;a._ignoringZHidden=!0;b=a._worldMatrix;e=b._m11;f=
b._m12;g=b._m13;h=b._m14;j=b._m21;i=b._m22;k=b._m23;l=b._m24;p=b._m31;r=b._m32;n=b._m33;o=b._m34;q=b._m41;s=b._m42;u=b._m43;t=b._m44;b._m11=1*e+0*f+0*g+0*h;b._m12=0*e+1*f+0*g+0*h;b._m13=0*e+0*f+1*g+0*h;b._m14=510*e+0*f+510*g+1*h;b._m21=1*j+0*i+0*k+0*l;b._m22=0*j+1*i+0*k+0*l;b._m23=0*j+0*i+1*k+0*l;b._m24=510*j+0*i+510*k+1*l;b._m31=1*p+0*r+0*n+0*o;b._m32=0*p+1*r+0*n+0*o;b._m33=0*p+0*r+1*n+0*o;b._m34=510*p+0*r+510*n+1*o;b._m41=1*q+0*s+0*u+0*t;b._m42=0*q+1*s+0*u+0*t;b._m43=0*q+0*s+1*u+0*t;b._m44=510*
q+0*s+510*u+1*t;for(b=0;10>b;b++)for(e=0;2>e;e++)f=0===(b+e)%2?c:d,pc(a,30*e+15,-20+5*(9-b),30*b+15,30,f);for(b=0;10>b;b++)for(e=0;2>e;e++)f=0===(b+e)%2?c:d,pc(a,30*e+15,-20+5*(9-b),30*-b-15,30,f);fc(a);a._worldMatrix=a._matrixStack.removeFirst$();Fb(a,810,180,600,60,-20,30,d,c);a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());b=new m(0,0,0);a._polygonList=new Eb;a._groupCenter=b;a._ignoringZHidden=!0;b=a._worldMatrix;e=b._m11;f=b._m12;g=b._m13;h=b._m14;j=b._m21;i=b._m22;k=b._m23;l=b._m24;
p=b._m31;r=b._m32;n=b._m33;o=b._m34;q=b._m41;s=b._m42;u=b._m43;t=b._m44;b._m11=1*e+0*f+0*g+0*h;b._m12=0*e+1*f+0*g+0*h;b._m13=0*e+0*f+1*g+0*h;b._m14=1110*e+0*f+150*g+1*h;b._m21=1*j+0*i+0*k+0*l;b._m22=0*j+1*i+0*k+0*l;b._m23=0*j+0*i+1*k+0*l;b._m24=1110*j+0*i+150*k+1*l;b._m31=1*p+0*r+0*n+0*o;b._m32=0*p+1*r+0*n+0*o;b._m33=0*p+0*r+1*n+0*o;b._m34=1110*p+0*r+150*n+1*o;b._m41=1*q+0*s+0*u+0*t;b._m42=0*q+1*s+0*u+0*t;b._m43=0*q+0*s+1*u+0*t;b._m44=1110*q+0*s+150*u+1*t;for(b=0;4>b;b++)for(e=0;22>e;e++)f=0===(b+
e)%2?c:d,Ob(a,[new m(40*b,-20+20*b,30*e),new m(40*b,-20+20*b,30*(e+1)),new m(40*(b+1),-20+20*(b+1),30*(e+1)),new m(40*(b+1),-20+20*(b+1),30*e)],f);fc(a);a._worldMatrix=a._matrixStack.removeFirst$();Fb(a,1080,1050,60,600,-20,30,d,c);Fb(a,1080,1380,60,60,-20,15,new Aa(255,215,0),new Aa(255,255,255));Kb(a,3)};O.prototype._setMobileOperation$=function(){var a=this;S.window.addEventListener("devicemotion",function(b){var c,d,e,b=b instanceof DeviceMotionEvent?b:null;c=30*b.accelerationIncludingGravity.y;
b=30*b.accelerationIncludingGravity.x/2;c=120>=c?c:120;-60>c?(c=d=a.player,c.isBraking=!0,qb(d,0,b/4)):0>c?(c=d=a.player,c.isBraking=!1,qb(d,0,b/2)):(d=e=a.player,d.isBraking=!1,qb(e,c,b))});S.window.addEventListener("touchstart",function(){a.isStarted?a.player.vy=80:(a.isStarted=!0,a.player.vz=100)})};O.prototype._setPCOperation$=function(){var a=this;S.window.document.addEventListener("keypress",function(b){var c;if(a.isStarted)switch(b=b instanceof KeyboardEvent?b:null,b.keyCode){case 119:b=c=
a.player;b.isBraking=!1;qb(c,100,0);break;case 115:b=a.player;b.isBraking=!0;break;case 97:b=c=a.player;b.isBraking=!1;qb(c,0,-50);break;case 100:b=c=a.player;b.isBraking=!1;qb(c,0,50);break;case 104:b=c=a.player;b.isBraking=!1;qb(c,0,-50);break;case 106:b=a.player;b.isBraking=!0;break;case 107:b=c=a.player;b.isBraking=!1;qb(c,100,0);break;case 108:b=c=a.player;b.isBraking=!1;qb(c,0,50);break;case 32:a.player.vy=80}else a.isStarted=!0,a.player.vz=100},!1)};O.prototype.run$=function(){this.engine.start$()};
Zb.prototype={};xc.prototype=new Zb;Zb.main$AS=function(){(new gc).engine.start$()};C.prototype={};m.prototype=new C;L.prototype=new C;yc.prototype=new C;C.origin$=function(){return new m(0,0,0)};C.prototype.add$LVector$=function(a){return new m(this.x+a.x,this.y+a.y,this.z+a.z)};C.prototype.addSelf$LVector$=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};C.prototype.sub$LVector$=function(a){return new m(this.x-a.x,this.y-a.y,this.z-a.z)};C.prototype.subSelf$LVector$=function(a){this.x-=
a.x;this.y-=a.y;this.z-=a.z;return this};C.prototype.mul$N=function(a){return new m(this.x*a,this.y*a,this.z*a)};C.prototype.mulSelf$N=function(a){this.x*=a;this.y*=a;this.z*=a;return this};C.prototype.div$N=function(a){return new m(this.x/a,this.y/a,this.z/a)};C.prototype.divSelf$N=function(a){this.x/=a;this.y/=a;this.z/=a;return this};C.prototype.dot$LVector$=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};C.prototype.cross$LVector$=function(a){var b,c,d,e,f,g;return new m((f=this.y)*(c=a.z)-
(b=this.z)*(e=a.y),b*(g=a.x)-(d=this.x)*c,d*e-f*g)};C.prototype.crossSelf$LVector$=function(a){var b,c,d,e,f;b=(f=this.y)*(c=a.z)-(d=this.z)*(e=a.y);c=d*(d=a.x)-(a=this.x)*c;this.x=b;this.y=c;this.z=a*e-f*d;return this};C.prototype.unit$=function(){var a,b,c,d;a=Math.sqrt((b=this.x)*b+(c=this.y)*c+(d=this.z)*d);return 1E-9>a?new m(0,0,0):new m(this.x/a,this.y/a,this.z/a)};C.prototype.unitSelf$=function(){var a,b,c,d;a=Math.sqrt((b=this.x)*b+(c=this.y)*c+(d=this.z)*d);return 1E-9>a?new m(0,0,0):this.divSelf$N(a)};
C.prototype.sqabs$=function(){var a,b,c;return(a=this.x)*a+(b=this.y)*b+(c=this.z)*c};C.prototype.abs$=function(){var a,b,c;return Math.sqrt((a=this.x)*a+(b=this.y)*b+(c=this.z)*c)};C.prototype.rotateX$N=function(a){var b,c,d;b=Math.sin(a);a=Math.cos(a);return new m(this.x,(d=this.y)*a-(c=this.z)*b,c*a+d*b)};C.prototype.rotateXSelf$N=function(a){var b,c,d,e;b=Math.sin(a);a=Math.cos(a);this.y=c=(e=this.y)*a-(d=this.z)*b;this.z=d*a+e*b;return this};C.prototype.rotateY$N=function(a){var b,c,d;b=Math.sin(a);
a=Math.cos(a);return new m((d=this.x)*a+(c=this.z)*b,this.y,c*a-d*b)};C.prototype.rotateYSelf$N=function(a){var b,c,d,e;b=Math.sin(a);a=Math.cos(a);this.x=c=(e=this.x)*a+(d=this.z)*b;this.z=d*a-e*b;return this};C.prototype.rotateZ$N=function(a){var b,c,d;b=Math.sin(a);a=Math.cos(a);return new m(this.x*a-(c=this.y)*b,c*a+(d=this.z)*b,d)};C.prototype.rotateZSelf$N=function(a){var b,c,d;b=Math.sin(a);c=Math.cos(a);a=this.x*c-(d=this.y)*b;b=d*c+this.z*b;this.x=a;this.y=b;return this};C.prototype.transform$LMatrix$=
function(a){var b,c,d,e,f;b=a._m11*(c=this.x)+a._m12*(d=this.y)+a._m13*(e=this.z)+a._m14*(f=this.w);return new L(b,a._m21*c+a._m22*d+a._m23*e+a._m24*f,a._m31*c+a._m32*d+a._m33*e+a._m34*f,a._m41*c+a._m42*d+a._m43*e+a._m44*f)};C.prototype.transformSelf$LMatrix$=function(a){var b,c,d,e,f,g,h;b=a._m11*(e=this.x)+a._m12*(f=this.y)+a._m13*(g=this.z)+a._m14*(h=this.w);c=a._m21*e+a._m22*f+a._m23*g+a._m24*h;d=a._m31*e+a._m32*f+a._m33*g+a._m34*h;a=a._m41*e+a._m42*f+a._m43*g+a._m44*h;this.x=b/a;this.y=c/a;this.z=
d/a;this.w=1;return this};C.prototype.toString=function(){var a;a=function(a){var c,d,a=a.toFixed(1);c=a.length;for(d=0;d<8-c;d++)a=" "+a;return a};return"("+a(this.x)+","+a(this.y)+","+a(this.z)+","+a(this.w)+")"};K.prototype={};Cb.prototype=new K;I.prototype=new K;K.prototype.copy$=function(){return new I([this._m11,this._m12,this._m13,this._m14,this._m21,this._m22,this._m23,this._m24,this._m31,this._m32,this._m33,this._m34,this._m41,this._m42,this._m43,this._m44])};K.translating$LVector$=function(a){return new I([1,
0,0,a.x,0,1,0,a.y,0,0,1,a.z,0,0,0,1])};K.translating$NNN=function(a,b,c){return new I([1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1])};K.rotatingX$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new I([1,0,0,0,0,a,-b,0,0,b,a,0,0,0,0,1])};K.rotatingY$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new I([a,0,b,0,0,1,0,0,-b,0,a,0,0,0,0,1])};K.rotatingZ$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new I([a,-b,0,0,b,a,0,0,0,0,1,0,0,0,0,1])};K.scaling$NNN=function(a,b,c){return new I([a,0,0,
0,0,b,0,0,0,0,c,0,0,0,0,1])};K.prototype.mul$LVector$=function(a){var b,c,d,e,a=this._m11*(b=a.x)+this._m12*(c=a.y)+this._m13*(d=a.z)+this._m14*(e=a.w);return new L(a,this._m21*b+this._m22*c+this._m23*d+this._m24*e,this._m31*b+this._m32*c+this._m33*d+this._m34*e,this._m41*b+this._m42*c+this._m43*d+this._m44*e)};K.prototype.compose$LMatrix$=function(a){var b,c,d,e,f,g,h,j,i,k,l,p,r,n,o,m,s,u,t,v,z,D,x,y,w,A,E,H,R,X;b=(h=this._m11)*(k=a._m11)+(j=this._m12)*(l=a._m21)+(i=this._m13)*(p=a._m31)+(e=this._m14)*
(g=a._m41);c=h*(n=a._m12)+j*(m=a._m22)+i*(u=a._m32)+e*(v=a._m42);d=h*(z=a._m13)+j*(D=a._m23)+i*(x=a._m33)+e*(y=a._m43);a=h*(h=a._m14)+j*(j=a._m24)+i*(i=a._m34)+e*(w=a._m44);e=(r=this._m21)*k+(o=this._m22)*l+(s=this._m23)*p+(t=this._m24)*g;f=(A=this._m31)*k+(E=this._m32)*l+(H=this._m33)*p+(R=this._m34)*g;g=(X=this._m41)*k+(k=this._m42)*l+(l=this._m43)*p+(p=this._m44)*g;return new I([b,c,d,a,e,r*n+o*m+s*u+t*v,r*z+o*D+s*x+t*y,r*h+o*j+s*i+t*w,f,A*n+E*m+H*u+R*v,A*z+E*D+H*x+R*y,A*h+E*j+H*i+R*w,g,X*n+k*
m+l*u+p*v,X*z+k*D+l*x+p*y,X*h+k*j+l*i+p*w])};K.prototype.composeSelf$LMatrix$=function(a){var b,c,d,e,f,g,h,j,i,k,l,p,m,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H;b=this._m11;c=this._m12;d=this._m13;e=this._m14;f=this._m21;g=this._m22;h=this._m23;j=this._m24;i=this._m31;k=this._m32;l=this._m33;p=this._m34;m=this._m41;n=this._m42;o=this._m43;q=this._m44;this._m11=b*(s=a._m11)+c*(u=a._m21)+d*(t=a._m31)+e*(v=a._m41);this._m12=b*(z=a._m12)+c*(D=a._m22)+d*(x=a._m32)+e*(y=a._m42);this._m13=b*(w=a._m13)+c*(A=a._m23)+
d*(E=a._m33)+e*(H=a._m43);this._m14=b*(b=a._m14)+c*(c=a._m24)+d*(d=a._m34)+e*(a=a._m44);this._m21=f*s+g*u+h*t+j*v;this._m22=f*z+g*D+h*x+j*y;this._m23=f*w+g*A+h*E+j*H;this._m24=f*b+g*c+h*d+j*a;this._m31=i*s+k*u+l*t+p*v;this._m32=i*z+k*D+l*x+p*y;this._m33=i*w+k*A+l*E+p*H;this._m34=i*b+k*c+l*d+p*a;this._m41=m*s+n*u+o*t+q*v;this._m42=m*z+n*D+o*x+q*y;this._m43=m*w+n*A+o*E+q*H;this._m44=m*b+n*c+o*d+q*a;return this};K.prototype.toString=function(){var a,b;a=function(a){var b,e,a=a.toFixed(1);b=a.length;
for(e=0;e<8-b;e++)a=" "+a;return a};b=""+("|"+a(this._m11)+","+a(this._m12)+","+a(this._m13)+","+a(this._m14)+"|\n");b+="|"+a(this._m21)+","+a(this._m22)+","+a(this._m23)+","+a(this._m24)+"|\n";b+="|"+a(this._m31)+","+a(this._m32)+","+a(this._m33)+","+a(this._m34)+"|\n";return b+="|"+a(this._m41)+","+a(this._m42)+","+a(this._m43)+","+a(this._m44)+"|\n"};K.prototype.invert$=function(){var a,b,c,d,e,f;d=[this._m11,this._m12,this._m13,this._m14,this._m21,this._m22,this._m23,this._m24,this._m31,this._m32,
this._m33,this._m34,this._m41,this._m42,this._m43,this._m44];e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];for(a=0;3>a;a++){c=d[4*a+a];for(b=0;4>b;b++)d[4*a+b]/=c,e[4*a+b]/=c;for(b=a+1;4>b;b++){f=d[4*b+a];for(c=0;4>c;c++)d[4*b+c]-=d[4*a+c]*f,e[4*b+c]-=e[4*a+c]*f}}for(a=3;0<a;a--)for(b=a-1;0<=b;b--){f=d[4*b+a];for(c=0;4>c;c++)d[4*b+c]-=d[4*a+c]*f,e[4*b+c]-=e[4*a+c]*f}return new I(e)};ba.prototype={};zc.prototype=new ba;Ac.prototype=new ba;Ab.prototype=new ba;ba.prototype.copy$=function(){return new Ab(this.t,
this.x,this.y,this.z)};ba.prototype.mul$LQuaternion$=function(a){var b,c,d,e,f,g,h,j,i;b=new Ab(this.t,this.x,this.y,this.z);a=(c=b.t)*(e=a.t)-((f=b.x)*(d=a.x)+(g=b.y)*(i=a.y)+(j=b.z)*(h=a.z));b.t=a;b.x=c*d+e*f+(g*h-j*i);b.y=c*i+e*g+(j*d-f*h);b.z=c*h+e*j+(f*i-g*d);return b};ba.prototype.mulSelf$LQuaternion$=function(a){var b,c,d,e,f,g,h,j;this.t=a=(b=this.t)*(d=a.t)-((e=this.x)*(c=a.x)+(f=this.y)*(j=a.y)+(h=this.z)*(g=a.z));this.x=b*c+d*e+(f*g-h*j);this.y=b*j+d*f+(h*c-e*g);this.z=b*g+d*h+(e*j-f*c);
return this};ba.prototype.toMatrix$=function(){var a,b,c,d,e,f,g,h,j,i;a=2*(g=this.x)*g;b=2*(h=this.y)*h;c=2*(j=this.z)*j;d=2*g*h;e=2*g*j;f=2*h*j;g=2*g*(i=this.t);h=2*h*i;j=2*j*i;return new I([1-b-c,d+j,e-h,0,d-j,1-a-c,f+g,0,e+h,f-g,1-a-b,0,0,0,0,1])};ba.prototype.toString=function(){var a,b,c;a=this.x.toFixed(3);b=this.y.toFixed(3);c=this.z.toFixed(3);return this.t.toFixed(3)+" : ("+a+", "+b+", "+c+", )"};ba.rotating$NNNN=function(a,b,c,d){var e;e=Math.cos(a/2);a=Math.sin(a/2);return new Ab(e,b*
a,c*a,d*a)};var uc=ba.rotating$NNNN;ba.rotating$NLVector$=function(a,b){var c,d,e,f,g;c=b.x;d=b.y;e=b.z;f=Math.cos(a/2);g=Math.sin(a/2);return new Ab(f,c*g,d*g,e*g)};ba.rotate$LVector$LVector$N=function(a,b,c){var d,e,f,g,h,j,i,k,l,p;d=Math.cos(c/2);e=Math.sin(c/2);c=a.x;g=a.y;h=a.z;a=b.x*e;j=b.y*e;i=b.z*e;k=-b.x*e;l=-b.y*e;p=-b.z*e;b=0*d-(k*c+l*g+p*h);e=d*c+0*k+(l*h-p*g);f=d*g+0*l+(p*c-k*h);c=d*h+0*p+(k*g-l*c);return new m(b*a+d*e+(f*i-c*j),b*j+d*f+(c*a-e*i),b*i+d*c+(e*j-f*a))};J.prototype={};hc.prototype=
new J;J.prototype.isMobile$=function(){return this._isMobile};J.loadImages$AS=function(a){var b,c,d,e,f;c=S.document.getElementById("tmp_canvas");c=c instanceof HTMLElement?c:null;c=(c instanceof HTMLCanvasElement?c:null).getContext("2d");b=c instanceof CanvasRenderingContext2D?c:null;c=function(a){J.images[a].onload=function(){var c;c=J.images[a];J.isLoadedImage[a]=!0;b.drawImage(c,0,0);J.imageDatas[a]=b.getImageData(0,0,c.width,c.height)}};for(d=0;d<a.length;d++)e=a[d],f=S.document.createElement("img"),
f=f instanceof HTMLImageElement?f:null,f.src=e,J.isLoadedImage[e]=!1,J.images[e]=f,c(e)};var Pc=J.loadImages$AS;J.prototype.setSkyImage$S=function(a){this._skyImageSrc=a;this._skyImage=J.images[a]};J.prototype.start$=function(){var a=this,b,c,d=S.document.getElementById("fps");b={_stopwatch:{_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null},_recentlyMsecLog:[],_lastMsec:0,_fpsElement:d instanceof HTMLElement?d:null,_enabledHtmlLog:!0,_enabledConsoleLog:!1};Mc(b._stopwatch);c=function(){var e,d;
Vc(b);e=b._lastMsec;a.onUpdate(e);d={_worldMatrix:new Cb,_matrixStack:new kc,camera:a.camera,_depth:3,modelList1:new nb,modelList2:new nb,modelList3:new nb,modelList4:new nb,modelList5:new nb,_polygonList:null,_groupCenter:null,_ignoringZHidden:!1,backgroundColor:new Aa(90,135,158)};a._skyImage&&J.isLoadedImage[a._skyImageSrc]?(a.context.fillStyle="#"+d.backgroundColor.toHexString$(),a.context.fillRect(0,0,a._width,a._height),a.renderSkyImage$()):(a.context.fillStyle="#"+d.backgroundColor.toHexString$(),
a.context.fillRect(0,0,a._width,a._height));a.onRender(d,e);d.modelList5.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});d.modelList4.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});d.modelList3.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});d.modelList2.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});d.modelList1.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});B.global.setTimeout(c,0)};B.global.setTimeout(function(){S.window.scrollTo(0,1)},500);
B.global.setTimeout(c,0)};J.prototype.renderSkyImage$=function(){var a,b,c,d,e,f,g,h,j,i;e=(d=this.camera).target;f=d.view;d=e.x-f.x;a=e.y-f.y;e=e.z-f.z;a=-a;b=Math.atan2(d,e);c=Math.atan2(a,Math.sqrt(d*d+e*e));d=(e=this._skyImage).width;a=e.height;e=(f=this.camera).fovyX/3.141592653589793/2*d;f=e*f.aspectRatio;b=(b/3.141592653589793/2+0.5)*d-e/2;c=(c/3.141592653589793+0.5)*a-f/2;0>b&&(b+=d);0>c&&(c+=a);g=b+e>=d;h=c+f>=a;g&&h?(j=(d-b)/e,f=(a-c)/f,this.context.drawImage(this._skyImage,~~b,~~c,~~(d-
b),~~(a-c),0,0,~~(this._width*j),~~(this._height*f)),0!==~~(b+e-d)&&this.context.drawImage(this._skyImage,0,~~c,~~(b+e-d),~~(a-c),~~((i=this._width)*j),0,~~(i*(1-j)),~~(this._height*f))):g?(i=(d-b)/e,0!==~~(d-b)&&0!==~~(this._width*i)&&this.context.drawImage(this._skyImage,~~b,~~c,~~(d-b),~~f,0,0,~~(this._width*i),this._height),0!==~~(b+e-d)&&0!==~~(this._width*(1-i))&&this.context.drawImage(this._skyImage,0,~~c,~~(b+e-d),~~f,~~((j=this._width)*i),0,~~(j*(1-i)),this._height)):h?this.context.drawImage(this._skyImage,
~~b,~~c,~~e,~~(a-c),0,0,this._width,~~(this._height*((a-c)/f))):this.context.drawImage(this._skyImage,~~b,~~c,~~e,~~f,0,0,this._width,this._height)};J.prototype.setScreenMatrix$NN=function(a,b){var c,d,e,f,g,h,j,i,k,l,p,m,n,o,q,s,u,t,v;c=new I([1,0,0,a/2,0,1,0,b/2,0,0,1,0,0,0,0,1]);t=a/2;v=-b/2;d=c._m11;e=c._m12;f=c._m13;g=c._m14;h=c._m21;j=c._m22;i=c._m23;k=c._m24;l=c._m31;p=c._m32;m=c._m33;n=c._m34;o=c._m41;q=c._m42;s=c._m43;u=c._m44;c._m11=d*t+0*e+0*f+0*g;c._m12=0*d+e*v+0*f+0*g;c._m13=0*d+0*e+
1*f+0*g;c._m14=0*d+0*e+0*f+1*g;c._m21=h*t+0*j+0*i+0*k;c._m22=0*h+j*v+0*i+0*k;c._m23=0*h+0*j+1*i+0*k;c._m24=0*h+0*j+0*i+1*k;c._m31=l*t+0*p+0*m+0*n;c._m32=0*l+p*v+0*m+0*n;c._m33=0*l+0*p+1*m+0*n;c._m34=0*l+0*p+0*m+1*n;c._m41=o*t+0*q+0*s+0*u;c._m42=0*o+q*v+0*s+0*u;c._m43=0*o+0*q+1*s+0*u;c._m44=0*o+0*q+0*s+1*u;this.screenMatrix=c};J.prototype.updateMatrix$=function(){var a,b,c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R,X,T,W,F,B,C,P,Q,G,J,M,L;a=this.camera;b=a.view;c=a.target;d=a.upper;e=a.fovyX;
f=a.nearZ;g=a.farZ;h=a.aspectRatio;c=new m(c.x-b.x,c.y-b.y,c.z-b.z);p=Math.sqrt((i=c.x)*i+(u=c.y)*u+(t=c.z)*t);i=1E-9>p?new m(0,0,0):c.divSelf$N(p);d=new m((x=d.y)*(v=i.z)-(r=d.z)*(D=i.y),r*(y=i.x)-(z=d.x)*v,z*D-x*y);r=Math.sqrt((k=d.x)*k+(n=d.y)*n+(w=d.z)*w);k=1E-9>r?new m(0,0,0):d.divSelf$N(r);n=new m((H=i.y)*(q=k.z)-(o=i.z)*(E=k.y),o*(R=k.x)-(A=i.x)*q,A*E-H*R);o=Math.sqrt((l=n.x)*l+(X=n.y)*X+(T=n.z)*T);l=1E-9>o?new m(0,0,0):n.divSelf$N(o);b=new I([W=k.x,F=k.y,B=k.z,-(W*(P=b.x)+F*(G=b.y)+B*(J=b.z)),
C=l.x,Q=l.y,s=l.z,-(C*P+Q*G+s*J),j=i.x,M=i.y,L=i.z,-(j*P+M*G+L*J),0,0,0,1]);e=1/Math.tan(e/2);g/=g-f;j=new I([e,0,0,0,0,e/h,0,0,0,0,g,-g*f,0,0,1,0]);a.viewMatrix=b;a.projectionMatrix=j;f=(J=j._m11)*(T=b._m11)+(L=j._m12)*(l=b._m21)+(X=j._m13)*(M=b._m31)+(o=j._m14)*(s=b._m41);h=J*(e=b._m12)+L*(W=b._m22)+X*(F=b._m32)+o*(B=b._m42);g=J*(C=b._m13)+L*(P=b._m23)+X*(Q=b._m33)+o*(G=b._m43);b=J*(J=b._m14)+L*(L=b._m24)+X*(X=b._m34)+o*(k=b._m44);o=(A=j._m21)*T+(E=j._m22)*l+(H=j._m23)*M+(R=j._m24)*s;q=(n=j._m31)*
T+(w=j._m32)*l+(r=j._m33)*M+(v=j._m34)*s;s=(z=j._m41)*T+(T=j._m42)*l+(l=j._m43)*M+(j=j._m44)*s;a.matrix=new I([f,h,g,b,o,A*e+E*W+H*F+R*B,A*C+E*P+H*Q+R*G,A*J+E*L+H*X+R*k,q,n*e+w*W+r*F+v*B,n*C+w*P+r*Q+v*G,n*J+w*L+r*X+v*k,s,z*e+T*W+l*F+j*B,z*C+T*P+l*Q+j*G,z*J+T*L+l*X+j*k])};G.prototype={};Bc.prototype=new G;G.setDepth$LContext3D$I=function(a,b){if(!(1<=b&&5>=b)){debugger;throw Error("[jsx/engine.jsx:263] assertion failure");}a._depth=b};var Kb=G.setDepth$LContext3D$I;G.getDepth$LContext3D$=function(a){return a._depth};
G.setBackgroundColor$LContext3D$LColor$=function(a,b){a.backgroundColor=b};G.pushMatrix$LContext3D$=function(a){a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$())};G.popMatrix$LContext3D$=function(a){a._worldMatrix=a._matrixStack.removeFirst$()};G.resetMatrix$LContext3D$=function(a){a._worldMatrix=new Cb};G.translate$LContext3D$NNN=function(a,b,c,d){var e,f,g,h,j,i,k,l,p,m,n,o,q,s,u,t,a=a._worldMatrix;e=a._m11;f=a._m12;g=a._m13;h=a._m14;j=a._m21;i=a._m22;k=a._m23;l=a._m24;p=a._m31;m=a._m32;n=
a._m33;o=a._m34;q=a._m41;s=a._m42;u=a._m43;t=a._m44;a._m11=1*e+0*f+0*g+0*h;a._m12=0*e+1*f+0*g+0*h;a._m13=0*e+0*f+1*g+0*h;a._m14=e*b+f*c+g*d+1*h;a._m21=1*j+0*i+0*k+0*l;a._m22=0*j+1*i+0*k+0*l;a._m23=0*j+0*i+1*k+0*l;a._m24=j*b+i*c+k*d+1*l;a._m31=1*p+0*m+0*n+0*o;a._m32=0*p+1*m+0*n+0*o;a._m33=0*p+0*m+1*n+0*o;a._m34=p*b+m*c+n*d+1*o;a._m41=1*q+0*s+0*u+0*t;a._m42=0*q+1*s+0*u+0*t;a._m43=0*q+0*s+1*u+0*t;a._m44=q*b+s*c+u*d+1*t};G.scale$LContext3D$NNN=function(a,b,c,d){var e,f,g,h,j,i,k,l,m,r,n,o,q,s,u,t,a=a._worldMatrix;
e=a._m11;f=a._m12;g=a._m13;h=a._m14;j=a._m21;i=a._m22;k=a._m23;l=a._m24;m=a._m31;r=a._m32;n=a._m33;o=a._m34;q=a._m41;s=a._m42;u=a._m43;t=a._m44;a._m11=e*b+0*f+0*g+0*h;a._m12=0*e+f*c+0*g+0*h;a._m13=0*e+0*f+g*d+0*h;a._m14=0*e+0*f+0*g+1*h;a._m21=j*b+0*i+0*k+0*l;a._m22=0*j+i*c+0*k+0*l;a._m23=0*j+0*i+k*d+0*l;a._m24=0*j+0*i+0*k+1*l;a._m31=m*b+0*r+0*n+0*o;a._m32=0*m+r*c+0*n+0*o;a._m33=0*m+0*r+n*d+0*o;a._m34=0*m+0*r+0*n+1*o;a._m41=q*b+0*s+0*u+0*t;a._m42=0*q+s*c+0*u+0*t;a._m43=0*q+0*s+u*d+0*t;a._m44=0*q+0*
s+0*u+1*t};G.rotate$LContext3D$LQuaternion$=function(a,b){var c,d,e,f,g,h,j,i,k,l,m,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E;c=a._worldMatrix;d=2*(y=b.x)*y;e=2*(w=b.y)*w;t=2*(A=b.z)*A;v=2*y*w;z=2*y*A;D=2*w*A;f=2*y*(y=b.t);g=2*w*y;x=2*A*y;A=1-e-t;w=v+x;y=z-g;v-=x;t=1-d-t;x=D+f;z+=g;D-=f;E=1-d-e;d=c._m11;e=c._m12;f=c._m13;g=c._m14;h=c._m21;j=c._m22;i=c._m23;k=c._m24;l=c._m31;m=c._m32;r=c._m33;n=c._m34;o=c._m41;q=c._m42;s=c._m43;u=c._m44;c._m11=d*A+e*v+f*z+0*g;c._m12=d*w+e*t+f*D+0*g;c._m13=d*y+e*x+f*E+0*g;c._m14=
0*d+0*e+0*f+1*g;c._m21=h*A+j*v+i*z+0*k;c._m22=h*w+j*t+i*D+0*k;c._m23=h*y+j*x+i*E+0*k;c._m24=0*h+0*j+0*i+1*k;c._m31=l*A+m*v+r*z+0*n;c._m32=l*w+m*t+r*D+0*n;c._m33=l*y+m*x+r*E+0*n;c._m34=0*l+0*m+0*r+1*n;c._m41=o*A+q*v+s*z+0*u;c._m42=o*w+q*t+s*D+0*u;c._m43=o*y+q*x+s*E+0*u;c._m44=0*o+0*q+0*s+1*u};G.beginGroup$LContext3D$LVector$=function(a,b){a._polygonList=new Eb;a._groupCenter=b;a._ignoringZHidden=!1};G.beginGroup$LContext3D$LVector$B=function(a,b,c){a._polygonList=new Eb;a._groupCenter=b;a._ignoringZHidden=
c};G.renderPolygonGroup$LContext3D$ALVector$LColor$=function(a,b,c){b=new Mb(b,c);b.applyWorldMatrix$LMatrix$(a._worldMatrix);b.applyViewMatrix$LMatrix$(a.camera.viewMatrix);b.isHidden$LCamera$(a.camera)||a._polygonList.prepend$LPolygon$(b)};var Ob=G.renderPolygonGroup$LContext3D$ALVector$LColor$;G.endGroup$LContext3D$=function(a){0!==a._polygonList.length&&Jb(a,new lc(a._polygonList,a._groupCenter,a._ignoringZHidden))};var fc=G.endGroup$LContext3D$;G.renderPolygon$LContext3D$ALVector$LColor$=function(a,
b,c){Jb(a,new Mb(b,c))};G.renderBillboard$LContext3D$LVector$IIS=function(a,b,c,d,e){Jb(a,new nc(b,c,d,e))};var Tc=G.renderBillboard$LContext3D$LVector$IIS;G.renderTexture$LContext3D$ALVector$SIIII=function(a,b,c,d,e,f,g){Jb(a,new $b(b,c,d,e,f,g))};var Uc=G.renderTexture$LContext3D$ALVector$SIIII;G.renderTexture$LContext3D$ALVector$S=function(a,b,c){Jb(a,new mc(b,c))};G.renderModel$LContext3D$LRenderable$=function(a,b){b.applyWorldMatrix$LMatrix$(a._worldMatrix);b.applyViewMatrix$LMatrix$(a.camera.viewMatrix);
if(!b.isHidden$LCamera$(a.camera))switch(a._depth){case 1:Pb(a,a.modelList1,b);break;case 2:Pb(a,a.modelList2,b);break;case 3:Pb(a,a.modelList3,b);break;case 4:Pb(a,a.modelList4,b);break;case 5:Pb(a,a.modelList5,b)}};var Jb=G.renderModel$LContext3D$LRenderable$;G.insertModelByZValue$LContext3D$LList$Renderable$E$LRenderable$=function(a,b,c){var d,a=!1;for(d=b.head;null!=d;d=d._next)if(d.value.vCenter.z<c.vCenter.z){b.insertBefore$LNode$Renderable$E$LRenderable$(d,c);a=!0;break}a||b.append$LRenderable$(c)};
var Pb=G.insertModelByZValue$LContext3D$LList$Renderable$E$LRenderable$;Ib.prototype={};jc.prototype=new Ib;Ib.prototype.move$LVector$=function(a){var b,c,d,e,f;c=this.rotatingMatrix;a=c._m11*(e=a.x)+c._m12*(b=a.y)+c._m13*(d=a.z)+c._m14*(f=a.w);b=new L(a,c._m21*e+c._m22*b+c._m23*d+c._m24*f,c._m31*e+c._m32*b+c._m33*d+c._m34*f,c._m41*e+c._m42*b+c._m43*d+c._m44*f);d=this.view;d.x+=c=b.x;d.y+=e=b.y;d.z+=d=b.z;b=this.target;b.x+=c;b.y+=e;b.z+=d};Ib.prototype.rotateY$N=function(a){var b,c,d,e,f,g,h,j,i,
k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R;b=this.target;c=this.view;b=new m(b.x-c.x,b.y-c.y,b.z-c.z);i=Math.sin(a);k=Math.cos(a);c=k*(l=b.x)+0*(p=b.y)+i*(r=b.z)+0*(n=b.w);d=0*l+0*p+0*r+1*n;b.x=c/d;b.y=(0*l+1*p+0*r+0*n)/d;b.z=(-i*l+0*p+k*r+0*n)/d;b.w=1;c=this.view;b.x+=c.x;b.y+=c.y;b.z+=c.z;this.target=b;b=Math.sin(a);a=Math.cos(a);a=new I([a,0,b,0,0,1,0,0,-b,0,a,0,0,0,0,1]);e=this.rotatingMatrix;f=a._m11;g=a._m12;h=a._m13;j=a._m14;b=a._m21;c=a._m22;d=a._m23;i=a._m24;k=a._m31;l=a._m32;p=a._m33;r=a._m34;
n=a._m41;o=a._m42;q=a._m43;s=a._m44;a._m11=f*(u=e._m11)+g*(t=e._m21)+h*(v=e._m31)+j*(z=e._m41);a._m12=f*(D=e._m12)+g*(x=e._m22)+h*(y=e._m32)+j*(w=e._m42);a._m13=f*(A=e._m13)+g*(E=e._m23)+h*(H=e._m33)+j*(R=e._m43);a._m14=f*(f=e._m14)+g*(g=e._m24)+h*(h=e._m34)+j*(e=e._m44);a._m21=b*u+c*t+d*v+i*z;a._m22=b*D+c*x+d*y+i*w;a._m23=b*A+c*E+d*H+i*R;a._m24=b*f+c*g+d*h+i*e;a._m31=k*u+l*t+p*v+r*z;a._m32=k*D+l*x+p*y+r*w;a._m33=k*A+l*E+p*H+r*R;a._m34=k*f+l*g+p*h+r*e;a._m41=n*u+o*t+q*v+s*z;a._m42=n*D+o*x+q*y+s*w;
a._m43=n*A+o*E+q*H+s*R;a._m44=n*f+o*g+q*h+s*e;this.rotatingMatrix=a};Ib.prototype.updateMatrix$=function(){var a,b,c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,H,R,B,C,G,F,J,L,P,Q,N,O,M;a=this.view;b=this.target;c=this.upper;d=this.fovyX;e=this.nearZ;f=this.farZ;g=this.aspectRatio;b=new m(b.x-a.x,b.y-a.y,b.z-a.z);l=Math.sqrt((j=b.x)*j+(s=b.y)*s+(u=b.z)*u);j=1E-9>l?new m(0,0,0):b.divSelf$N(l);c=new m((D=c.y)*(t=j.z)-(p=c.z)*(z=j.y),p*(x=j.x)-(v=c.x)*t,v*z-D*x);p=Math.sqrt((i=c.x)*i+(r=c.y)*
r+(y=c.z)*y);i=1E-9>p?new m(0,0,0):c.divSelf$N(p);r=new m((E=j.y)*(o=i.z)-(n=j.z)*(A=i.y),n*(H=i.x)-(w=j.x)*o,w*A-E*H);n=Math.sqrt((k=r.x)*k+(R=r.y)*R+(B=r.z)*B);k=1E-9>n?new m(0,0,0):r.divSelf$N(n);a=new I([C=i.x,G=i.y,F=i.z,-(C*(L=a.x)+G*(Q=a.y)+F*(N=a.z)),J=k.x,P=k.y,q=k.z,-(J*L+P*Q+q*N),h=j.x,O=j.y,M=j.z,-(h*L+O*Q+M*N),0,0,0,1]);d=1/Math.tan(d/2);f/=f-e;h=new I([d,0,0,0,0,d/g,0,0,0,0,f,-f*e,0,0,1,0]);this.viewMatrix=a;this.projectionMatrix=h;e=(N=h._m11)*(B=a._m11)+(M=h._m12)*(k=a._m21)+(R=h._m13)*
(O=a._m31)+(n=h._m14)*(q=a._m41);g=N*(d=a._m12)+M*(C=a._m22)+R*(G=a._m32)+n*(F=a._m42);f=N*(J=a._m13)+M*(L=a._m23)+R*(P=a._m33)+n*(Q=a._m43);a=N*(N=a._m14)+M*(M=a._m24)+R*(R=a._m34)+n*(i=a._m44);n=(w=h._m21)*B+(A=h._m22)*k+(E=h._m23)*O+(H=h._m24)*q;o=(r=h._m31)*B+(y=h._m32)*k+(p=h._m33)*O+(t=h._m34)*q;q=(v=h._m41)*B+(B=h._m42)*k+(k=h._m43)*O+(h=h._m44)*q;this.matrix=new I([e,g,f,a,n,w*d+A*C+E*G+H*F,w*J+A*L+E*P+H*Q,w*N+A*M+E*R+H*i,o,r*d+y*C+p*G+t*F,r*J+y*L+p*P+t*Q,r*N+y*M+p*R+t*i,q,v*d+B*C+k*G+h*F,
v*J+B*L+k*P+h*Q,v*N+B*M+k*R+h*i])};Hb.prototype={};Aa.prototype=new Hb;Hb.prototype._to2DigitHex$I=function(a){a=Math.floor(a).toString(16);1===a.length&&(a="0"+a);return a};Hb.prototype.toHexString$=function(){return this._to2DigitHex$I(this.r)+this._to2DigitHex$I(this.g)+this._to2DigitHex$I(this.b)};Hb.prototype.toString=function(){return"#"+this._to2DigitHex$I(this.r)+this._to2DigitHex$I(this.g)+this._to2DigitHex$I(this.b)};vb.prototype={};Cc.prototype=new vb;vb.isHiddenXY$ALVector$LEngine$=function(a,
b){var c,d,e,f,g;c=0;for(g=a.length;c<g;c++)if(d=a[c],-0<(e=d.x)&&e<b._width+0&&-0<(f=d.y)&&f<b._height+0)return!1;return!0};var qc=vb.isHiddenXY$ALVector$LEngine$;ob.prototype=new vb;Mb.prototype=new ob;ob.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,d,e,f,g,h,j,i;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],d=a._m11*(g=c.x)+a._m12*(h=c.y)+a._m13*(j=c.z)+a._m14*(i=c.w),e=a._m21*g+a._m22*h+a._m23*j+a._m24*i,f=a._m31*g+a._m32*h+a._m33*j+a._m34*i,g=a._m41*g+a._m42*h+a._m43*j+a._m44*
i,c.x=d/g,c.y=e/g,c.z=f/g,c.w=1;this.updateCenter$()};ob.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,d,e,f,g,h,j,i,k,l,p;b=[];for(c=p=l=k=0;c<this.vertices.length;c++)d=this.vertices[c],d=a._m11*(g=d.x)+a._m12*(h=d.y)+a._m13*(j=d.z)+a._m14*(i=d.w),e=a._m21*g+a._m22*h+a._m23*j+a._m24*i,f=a._m31*g+a._m32*h+a._m33*j+a._m34*i,g=a._m41*g+a._m42*h+a._m43*j+a._m44*i,d=new L(d,e,f,g),b.push(d),k+=d.x,l+=d.y,p+=d.z;a=this.vertices.length;this.vCenter=new m(k/a,l/a,p/a);this.vVertices=b};ob.prototype.isHidden$LCamera$=
function(a){var b;return a.nearZ<(b=this.vCenter.z)&&b<a.farZ?!1:!0};ob.prototype.move$LVector$=function(a){var b,c;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],c.x+=a.x,c.y+=a.y,c.z+=a.z;this.updateCenter$()};ob.prototype.updateCenter$=function(){var a,b,c,d,e;for(a=e=d=c=0;a<this.vertices.length;a++)b=this.vertices[a],c+=b.x,d+=b.y,e+=b.z;a=this.vertices.length;this.center=new m(c/a,d/a,e/a)};ob.prototype.toString=function(){var a,b;a="[";for(b=0;b<this.vertices.length;b++)a+=this.vertices[b].toString()+
",";return a+"]"};ob.prototype.draw$LEngine$=function(a){var b,c,d,e,f,g,h,j,i,k,l,p,r,n,o;b=a.context;c=this.vertices.length;d=this.vVertices;e=this._color;this._enabledLighting&&(f=this.vCenter,h=d[0],i=h.x-f.x,o=h.y-f.y,l=h.z-f.z,h=d[1],h=new m(h.x-f.x,h.y-f.y,h.z-f.z),k=(n=h.y)*l-(r=h.z)*o,l=r*i-(r=h.x)*l,k=h.x=k,l=h.y=l,i=h.z=r*o-n*i,i=Math.sqrt(k*k+l*l+i*i),h=1E-9>i?new m(0,0,0):h.divSelf$N(i),i=Math.sqrt((g=f.x)*g+(j=f.y)*j+(p=f.z)*p),f=1E-9>i?new m(0,0,0):new m(f.x/i,f.y/i,f.z/i),j=h.x*f.x+
h.y*f.y+h.z*f.z,f=(0.5599999999999999*j+0.5)*e.r,g=(0.5599999999999999*j+0.5)*e.g,e=(0.5599999999999999*j+0.5)*e.b,e=new Aa(255<=f?255:f,255<=g?255:g,255<=e?255:e));for(f=0;f<c;f++)g=d[f],i=a.camera.projectionMatrix,j=i._m11*(o=g.x)+i._m12*(n=g.y)+i._m13*(r=g.z)+i._m14*(k=g.w),p=i._m21*o+i._m22*n+i._m23*r+i._m24*k,h=i._m31*o+i._m32*n+i._m33*r+i._m34*k,i=i._m41*o+i._m42*n+i._m43*r+i._m44*k,g.x=j/i,g.y=p/i,g.z=h/i,g.w=1;for(f=0;f<c;f++)g=d[f],i=a.screenMatrix,j=i._m11*(o=g.x)+i._m12*(n=g.y)+i._m13*
(r=g.z)+i._m14*(k=g.w),p=i._m21*o+i._m22*n+i._m23*r+i._m24*k,h=i._m31*o+i._m32*n+i._m33*r+i._m34*k,i=i._m41*o+i._m42*n+i._m43*r+i._m44*k,g.x=j/i,g.y=p/i,g.z=h/i,g.w=1;if(qc(d,a))return!1;f=0;for(j=d.length;f<j;f++)if(a=(f+1)%j,g=(f+2)%j,0>Wc(d[a].x-d[f].x,d[a].y-d[f].y,d[g].x-d[f].x,d[g].y-d[f].y))return!1;e="#"+(e._to2DigitHex$I(e.r)+e._to2DigitHex$I(e.g)+e._to2DigitHex$I(e.b));b.strokeStyle=e;for(f=0;f<c;f++)b.beginPath(),b.moveTo(d[f].x,d[f].y),b.lineTo(d[(f+1)%c].x,d[(f+1)%c].y),b.stroke();b.fillStyle=
e;b.beginPath();for(f=0;f<c;f++)e=d[f].x,a=d[f].y,b.lineTo(e,a);b.closePath();b.fill();return!0};tb.prototype=new vb;Dc.prototype=new tb;lc.prototype=new tb;tb.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,d,e,f,g,h,j;b=this.center;c=a._m11*(f=b.x)+a._m12*(g=b.y)+a._m13*(h=b.z)+a._m14*(j=b.w);d=a._m21*f+a._m22*g+a._m23*h+a._m24*j;e=a._m31*f+a._m32*g+a._m33*h+a._m34*j;a=a._m41*f+a._m42*g+a._m43*h+a._m44*j;b.x=c/a;b.y=d/a;b.z=e/a;b.w=1};tb.prototype.applyViewMatrix$LMatrix$=function(a){var b,
c,d,e,f;b=this.center;b=a._m11*(c=b.x)+a._m12*(d=b.y)+a._m13*(e=b.z)+a._m14*(f=b.w);this.vCenter=new L(b,a._m21*c+a._m22*d+a._m23*e+a._m24*f,a._m31*c+a._m32*d+a._m33*e+a._m34*f,a._m41*c+a._m42*d+a._m43*e+a._m44*f)};tb.prototype.isHidden$LCamera$=function(a){return this._ignoringZHidden?!1:a.nearZ<this.vCenter.z&&this.vCenter.z<a.farZ?!1:!0};tb.prototype.draw$LEngine$=function(a){this.polygons.forEach$F$LPolygon$V$(function(b){b.isHidden$LCamera$(a.camera)||b.draw$LEngine$(a)});return!0};xb.prototype=
new ob;mc.prototype=new xb;$b.prototype=new xb;xb.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,d,e,f,g,h,j,i;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],d=a._m11*(g=c.x)+a._m12*(h=c.y)+a._m13*(j=c.z)+a._m14*(i=c.w),e=a._m21*g+a._m22*h+a._m23*j+a._m24*i,f=a._m31*g+a._m32*h+a._m33*j+a._m34*i,g=a._m41*g+a._m42*h+a._m43*j+a._m44*i,c.x=d/g,c.y=e/g,c.z=f/g,c.w=1;b=this.center;c=a._m11*(f=b.x)+a._m12*(g=b.y)+a._m13*(h=b.z)+a._m14*(j=b.w);d=a._m21*f+a._m22*g+a._m23*h+a._m24*j;e=a._m31*
f+a._m32*g+a._m33*h+a._m34*j;a=a._m41*f+a._m42*g+a._m43*h+a._m44*j;b.x=c/a;b.y=d/a;b.z=e/a;b.w=1};xb.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,d,e,f;b=[];for(c=0;c<this.vertices.length;c++)b.push(this.vertices[c].transform$LMatrix$(a));this.vVertices=b;d=this.center;d=a._m11*(b=d.x)+a._m12*(c=d.y)+a._m13*(e=d.z)+a._m14*(f=d.w);this.vCenter=new L(d,a._m21*b+a._m22*c+a._m23*e+a._m24*f,a._m31*b+a._m32*c+a._m33*e+a._m34*f,a._m41*b+a._m42*c+a._m43*e+a._m44*f)};xb.prototype.isHidden$LCamera$=
function(a){var b;return a.nearZ<(b=this.vCenter.z)&&b<a.farZ?!1:!0};xb.prototype.draw$LEngine$=function(a){var b=this,c,d,e,f,g,h,j,i,k,l,p,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,B,C,G,N,W,F,O,I,P,Q,K,S,M,ba,Aa,Ja,Sa,U,Ta,Ua,Va,ub,rb,Wa,Xa,Ya,Za,$a,ab,Ka,La,cb,Na,db,eb,Oa,fb,Pa,ka,la,Qa,gb,Ra,Ea,Ma,Fa,ea,fa,Ga,Ha,Ia,ra,sa,ta,ua,va,wa,xa,V,ma,na,ya,oa,pa,za,qa,da,ga,ha,ia,ja,Y,Z,$,aa,Ba,Ca,Da,hb,ib,jb,kb,lb,nb,ob,pb,qb,vb,sb,tb;if(!J.isLoadedImage[this._src])return!1;c=a.context;d=(ub=this.vertices)[3];e=
ub[0];f=ub[1];g=ub[2];p=a.screenMatrix;W=(rb=a.camera).projectionMatrix;F=rb.viewMatrix;O=(Wa=W._m11)*($a=F._m11)+(Xa=W._m12)*(ab=F._m21)+(Ya=W._m13)*(Ka=F._m31)+(Za=W._m14)*(La=F._m41);I=Wa*(Na=F._m12)+Xa*(eb=F._m22)+Ya*(fb=F._m32)+Za*(ka=F._m42);P=Wa*(la=F._m13)+Xa*(Qa=F._m23)+Ya*(gb=F._m33)+Za*(Ra=F._m43);Q=Wa*(Ea=F._m14)+Xa*(Ma=F._m24)+Ya*(Fa=F._m34)+Za*(ea=F._m44);K=(cb=W._m21)*$a+(db=W._m22)*ab+(Oa=W._m23)*Ka+(Pa=W._m24)*La;S=cb*Na+db*eb+Oa*fb+Pa*ka;M=cb*la+db*Qa+Oa*gb+Pa*Ra;ba=cb*Ea+db*Ma+
Oa*Fa+Pa*ea;Aa=(fa=W._m31)*$a+(Ga=W._m32)*ab+(Ha=W._m33)*Ka+(Ia=W._m34)*La;Ja=fa*Na+Ga*eb+Ha*fb+Ia*ka;Sa=fa*la+Ga*Qa+Ha*gb+Ia*Ra;U=fa*Ea+Ga*Ma+Ha*Fa+Ia*ea;Ta=(ra=W._m41)*$a+(sa=W._m42)*ab+(ta=W._m43)*Ka+(ua=W._m44)*La;Ua=ra*Na+sa*eb+ta*fb+ua*ka;Va=ra*la+sa*Qa+ta*gb+ua*Ra;tb=ra*Ea+sa*Ma+ta*Fa+ua*ea;r=(va=p._m11)*O+(wa=p._m12)*K+(xa=p._m13)*Aa+(V=p._m14)*Ta;n=va*I+wa*S+xa*Ja+V*Ua;o=va*P+wa*M+xa*Sa+V*Va;q=va*Q+wa*ba+xa*U+V*tb;s=(ma=p._m21)*O+(na=p._m22)*K+(ya=p._m23)*Aa+(oa=p._m24)*Ta;u=ma*I+na*S+ya*
Ja+oa*Ua;t=ma*P+na*M+ya*Sa+oa*Va;v=ma*Q+na*ba+ya*U+oa*tb;z=(pa=p._m31)*O+(za=p._m32)*K+(qa=p._m33)*Aa+(da=p._m34)*Ta;D=pa*I+za*S+qa*Ja+da*Ua;x=pa*P+za*M+qa*Sa+da*Va;y=pa*Q+za*ba+qa*U+da*tb;w=(ga=p._m41)*O+(ha=p._m42)*K+(ia=p._m43)*Aa+(ja=p._m44)*Ta;A=ga*I+ha*S+ia*Ja+ja*Ua;E=ga*P+ha*M+ia*Sa+ja*Va;sb=ga*Q+ha*ba+ia*U+ja*tb;B=r*(Y=d.x)+n*(Z=d.y)+o*($=d.z)+q*(aa=d.w);h=new L(B,s*Y+u*Z+t*$+v*aa,z*Y+D*Z+x*$+y*aa,w*Y+A*Z+E*$+sb*aa);C=r*(Ba=e.x)+n*(Ca=e.y)+o*(Da=e.z)+q*(hb=e.w);j=new L(C,s*Ba+u*Ca+t*Da+v*
hb,z*Ba+D*Ca+x*Da+y*hb,w*Ba+A*Ca+E*Da+sb*hb);G=r*(ib=f.x)+n*(jb=f.y)+o*(kb=f.z)+q*(lb=f.w);i=new L(G,s*ib+u*jb+t*kb+v*lb,z*ib+D*jb+x*kb+y*lb,w*ib+A*jb+E*kb+sb*lb);N=r*(nb=g.x)+n*(ob=g.y)+o*(pb=g.z)+q*(qb=g.w);k=new L(N,s*nb+u*ob+t*pb+v*qb,z*nb+D*ob+x*pb+y*qb,w*nb+A*ob+E*pb+sb*qb);if(qc([h,j,i,k],a))return!1;l=function(a,d,e,f,g,h,i,j,k,p,B,F,C,H){var G,J,R,N,P,O,Q,W,X,I,T,M,K,S,U,ba,ca,da,ga,ha,ia,ja,Y,Z,$,aa,V,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,ea,fa,Ga,Ha,Ia,Ja,Ma,Na,Oa,
Pa,ka,la,Qa,Ra,Wa,Xa,Ya,Za,$a,ab,Ka,La,Sa,Ta,Ua,Va,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Ib,Hb,Jb;G=function(a,b){return Math.sqrt(a*a+b*b)};J=G(j.x-i.x,j.y-i.y);R=G(k.x-h.x,k.y-h.y);N=G(h.x-i.x,h.y-i.y);P=G(k.x-j.x,k.y-j.y);O=J/R;Q=P/N;1>O&&(O=1/O);1>Q&&(Q=1/Q);W=1.01<O;X=1.01<Q;p<=b._minDiv||p<=b._maxDiv&&W&&X?(Y=new m(d.x+g.x,d.y+g.y,d.z+g.z),Y.x/=2,Y.y/=2,Y.z/=2,I=Y,Z=new m(e.x+f.x,e.y+f.y,e.z+f.z),Z.x/=2,Z.y/=2,Z.z/=2,T=Z,$=new m(d.x+e.x,
d.y+e.y,d.z+e.z),$.x/=2,$.y/=2,$.z/=2,M=$,aa=new m(g.x+f.x,g.y+f.y,g.z+f.z),aa.x/=2,aa.y/=2,aa.z/=2,K=aa,V=new m(d.x+f.x,d.y+f.y,d.z+f.z),V.x/=2,V.y/=2,V.z/=2,ma=r*(Ka=I.x)+n*(La=I.y)+o*(Sa=I.z)+q*(Ta=I.w),na=s*Ka+u*La+t*Sa+v*Ta,oa=z*Ka+D*La+x*Sa+y*Ta,pa=w*Ka+A*La+E*Sa+sb*Ta,S=new L(ma,na,oa,pa),qa=r*(Ua=T.x)+n*(Va=T.y)+o*(bb=T.z)+q*(cb=T.w),ra=s*Ua+u*Va+t*bb+v*cb,sa=z*Ua+D*Va+x*bb+y*cb,ta=w*Ua+A*Va+E*bb+sb*cb,U=new L(qa,ra,sa,ta),ua=r*(db=M.x)+n*(eb=M.y)+o*(fb=M.z)+q*(gb=M.w),va=s*db+u*eb+t*fb+v*
gb,wa=z*db+D*eb+x*fb+y*gb,xa=w*db+A*eb+E*fb+sb*gb,ba=new L(ua,va,wa,xa),ya=r*(hb=K.x)+n*(ib=K.y)+o*(jb=K.z)+q*(kb=K.w),za=s*hb+u*ib+t*jb+v*kb,Aa=z*hb+D*ib+x*jb+y*kb,Ba=w*hb+A*ib+E*jb+sb*kb,ca=new L(ya,za,Aa,Ba),Ca=r*(lb=V.x)+n*(mb=V.y)+o*(nb=V.z)+q*(ob=V.w),Da=s*lb+u*mb+t*nb+v*ob,Ea=z*lb+D*mb+x*nb+y*ob,Fa=w*lb+A*mb+E*nb+sb*ob,da=new L(Ca,Da,Ea,Fa),l(a,d,M,V,I,h,ba,da,S,p+1,B,F,C/2,H/2),l(a,M,e,T,V,ba,i,U,da,p+1,B,F+H/2,C/2,H/2),l(a,I,V,K,g,S,da,ca,k,p+1,B+C/2,F,C/2,H/2),l(a,V,T,f,K,da,U,j,ca,p+1,
B+C/2,F+H/2,C/2,H/2)):p<=b._maxVerticalDiv&&X?(ea=new m(d.x+g.x,d.y+g.y,d.z+g.z),ea.x/=2,ea.y/=2,ea.z/=2,I=ea,fa=new m(e.x+f.x,e.y+f.y,e.z+f.z),fa.x/=2,fa.y/=2,fa.z/=2,T=fa,Ga=r*(pb=I.x)+n*(qb=I.y)+o*(rb=I.z)+q*(tb=I.w),Ha=s*pb+u*qb+t*rb+v*tb,Ia=z*pb+D*qb+x*rb+y*tb,Ja=w*pb+A*qb+E*rb+sb*tb,S=new L(Ga,Ha,Ia,Ja),Ma=r*(ub=T.x)+n*(vb=T.y)+o*(wb=T.z)+q*(xb=T.w),Na=s*ub+u*vb+t*wb+v*xb,Oa=z*ub+D*vb+x*wb+y*xb,Pa=w*ub+A*vb+E*wb+sb*xb,U=new L(Ma,Na,Oa,Pa),l(a,d,e,T,I,h,i,U,S,p+1,B,F,C/2,H),l(a,I,T,f,g,S,U,j,
k,p+1,B+C/2,F,C/2,H)):p<=b._maxHorizontalDiv&&W?(ka=new m(d.x+e.x,d.y+e.y,d.z+e.z),ka.x/=2,ka.y/=2,ka.z/=2,M=ka,la=new m(g.x+f.x,g.y+f.y,g.z+f.z),la.x/=2,la.y/=2,la.z/=2,K=la,Qa=r*(yb=M.x)+n*(zb=M.y)+o*(Ab=M.z)+q*(Bb=M.w),Ra=s*yb+u*zb+t*Ab+v*Bb,Wa=z*yb+D*zb+x*Ab+y*Bb,Xa=w*yb+A*zb+E*Ab+sb*Bb,ba=new L(Qa,Ra,Wa,Xa),Ya=r*(Cb=K.x)+n*(Db=K.y)+o*(Eb=K.z)+q*(Fb=K.w),Za=s*Cb+u*Db+t*Eb+v*Fb,$a=z*Cb+D*Db+x*Eb+y*Fb,ab=w*Cb+A*Db+E*Eb+sb*Fb,ca=new L(Ya,Za,$a,ab),l(a,d,M,K,g,h,ba,ca,k,p+1,B,F,C,H/2),l(a,M,e,f,K,
ba,i,j,ca,p+1,B,F+H/2,C,H/2)):(ga=((Ib=k.x)-(Hb=h.x))/C,ha=((Jb=i.y)-(Gb=h.y))/H,ia=(k.y-Gb)/(Ib-Hb),ja=(i.x-Hb)/(Jb-Gb),c.transform(1,0,0,1,Hb,Gb),c.transform(1,ia,ja,1,0,0),c.transform(ga,0,0,ha,0,0),c.drawImage(a,~~B,~~F,~~C,~~H,0,0,Math.ceil(C),Math.ceil(H)),c.setTransform(1,0,0,1,0,0))};l(vb=this._image,d,e,f,g,h,j,i,k,1,0,0,vb.width,vb.height);return!0};Db.prototype=new vb;nc.prototype=new Db;Db.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,d,e,f,g,h,j;b=this.center;c=a._m11*(f=b.x)+
a._m12*(g=b.y)+a._m13*(h=b.z)+a._m14*(j=b.w);d=a._m21*f+a._m22*g+a._m23*h+a._m24*j;e=a._m31*f+a._m32*g+a._m33*h+a._m34*j;a=a._m41*f+a._m42*g+a._m43*h+a._m44*j;b.x=c/a;b.y=d/a;b.z=e/a;b.w=1};Db.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,d,e,f;b=this.center;b=a._m11*(c=b.x)+a._m12*(d=b.y)+a._m13*(e=b.z)+a._m14*(f=b.w);this.vCenter=new L(b,a._m21*c+a._m22*d+a._m23*e+a._m24*f,a._m31*c+a._m32*d+a._m33*e+a._m34*f,a._m41*c+a._m42*d+a._m43*e+a._m44*f)};Db.prototype.isHidden$LCamera$=function(a){var b;
return a.nearZ<(b=this.vCenter.z)&&b<a.farZ?!1:!0};Db.prototype.draw$LEngine$=function(a){var b,c,d,e,f,g,h,j,i,k,l,m,r,n,o,q,s,u,t,v,z,D,x,y,w,A,E,B,C,G,I,K,F;if(!J.isLoadedImage[this._src])return!1;b=a.context;g=a.screenMatrix;h=a.camera.projectionMatrix;e=(l=g._m11)*(v=h._m11)+(k=g._m12)*(z=h._m21)+(i=g._m13)*(D=h._m31)+(j=g._m14)*(q=h._m41);d=l*(s=h._m12)+k*(x=h._m22)+i*(y=h._m32)+j*(w=h._m42);f=l*(u=h._m13)+k*(A=h._m23)+i*(E=h._m33)+j*(B=h._m43);h=l*(c=h._m14)+k*(t=h._m24)+i*(C=h._m34)+j*(G=
h._m44);j=(l=g._m21)*v+(m=g._m22)*z+(r=g._m23)*D+(n=g._m24)*q;i=l*s+m*x+r*y+n*w;k=l*u+m*A+r*E+n*B;l=l*c+m*t+r*C+n*G;m=(o=g._m31)*v+(I=g._m32)*z+(K=g._m33)*D+(F=g._m34)*q;r=o*s+I*x+K*y+F*w;n=o*u+I*A+K*E+F*B;o=o*c+I*t+K*C+F*G;q=(I=g._m41)*v+(v=g._m42)*z+(z=g._m43)*D+(g=g._m44)*q;s=I*s+v*x+z*y+g*w;u=I*u+v*A+z*E+g*B;A=I*c+v*t+z*C+g*G;c=this.vCenter;E=this._width/2;B=this._height/2;E=c.x-E;B=c.y-B;x=c.z-0;t=this.vCenter;t=e*(c=t.x)+d*(y=t.y)+f*(w=t.z)+h*(C=t.w);c=new L(t,j*c+i*y+k*w+l*C,m*c+r*y+n*w+o*
C,q*c+s*y+u*w+A*C);d=new L(e*E+d*B+f*x+1*h,j*E+i*B+k*x+1*l,m*E+r*B+n*x+1*o,q*E+s*B+u*x+1*A);e=d.x-c.x;d=d.y-c.y;if(qc([c],a))return!1;a=2*(e/(f=this._image).width);f=2*(d/f.height);b.setTransform(a,0,0,f,0,0);b.drawImage(this._image,~~((c.x-e)/a),~~((c.y-d)/f));b.setTransform(1,0,0,1,0,0);return!0};Sa.prototype={};(function(){this.tail=this.head=null;this.length=0}).prototype=new Sa;Lb.prototype=new Sa;Sa.prototype.prepend$LVector$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?
this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};Sa.prototype.append$LVector$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};Sa.prototype.remove$LNode$Vector$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};Sa.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;
null!=b&&(a._next._prev=null);this.length--;return a.value};Sa.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};Sa.prototype.insertAfter$LNode$Vector$E$LVector$=function(a,b){var c,d;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=d=a._next,c._prev=a,d._prev=c,a._next=c);this.length++;return this};Sa.prototype.insertBefore$LNode$Vector$E$LVector$=function(a,b){var c,d;c={value:b,
_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=d=a._prev,d._next=c,a._prev=c);this.length++;return this};Sa.prototype.forEach$F$LVector$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};Sa.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};ac.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new ac;ac.prev$LNode$Vector$E$=function(a){return a._prev};
ac.next$LNode$Vector$E$=function(a){return a._next};Ta.prototype={};kc.prototype=new Ta;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LMatrix$(a.pop())}).prototype=new Ta;Ta.prototype.prepend$LMatrix$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};Ta.prototype.append$LMatrix$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?
this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};Ta.prototype.remove$LNode$Matrix$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};Ta.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=null);this.length--;return a.value};Ta.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};
Ta.prototype.insertAfter$LNode$Matrix$E$LMatrix$=function(a,b){var c,d;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=d=a._next,c._prev=a,d._prev=c,a._next=c);this.length++;return this};Ta.prototype.insertBefore$LNode$Matrix$E$LMatrix$=function(a,b){var c,d;c={value:b,_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=d=a._prev,d._next=c,a._prev=c);this.length++;return this};Ta.prototype.forEach$F$LMatrix$V$=function(a){var b;
for(b=this.head;b;b=b._next)a(b.value)};Ta.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};bc.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new bc;bc.prev$LNode$Matrix$E$=function(a){return a._prev};bc.next$LNode$Matrix$E$=function(a){return a._next};Ua.prototype={};nb.prototype=new Ua;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LRenderable$(a.pop())}).prototype=
new Ua;Ua.prototype.prepend$LRenderable$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};Ua.prototype.append$LRenderable$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};Ua.prototype.remove$LNode$Renderable$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=
a._prev:this.tail=a._prev;return a.value};Ua.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=null);this.length--;return a.value};Ua.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};Ua.prototype.insertAfter$LNode$Renderable$E$LRenderable$=function(a,b){var c,d;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=d=a._next,c._prev=
a,d._prev=c,a._next=c);this.length++;return this};Ua.prototype.insertBefore$LNode$Renderable$E$LRenderable$=function(a,b){var c,d;c={value:b,_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=d=a._prev,d._next=c,a._prev=c);this.length++;return this};Ua.prototype.forEach$F$LRenderable$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};Ua.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";
return a+"]"};cc.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new cc;cc.prev$LNode$Renderable$E$=function(a){return a._prev};cc.next$LNode$Renderable$E$=function(a){return a._next};Va.prototype={};Eb.prototype=new Va;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LPolygon$(a.pop())}).prototype=new Va;Va.prototype.prepend$LPolygon$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=
a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};Va.prototype.append$LPolygon$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};Va.prototype.remove$LNode$Polygon$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};Va.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=
null);this.length--;return a.value};Va.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};Va.prototype.insertAfter$LNode$Polygon$E$LPolygon$=function(a,b){var c,d;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=d=a._next,c._prev=a,d._prev=c,a._next=c);this.length++;return this};Va.prototype.insertBefore$LNode$Polygon$E$LPolygon$=function(a,b){var c,d;c={value:b,_prev:null,_next:null};
null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=d=a._prev,d._next=c,a._prev=c);this.length++;return this};Va.prototype.forEach$F$LPolygon$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};Va.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};dc.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new dc;dc.prev$LNode$Polygon$E$=function(a){return a._prev};dc.next$LNode$Polygon$E$=
function(a){return a._next};S.prototype={};Ec.prototype=new S;S.id$S=function(a){a=S.document.getElementById(a);return a instanceof HTMLElement?a:null};S.getElementById$S=function(a){a=S.document.getElementById(a);return a instanceof HTMLElement?a:null};S.createElement$S=function(a){return S.document.createElement(a)};N.prototype={};Fc.prototype=new N;N.setTimeout$F$V$N=function(a,b){return B.global.setTimeout(a,b)};N.clearTimeout$LTimerHandle$=function(a){B.global.clearTimeout(a)};var Xc=N.clearTimeout$LTimerHandle$;
N.setInterval$F$V$N=function(a,b){return B.global.setInterval(a,b)};N.clearInterval$LTimerHandle$=function(a){B.global.clearInterval(a)};N.requestAnimationFrame$F$NV$=function(a){return N._requestAnimationFrame(a)};N.cancelAnimationFrame$LTimerHandle$=function(a){N._cancelAnimationFrame(a)};N.useNativeRAF$B=function(a){N._requestAnimationFrame=Nc(a);N._cancelAnimationFrame=Oc(a)};N._getRequestAnimationFrameImpl$B=function(a){var b;if(a){if(B.global.requestAnimationFrame)return function(a){return B.global.requestAnimationFrame(a)};
if(B.global.webkitRequestAnimationFrame)return function(a){return B.global.webkitRequestAnimationFrame(a)};if(B.global.mozRequestAnimationFrame)return function(a){return B.global.mozRequestAnimationFrame(a)};if(B.global.oRequestAnimationFrame)return function(a){return B.global.oRequestAnimationFrame(a)};if(B.global.msRequestAnimationFrame)return function(a){return B.global.msRequestAnimationFrame(a)}}b=0;return function(a){var d,e,f;d=Date.now();f=16-(d-b);e=0>=f?0:f;b=d+e;return B.global.setTimeout(function(){a(d+
e)},e)}};var Nc=N._getRequestAnimationFrameImpl$B;N._getCancelAnimationFrameImpl$B=function(a){if(a){if(B.global.cancelAnimationFrame)return function(a){B.global.cancelAnimationFrame(a)};if(B.global.webkitCancelAnimationFrame)return function(a){B.global.webkitCancelAnimationFrame(a)};if(B.global.mozCancelAnimationFrame)return function(a){B.global.mozCancelAnimationFrame(a)};if(B.global.oCancelAnimationFrame)return function(a){B.global.oCancelAnimationFrame(a)};if(B.global.msCancelAnimationFrame)return function(a){B.global.msCancelAnimationFrame(a)}}return Xc};
var Oc=N._getCancelAnimationFrameImpl$B;oc.prototype={};Gc.prototype=new oc;Nb.prototype={};Hc.prototype=new Nb;Nb.cross$NNNN=function(a,b,c,d){return a*d-c*b};var Wc=Nb.cross$NNNN;Ja.prototype={};Ic.prototype=new Ja;Ja._currentMsec$LStopwatch$=function(){return Date.now()};Ja.start$LStopwatch$=function(a){if(null!=a._startedMsec){debugger;throw Error("[jsx/util.jsx:39] assertion failure");}a._startedMsec=a._lastLapMsec=Date.now()};var Mc=Ja.start$LStopwatch$;Ja.stop$LStopwatch$=function(a){if(null==
a._startedMsec){debugger;throw Error("[jsx/util.jsx:45] assertion failure");}a._elapsedMsec+=Date.now()-a._startedMsec;a._startedMsec=null;a._lastLapMsec=null};Ja.isStarted$LStopwatch$=function(a){return null!=a._startedMsec};Ja.isStopped$LStopwatch$=function(a){return null==a._startedMsec};var Yc=Ja.isStopped$LStopwatch$;Ja.lap$LStopwatch$=function(a){var b,c;if(null==a._lastLapMsec){debugger;throw Error("[jsx/util.jsx:65] assertion failure");}b=Date.now();c=b-a._lastLapMsec;a._lastLapMsec=b;return c};
var Zc=Ja.lap$LStopwatch$;Ja.getElapsedMsec$LStopwatch$=function(a){return a._elapsedMsec};yb.prototype={};Jc.prototype=new yb;Kc.prototype=new yb;yb.start$LFpsManager$=function(a){Mc(a._stopwatch)};yb.lastLap$LFpsManager$=function(a){return a._lastMsec};yb.update$LFpsManager$=function(a){var b,c,d;if(Yc(a._stopwatch)){debugger;throw Error("[jsx/util.jsx:126] assertion failure");}b=Zc(a._stopwatch);a._lastMsec=b;1>a._recentlyMsecLog.length?a._recentlyMsecLog.push(b):(a._recentlyMsecLog.push(b),a._recentlyMsecLog.shift());
b=a._recentlyMsecLog.length;for(d=c=0;d<b;d++)c+=a._recentlyMsecLog[d];b/=c/1E3;null!=a._fpsElement&&a._enabledHtmlLog?a._fpsElement.innerHTML=b.toFixed(1)+"fps":a._enabledConsoleLog&&console.log(b.toFixed(1)+"fps")};var Vc=yb.update$LFpsManager$;B.prototype={};Lc.prototype=new B;zb(J,"images",function(){return{}});zb(J,"imageDatas",function(){return{}});zb(J,"isLoadedImage",function(){return{}});zb(S,"window",function(){return B.global.window});zb(S,"document",function(){return B.global.document});
zb(N,"_requestAnimationFrame",function(){return Nc(!0)});zb(N,"_cancelAnimationFrame",function(){return Oc(!0)});B.global=function(){return this}();var Qc={"jsx/ball.jsx":{Util3D:pb,Util3D$:rc,Player:rb,Player$:sc,BlueBall:O,BlueBall$:gc,_Main:Zb,_Main$:xc},"jsx/vector.jsx":{Vector:C,Vector$NNN:m,Vector$NNNN:L,Vector$LVector$:yc},"jsx/matrix.jsx":{Matrix:K,Matrix$:Cb,Matrix$AN:I},"jsx/quaternion.jsx":{Quaternion:ba,Quaternion$NLVector$:zc,Quaternion$LVector$:Ac,Quaternion$NNNN:Ab},"jsx/engine.jsx":{Engine:J,
Engine$S:hc,Context3D:G,Context3D$LCamera$:Bc,Camera:Ib,Camera$LVector$LVector$LVector$NNNN:jc,Color:Hb,Color$III:Aa,Renderable:vb,Renderable$:Cc,Polygon:ob,Polygon$ALVector$LColor$:Mb,PolygonGroup:tb,PolygonGroup$LList$Polygon$E$LVector$:Dc,PolygonGroup$LList$Polygon$E$LVector$B:lc,SmoothTexture:xb,SmoothTexture$ALVector$S:mc,SmoothTexture$ALVector$SIIII:$b,Billboard:Db,Billboard$LVector$NNS:nc},"system:lib/js/js/web.jsx":{dom:S,dom$:Ec},"system:lib/js/timer.jsx":{Timer:N,Timer$:Fc,TimerHandle:oc,
TimerHandle$:Gc},"jsx/util.jsx":{Math2D:Nb,Math2D$:Hc,Stopwatch:Ja,Stopwatch$:Ic,FpsManager:yb,FpsManager$:Jc,FpsManager$S:Kc},"system:lib/js/js.jsx":{js:B,js$:Lc}};JSX.runMain=function(a,b){var c=JSX.require(a);if(!c._Main)throw Error("entry point _Main not found in "+a);if(!c._Main.main$AS)throw Error("entry point _Main.main(:string[]):void not found in "+a);c._Main.main$AS(b)};JSX.runTests=function(a,b){var c=JSX.require(a)._Test$;if(c){if(0===b.length){var d=c.prototype,e;for(e in d)d[e]instanceof
Function&&/^test.*[$]$/.test(e)&&b.push(e)}var f=new c;null!=f.beforeClass$AS&&f.beforeClass$AS(b);for(c=0;c<b.length;++c)(function(a){f.run$SF$V$(a,function(){f[a]()})})(b[c]);null!=f.afterClass$&&f.afterClass$()}};window.addEventListener("load",ec);document.addEventListener("DOMContentLoaded",ec)})();
