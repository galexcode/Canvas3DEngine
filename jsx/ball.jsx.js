var JSX={};
(function(){function lb(a,b,c){Object.defineProperty(a,b,{get:function(){var e=c();delete a[b];return a[b]=e},set:function(c){delete a[b];a[b]=c},enumerable:!0,configurable:!0})}function xb(){}function Ya(){}function mc(){}function ha(){}function nc(){var a,b;this.r=12;this.x=0;this.y=10;this.ax=this.vz=this.vy=this.vx=this.z=0;this.ay=-120;this.az=0;a=Math.cos(0);b=Math.sin(0);this.rot=new tb(a,b,0*b,0*b);this.radius=8;this.isBraking=!1}function I(){}function bc(){var a=this,b,c,e,d,f,h,g,j,i,k,
l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,V,ia,R,ub,M,F,K,mb,oc,A,S,L,N,C,E,O,P,ja,H,pc,Bb,I,Q,Cb,Db,Eb,Fb,nb,cb,db,eb,fb,Za,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,$a,Va,ab,Ia,Ha,Ja,Ka,La,xa,ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,Ma;this.trees=this.player=null;this.treeRadius=0;this.items=null;this.totalElapsedMsec=this.itemRadius=0;Mc(["./image/tree.png","./image/so-nya.png","./image/redbull_free.png","./image/sky1.jpg"]);this.isStarted=!1;Ma=this.engine=new cc("canvas");Ma._skyImageSrc=
"./image/sky1.jpg";Ma._skyImage=J.images["./image/sky1.jpg"];Ma._isMobile&&((N=this.engine.camera).farZ=200,N.fovyX=0.7853981633974483,c=N.view,e=N.target,d=N.upper,f=N.fovyX,h=N.nearZ,g=N.farZ,j=N.aspectRatio,n=new m(e.x-c.x,e.y-c.y,e.z-c.z),p=Math.sqrt((C=n.x)*C+(E=n.y)*E+(O=n.z)*O),l=1E-9>p?new m(0,0,0):n.divSelf$N(p),r=new m((Bb=d.y)*(ja=l.z)-(P=d.z)*(pc=l.y),P*(I=l.x)-(H=d.x)*ja,H*pc-Bb*I),s=Math.sqrt((Q=r.x)*Q+(Cb=r.y)*Cb+(Db=r.z)*Db),o=1E-9>s?new m(0,0,0):r.divSelf$N(s),u=new m((db=l.y)*(Fb=
o.z)-(Eb=l.z)*(cb=o.y),Eb*(eb=o.x)-(nb=l.x)*Fb,nb*cb-db*eb),t=Math.sqrt((fb=u.x)*fb+(Za=u.y)*Za+(Na=u.z)*Na),q=1E-9>t?new m(0,0,0):u.divSelf$N(t),i=new T([Oa=o.x,Pa=o.y,Qa=o.z,-(Oa*(ka=c.x)+Pa*(la=c.y)+Qa*(Ua=c.z)),Ra=q.x,Sa=q.y,Ta=q.z,-(Ra*ka+Sa*la+Ta*Ua),$a=l.x,Va=l.y,ab=l.z,-($a*ka+Va*la+ab*Ua),0,0,0,1]),v=1/Math.tan(f/2),B=v/j,D=g/(g-h),y=-D*h,k=new T([v,0,0,0,0,B,0,0,0,0,D,y,0,0,1,0]),N.viewMatrix=i,N.projectionMatrix=k,x=(Ia=k._m11)*(La=i._m11)+(Ha=k._m12)*(xa=i._m21)+(Ja=k._m13)*(ya=i._m31)+
(Ka=k._m14)*(za=i._m41),w=Ia*(Ba=i._m12)+Ha*(Da=i._m22)+Ja*(Ea=i._m32)+Ka*(Fa=i._m42),z=Ia*(wa=i._m13)+Ha*(fa=i._m23)+Ja*(ga=i._m33)+Ka*(Ga=i._m43),G=Ia*(aa=i._m14)+Ha*(ba=i._m24)+Ja*(ca=i._m34)+Ka*(U=i._m44),V=(Aa=k._m21)*La+(Ca=k._m22)*xa+(ua=k._m23)*ya+(va=k._m24)*za,ia=Aa*Ba+Ca*Da+ua*Ea+va*Fa,R=Aa*wa+Ca*fa+ua*ga+va*Ga,ub=Aa*aa+Ca*ba+ua*ca+va*U,M=(ma=k._m31)*La+(na=k._m32)*xa+(oa=k._m33)*ya+(pa=k._m34)*za,F=ma*Ba+na*Da+oa*Ea+pa*Fa,K=ma*wa+na*fa+oa*ga+pa*Ga,mb=ma*aa+na*ba+oa*ca+pa*U,oc=(qa=k._m41)*
La+(ra=k._m42)*xa+(sa=k._m43)*ya+(ta=k._m44)*za,A=qa*Ba+ra*Da+sa*Ea+ta*Fa,S=qa*wa+ra*fa+sa*ga+ta*Ga,L=qa*aa+ra*ba+sa*ca+ta*U,N.matrix=new T([x,w,z,G,V,ia,R,ub,M,F,K,mb,oc,A,S,L]));this.player={r:12,x:0,y:10,z:0,vx:0,vy:0,vz:0,ax:0,ay:-120,az:0,rot:Nc(0,1,0,0),radius:8,isBraking:!1};this.trees=new Gb([new m(-271,-3,450),new m(-200,-3,720),new m(139,-3,351),new m(171,-3,254),new m(214,-3,192),new m(-253,-3,555),new m(29,-3,385),new m(-72,-3,530),new m(96,-3,678),new m(-49,-3,222)]);this.treeRadius=
24;this.items=new Gb([new m(149,-10,724),new m(107,-10,483),new m(279,-10,551),new m(-295,-10,261),new m(-16,-10,225),new m(95,-10,165),new m(264,-10,161),new m(-50,-10,325),new m(-169,-10,254),new m(271,-10,401)]);this.itemRadius=8;this.engine.onUpdate=function(b){if(a.isStarted){a._checkCollisionWithFloor$N(b);a._checkCollisionWithTrees$();a._checkCollisionWithItems$();a._updateViewpoint$()}};b=new $(90,135,150);this.engine.onRender=function(c,e){var d,f,h,g,i,j,k,l,n,o,p,q,r,s,m,t,u,v,w,x,y,B,
z,D,G,F;a.totalElapsedMsec=a.totalElapsedMsec+e;c.backgroundColor=b;d=(h=a.player).x;f=h.y-12;h=h.z;g=c._worldMatrix;i=g._m11;j=g._m12;k=g._m13;l=g._m14;n=g._m21;o=g._m22;p=g._m23;q=g._m24;r=g._m31;s=g._m32;m=g._m33;t=g._m34;u=g._m41;v=g._m42;w=g._m43;x=g._m44;g._m11=i*1+j*0+k*0+l*0;g._m12=i*0+j*1+k*0+l*0;g._m13=i*0+j*0+k*1+l*0;g._m14=i*d+j*f+k*h+l*1;g._m21=n*1+o*0+p*0+q*0;g._m22=n*0+o*1+p*0+q*0;g._m23=n*0+o*0+p*1+q*0;g._m24=n*d+o*f+p*h+q*1;g._m31=r*1+s*0+m*0+t*0;g._m32=r*0+s*1+m*0+t*0;g._m33=r*0+
s*0+m*1+t*0;g._m34=r*d+s*f+m*h+t*1;g._m41=u*1+v*0+w*0+x*0;g._m42=u*0+v*1+w*0+x*0;g._m43=u*0+v*0+w*1+x*0;g._m44=u*d+v*f+w*h+x*1;g=a.player.rot;d=c._worldMatrix;k=2*(z=g.x)*z;l=2*(D=g.y)*D;h=2*(G=g.z)*G;f=2*z*D;i=2*z*G;j=2*D*G;n=2*z*(z=g.t);o=2*D*z;g=2*G*z;G=1-l-h;D=f+g;z=i-o;f=f-g;h=1-k-h;g=j+n;i=i+o;j=j-n;F=1-k-l;k=d._m11;l=d._m12;n=d._m13;o=d._m14;p=d._m21;q=d._m22;r=d._m23;s=d._m24;m=d._m31;t=d._m32;u=d._m33;v=d._m34;w=d._m41;x=d._m42;y=d._m43;B=d._m44;d._m11=k*G+l*f+n*i+o*0;d._m12=k*D+l*h+n*j+
o*0;d._m13=k*z+l*g+n*F+o*0;d._m14=k*0+l*0+n*0+o*1;d._m21=p*G+q*f+r*i+s*0;d._m22=p*D+q*h+r*j+s*0;d._m23=p*z+q*g+r*F+s*0;d._m24=p*0+q*0+r*0+s*1;d._m31=m*G+t*f+u*i+v*0;d._m32=m*D+t*h+u*j+v*0;d._m33=m*z+t*g+u*F+v*0;d._m34=m*0+t*0+u*0+v*1;d._m41=w*G+x*f+y*i+B*0;d._m42=w*D+x*h+y*j+B*0;d._m43=w*z+x*g+y*F+B*0;d._m44=w*0+x*0+y*0+B*1;sc(c,a.player.radius,6);c._worldMatrix=new ob;a._renderTrees$LContext3D$(c);a._renderItems$LContext3D$(c);a._renderField$LContext3D$(c)};this.engine._isMobile?this._setMobileOperation$():
this._setPCOperation$()}function Ub(){}function tc(){}function C(){}function m(a,b,c){this.x=a;this.y=b;this.z=c;this.w=1}function O(a,b,c,e){a=this.x=a/e;this.y=b/e;this.z=c/e;this.w=1;NaN===a&&console.log(e)}function uc(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=1}function Q(){}function ob(){this._m11=1;this._m21=this._m14=this._m13=this._m12=0;this._m22=1;this._m32=this._m31=this._m24=this._m23=0;this._m33=1;this._m43=this._m42=this._m41=this._m34=0;this._m44=1}function T(a){this._m11=a[0];this._m12=
a[1];this._m13=a[2];this._m14=a[3];this._m21=a[4];this._m22=a[5];this._m23=a[6];this._m24=a[7];this._m31=a[8];this._m32=a[9];this._m33=a[10];this._m34=a[11];this._m41=a[12];this._m42=a[13];this._m43=a[14];this._m44=a[15]}function X(){}function vc(a,b){this.t=a;this.x=b.x;this.y=b.y;this.z=b.z}function wc(a){this.t=0;this.x=a.x;this.y=a.y;this.z=a.z}function tb(a,b,c,e){this.t=a;this.x=b;this.y=c;this.z=e}function J(){}function cc(a){var b,c,e,d,f,h,g,j,i,k,l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,V,ia,R,
ub,M,F,K,mb,A,C,S,L,N,E,J,O,H,ja,I,Q,Bb,X,$,Cb,Db,Eb,Fb,nb,cb,db,eb,fb,Za,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,$a,Va,ab,Ia,Ha,Ja,Ka,La,xa,ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,Ma,gb,hb,ib,jb,W,Y,Z,da,ea,kb,ha,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb;this._skyImage=this._skyImageSrc=this.onRender=this.onUpdate=this.screenMatrix=this.camera=null;this._isMobile=/iPhone/.test(P.window.navigator.userAgent);var dc,qc=P.document.getElementById(a);dc=qc instanceof HTMLElement?qc:null;b=dc instanceof
HTMLCanvasElement?dc:null;var rc=b.getContext("2d");this.context=rc instanceof CanvasRenderingContext2D?rc:null;Za=this._width=b.width;f=this._height=b.height;h=new T([1,0,0,Za/2,0,1,0,f/2,0,0,1,0,0,0,0,1]);y=Za/2;x=-f/2;g=h._m11;j=h._m12;i=h._m13;k=h._m14;l=h._m21;o=h._m22;q=h._m23;n=h._m24;p=h._m31;r=h._m32;s=h._m33;u=h._m34;t=h._m41;v=h._m42;B=h._m43;D=h._m44;h._m11=g*y+0*j+0*i+0*k;h._m12=0*g+j*x+0*i+0*k;h._m13=0*g+0*j+1*i+0*k;h._m14=0*g+0*j+0*i+1*k;h._m21=l*y+0*o+0*q+0*n;h._m22=0*l+o*x+0*q+0*
n;h._m23=0*l+0*o+1*q+0*n;h._m24=0*l+0*o+0*q+1*n;h._m31=p*y+0*r+0*s+0*u;h._m32=0*p+r*x+0*s+0*u;h._m33=0*p+0*r+1*s+0*u;h._m34=0*p+0*r+0*s+1*u;h._m41=t*y+0*v+0*B+0*D;h._m42=0*t+v*x+0*B+0*D;h._m43=0*t+0*v+1*B+0*D;h._m44=0*t+0*v+0*B+1*D;this.screenMatrix=h;this._skyImage=this._skyImageSrc=null;c=new m(0,0,-90);e=new m(0,0,0);d=new m(0,1,0);w=this.camera=new ec(c,e,d,1.0471975511965976,0,500,this._height/this._width);z=w.view;G=w.target;V=w.upper;ia=w.fovyX;R=w.nearZ;ub=w.farZ;M=w.aspectRatio;S=new m(G.x-
z.x,G.y-z.y,G.z-z.z);L=Math.sqrt((Na=S.x)*Na+(Oa=S.y)*Oa+(Pa=S.z)*Pa);mb=1E-9>L?new m(0,0,0):S.divSelf$N(L);N=new m((la=V.y)*(Ra=mb.z)-(Qa=V.z)*(Sa=mb.y),Qa*(Ta=mb.x)-(ka=V.x)*Ra,ka*Sa-la*Ta);E=Math.sqrt((Ua=N.x)*Ua+($a=N.y)*$a+(Va=N.z)*Va);A=1E-9>E?new m(0,0,0):N.divSelf$N(E);J=new m((Ka=mb.y)*(Ia=A.z)-(ab=mb.z)*(Ja=A.y),ab*(La=A.x)-(Ha=mb.x)*Ia,Ha*Ja-Ka*La);O=Math.sqrt((xa=J.x)*xa+(ya=J.y)*ya+(za=J.z)*za);C=1E-9>O?new m(0,0,0):J.divSelf$N(O);F=new T([Aa=A.x,Ba=A.y,Ca=A.z,-(Aa*(ua=z.x)+Ba*(va=z.y)+
Ca*(wa=z.z)),Da=C.x,Ea=C.y,Fa=C.z,-(Da*ua+Ea*va+Fa*wa),fa=mb.x,ga=mb.y,Ga=mb.z,-(fa*ua+ga*va+Ga*wa),0,0,0,1]);H=1/Math.tan(ia/2);ja=H/M;I=ub/(ub-R);K=new T([H,0,0,0,0,ja,0,0,0,0,I,-I*R,0,0,1,0]);w.viewMatrix=F;w.projectionMatrix=K;Q=(aa=K._m11)*(ma=F._m11)+(ba=K._m12)*(na=F._m21)+(ca=K._m13)*(oa=F._m31)+(U=K._m14)*(pa=F._m41);Bb=aa*(ra=F._m12)+ba*(ta=F._m22)+ca*(gb=F._m32)+U*(ib=F._m42);X=aa*(jb=F._m13)+ba*(W=F._m23)+ca*(Y=F._m33)+U*(Z=F._m43);$=aa*(da=F._m14)+ba*(ea=F._m24)+ca*(kb=F._m34)+U*(ha=
F._m44);Cb=(qa=K._m21)*ma+(sa=K._m22)*na+(Ma=K._m23)*oa+(hb=K._m24)*pa;Db=qa*ra+sa*ta+Ma*gb+hb*ib;Eb=qa*jb+sa*W+Ma*Y+hb*Z;Fb=qa*da+sa*ea+Ma*kb+hb*ha;nb=(Mb=K._m31)*ma+(Nb=K._m32)*na+(Ob=K._m33)*oa+(Pb=K._m34)*pa;cb=Mb*ra+Nb*ta+Ob*gb+Pb*ib;db=Mb*jb+Nb*W+Ob*Y+Pb*Z;eb=Mb*da+Nb*ea+Ob*kb+Pb*ha;fb=(Qb=K._m41)*ma+(Rb=K._m42)*na+(Sb=K._m43)*oa+(Tb=K._m44)*pa;w.matrix=new T([Q,Bb,X,$,Cb,Db,Eb,Fb,nb,cb,db,eb,fb,Qb*ra+Rb*ta+Sb*gb+Tb*ib,Qb*jb+Rb*W+Sb*Y+Tb*Z,Qb*da+Rb*ea+Sb*kb+Tb*ha])}function E(){}function xc(a){this._groupCenter=
this._polygonList=null;this._ignoringZHidden=!1;this._worldMatrix=new ob;this._matrixStack=new fc;this.camera=a;this._depth=3;this.modelList1=new Wa;this.modelList2=new Wa;this.modelList3=new Wa;this.modelList4=new Wa;this.modelList5=new Wa;this.backgroundColor=new $(90,135,158)}function yb(){}function ec(a,b,c,e,d,f,h){var g,j,i,k,l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,V,ia,R,ub,M,F,K,A,C,E,S,L,N,J,O,H,P,ja,I,Q,W,X,Y,Z,da,ea,ha,$,cb,db,eb,fb,Za,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,$a,Va,ab,Ia,Ha,Ja,Ka,La,xa,
ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta;this.matrix=this.projectionMatrix=this.viewMatrix=null;this.view=a;this.target=b;this.upper=c;this.fovyX=e;this.nearZ=d;this.farZ=f;this.aspectRatio=h;this.rotatingMatrix=new ob;g=this.view;j=this.target;i=this.upper;k=this.fovyX;l=this.nearZ;o=this.farZ;q=this.aspectRatio;t=new m(j.x-g.x,j.y-g.y,j.z-g.z);v=Math.sqrt((J=t.x)*J+(O=t.y)*O+(H=t.z)*H);r=1E-9>v?new m(0,0,0):t.divSelf$N(v);B=new m((W=i.y)*(ja=r.z)-(P=i.z)*(Q=r.y),
P*(X=r.x)-(I=i.x)*ja,I*Q-W*X);D=Math.sqrt((Y=B.x)*Y+(Z=B.y)*Z+(da=B.z)*da);s=1E-9>D?new m(0,0,0):B.divSelf$N(D);y=new m((db=r.y)*(ha=s.z)-(ea=r.z)*(cb=s.y),ea*(eb=s.x)-($=r.x)*ha,$*cb-db*eb);x=Math.sqrt((fb=y.x)*fb+(Za=y.y)*Za+(Na=y.z)*Na);u=1E-9>x?new m(0,0,0):y.divSelf$N(x);n=new T([Oa=s.x,Pa=s.y,Qa=s.z,-(Oa*(ka=g.x)+Pa*(la=g.y)+Qa*(Ua=g.z)),Ra=u.x,Sa=u.y,Ta=u.z,-(Ra*ka+Sa*la+Ta*Ua),$a=r.x,Va=r.y,ab=r.z,-($a*ka+Va*la+ab*Ua),0,0,0,1]);w=1/Math.tan(k/2);z=w/q;G=o/(o-l);p=new T([w,0,0,0,0,z,0,0,0,
0,G,-G*l,0,0,1,0]);this.viewMatrix=n;this.projectionMatrix=p;V=(Ia=p._m11)*(La=n._m11)+(Ha=p._m12)*(xa=n._m21)+(Ja=p._m13)*(ya=n._m31)+(Ka=p._m14)*(za=n._m41);ia=Ia*(Ba=n._m12)+Ha*(Da=n._m22)+Ja*(Ea=n._m32)+Ka*(Fa=n._m42);R=Ia*(wa=n._m13)+Ha*(fa=n._m23)+Ja*(ga=n._m33)+Ka*(Ga=n._m43);ub=Ia*(aa=n._m14)+Ha*(ba=n._m24)+Ja*(ca=n._m34)+Ka*(U=n._m44);M=(Aa=p._m21)*La+(Ca=p._m22)*xa+(ua=p._m23)*ya+(va=p._m24)*za;F=Aa*Ba+Ca*Da+ua*Ea+va*Fa;K=Aa*wa+Ca*fa+ua*ga+va*Ga;A=Aa*aa+Ca*ba+ua*ca+va*U;C=(ma=p._m31)*La+
(na=p._m32)*xa+(oa=p._m33)*ya+(pa=p._m34)*za;E=ma*Ba+na*Da+oa*Ea+pa*Fa;S=ma*wa+na*fa+oa*ga+pa*Ga;L=ma*aa+na*ba+oa*ca+pa*U;N=(qa=p._m41)*La+(ra=p._m42)*xa+(sa=p._m43)*ya+(ta=p._m44)*za;this.matrix=new T([V,ia,R,ub,M,F,K,A,C,E,S,L,N,qa*Ba+ra*Da+sa*Ea+ta*Fa,qa*wa+ra*fa+sa*ga+ta*Ga,qa*aa+ra*ba+sa*ca+ta*U])}function zb(){}function $(a,b,c){this.r=a;this.g=b;this.b=c}function pb(){}function yc(){this.vCenter=this.center=null}function Xa(){}function Ib(a,b){this.vVertices=this.vCenter=this.center=null;this.vertices=
a;this._color=b;this._enabledLighting=!0;this.updateCenter$()}function qb(){}function zc(a,b){this.vCenter=null;this.polygons=a;this.center=b;this._ignoringZHidden=!1}function gc(a,b,c){this.vCenter=null;this.polygons=a;this.center=b;this._ignoringZHidden=c}function rb(){}function hc(a,b){Vb.call(this,a,b,6,6,4,2)}function Vb(a,b,c,e,d,f){var h,g,j,i,k;h=new $(0,0,0);this.vVertices=this.vCenter=this.center=null;this.vertices=a;this._color=h;this._enabledLighting=!0;this.updateCenter$();this._src=
b;this._image=J.images[b];this.vertices=a;b=a[1];h=a[0];i=b.x-h.x;k=b.y-h.y;b=Math.sqrt(i*i+k*k+(g=b.z-h.z)*g);this._width=0<=b?b:-b;g=a[2];a=a[1];b=g.x-a.x;h=g.y-a.y;a=Math.sqrt(b*b+h*h+(j=g.z-a.z)*j);this._height=0<=a?a:-a;this._maxHorizontalDiv=c;this._maxVerticalDiv=e;this._maxDiv=d;this._minDiv=f;this.updateCenter$()}function vb(){}function ic(a,b,c,e){this.vCenter=null;this._width=b;this._height=c;this._src=e;this._image=J.images[e];this.center=a}function Y(){}function Gb(a){var b,c;this.tail=
this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LVector$(a.pop())}function Wb(){}function Z(){}function fc(){this.tail=this.head=null;this.length=0}function Xb(){}function da(){}function Wa(){this.tail=this.head=null;this.length=0}function Yb(){}function ea(){}function wb(){this.tail=this.head=null;this.length=0}function Zb(){}function P(){}function Ac(){}function H(){}function Bc(){}function jc(){}function Cc(){}function Hb(){}function Dc(){}function W(){}function Ec(){this._lastLapMsec=
null;this._elapsedMsec=0;this._startedMsec=null}function sb(){}function Fc(){this._fpsElement=null;this._stopwatch={_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null};this._recentlyMsecLog=[];this._lastMsec=0;this._enabledHtmlLog=!1;this._enabledConsoleLog=!0}function Gc(a){a=P.document.getElementById(a);this._fpsElement=a instanceof HTMLElement?a:null;this._stopwatch={_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null};this._recentlyMsecLog=[];this._lastMsec=0;this._enabledHtmlLog=!0;this._enabledConsoleLog=
!1}function A(){}function Hc(){}function $b(){window.removeEventListener("load",$b);document.removeEventListener("DOMContentLoaded",$b);JSX.runMain("jsx/ball.jsx",[])}JSX.require=function(a){a=Oc[a];return void 0!==a?a:null};JSX.profilerIsRunning=function(){return null!=xb.getResults};JSX.getProfileResults=function(){return(xb.getResults||function(){return{}})()};JSX.postProfileResults=function(a){if(null==xb.postResults)throw Error("profiler has not been turned on");return xb.postResults(a)};JSX.resetProfileResults=
function(){if(null==xb.resetResults)throw Error("profiler has not been turned on");return xb.resetResults()};Ya.prototype={};mc.prototype=new Ya;Ya.sphere$LContext3D$NI=function(a,b,c){var e,d,f,h,g,j,i,k,l;e=2*c;d=Math.sin;f=Math.cos;h=new m(0,0,0);a._polygonList=new wb;a._groupCenter=h;a._ignoringZHidden=!1;for(h=0;h<e;h++)j=1,i=h+1,k=h,Jb(a,[new m(f(6.283185307179586*i/e)*d(0/c)*b,f(0/c)*b,d(6.283185307179586*i/e)*d(0/c)*b),new m(f(6.283185307179586*i/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*
j/c)*b,d(6.283185307179586*i/e)*d(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,d(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b)],new $(128,128,255));for(h=1;h<c-1;h++)for(l=0;l<e;l++)g=h,j=h+1,i=l+1,k=l,Jb(a,[new m(f(6.283185307179586*i/e)*d(3.141592653589793*h/c)*b,f(3.141592653589793*h/c)*b,d(6.283185307179586*i/e)*d(3.141592653589793*h/c)*b),new m(f(6.283185307179586*i/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,
d(6.283185307179586*i/e)*d(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,d(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b),new m(f(6.283185307179586*k/e)*d(3.141592653589793*g/c)*b,f(3.141592653589793*g/c)*b,d(6.283185307179586*k/e)*d(3.141592653589793*g/c)*b)],new $(128,128,255));for(h=0;h<e;h++)g=c-1,j=c,i=h+1,k=h,Jb(a,[new m(f(6.283185307179586*h/e)*d(3.141592653589793*g/c)*b,f(3.141592653589793*g/c)*b,d(6.283185307179586*h/e)*
d(3.141592653589793*g/c)*b),new m(f(6.283185307179586*i/e)*d(3.141592653589793*g/c)*b,f(3.141592653589793*g/c)*b,d(6.283185307179586*i/e)*d(3.141592653589793*g/c)*b),new m(f(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b,f(3.141592653589793*j/c)*b,d(6.283185307179586*k/e)*d(3.141592653589793*j/c)*b)],new $(128,128,255));ac(a)};var sc=Ya.sphere$LContext3D$NI;Ya.tile$LContext3D$IIIILColor$=function(a,b,c,e,d,f){b=[new m(b-d/2,c,e-d/2),new m(b-d/2,c,e+d/2),new m(b+d/2,c,e+d/2),new m(b+d/2,c,e-d/2)];
Ab(a,new Ib(b,f))};Ya.tileOnGroup$LContext3D$IIIILColor$=function(a,b,c,e,d,f){Jb(a,[new m(b-d/2,c,e-d/2),new m(b-d/2,c,e+d/2),new m(b+d/2,c,e+d/2),new m(b+d/2,c,e-d/2)],f)};var kc=Ya.tileOnGroup$LContext3D$IIIILColor$;Ya.tileRectXZ$LContext3D$IIIIIILColor$LColor$=function(a,b,c,e,d,f,h,g,j){var i,k,l,o,q;i=d/h;k=e/h;l=new m(0,0,0);a._polygonList=new wb;a._groupCenter=l;a._ignoringZHidden=!0;for(l=0;l<i;l++)for(o=0;o<k;o++)q=0===(l+o)%2?g:j,kc(a,b-e/2+(o+0.5)*h,f,c-d/2+(l+0.5)*h,h,q);ac(a)};var Kb=
Ya.tileRectXZ$LContext3D$IIIIIILColor$LColor$;ha.prototype={};nc.prototype=new ha;ha.moveForward$LPlayer$=function(a){bb(a,50,0)};ha.move$LPlayer$NN=function(a,b,c){var e,d,f;e=a.vx;d=a.vz;f=Math.sqrt(e*e+d*d);if(1E-9<(0<=d?d:-d))d/=f;if(1E-9<(0<=e?e:-e))e/=f;d=Math.atan2(e,d);e=Math.sin(d);d=Math.cos(d);a.az=d*b-e*c;a.ax=e*b+d*c};var bb=ha.move$LPlayer$NN;ha.brake$LPlayer$=function(a){a.isBraking=!0};ha.unbrake$LPlayer$=function(a){a.isBraking=!1};ha.update$LPlayer$N=function(a,b){var c,e,d,f,h,
g,j,i,k,l;c=b/1E3;0.1<c&&(c=0.1);e=a.vx+=a.ax*c;a.vy+=a.ay*c;a.vz+=a.az*c;e=-100>=e?-100:e;a.vx=100<=e?100:e;e=a.vy;e=-3E3>=e?-3E3:e;a.vy=3E3<=e?3E3:e;e=a.vz;e=-100>=e?-100:e;f=a.vz=100<=e?100:e;e=a.vx*c;d=a.vy*c;f*=c;a.x+=e;a.y+=d;a.z+=f;d=a.isBraking?0.05:0.0010;a.vx-=(0<=e?e:-e)*a.vx*d;a.vz-=(0<=f?f:-f)*a.vz*d;a.isBraking&&(c=Math.pow(2.718281828459045,-c),a.az*=c,a.ax*=c);c=new m(0-1*f,0*f-0*e,1*e-0);d=Math.sqrt((h=c.x)*h+(g=c.y)*g+(j=c.z)*j);h=1E-9>d?new m(0,0,0):c.divSelf$N(d);e=Math.sqrt(e*
e+0+f*f)/a.r;g=h.x;j=h.y;c=h.z;h=Math.cos(e/2);e=Math.sin(e/2);g*=e;j*=e;l=c*e;c=a.rot;e=(f=c.t)*h-((d=c.x)*g+(i=c.y)*j+(k=c.z)*l);c.t=e;c.x=f*g+h*d+(i*l-k*j);c.y=f*j+h*i+(k*g-d*l);c.z=f*l+h*k+(d*j-i*g)};var Pc=ha.update$LPlayer$N;ha.bounce$LPlayer$LVector$=function(a,b){var c,e,d,f;c=a.vx*(e=b.x)+a.vy*(d=b.y)+a.vz*(f=b.z);a.vx-=1.5*c*e;a.vy-=1.5*c*d;a.vz-=1.5*c*f};I.prototype={};bc.prototype=new I;I.prototype._initTrees$=function(){this.trees=new Gb([new m(-271,-3,450),new m(-200,-3,720),new m(139,
-3,351),new m(171,-3,254),new m(214,-3,192),new m(-253,-3,555),new m(29,-3,385),new m(-72,-3,530),new m(96,-3,678),new m(-49,-3,222)]);this.treeRadius=24};I.prototype._initItems$=function(){this.items=new Gb([new m(149,-10,724),new m(107,-10,483),new m(279,-10,551),new m(-295,-10,261),new m(-16,-10,225),new m(95,-10,165),new m(264,-10,161),new m(-50,-10,325),new m(-169,-10,254),new m(271,-10,401)]);this.itemRadius=8};I.prototype._checkCollisionWithFloor$N=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,q,
n,p;b=this.player;Pc(b,a);c=b.x;e=b.y;d=b.z;if((-30<=c&&30>=c&&-30<=d&&150>=d||-300<=c&&300>=c&&150<=d&&750>=d||-30<=c&&30>=c&&750<=d&&810>=d||-30<=c&&570>=c&&810<=d&&870>=d||510<=c&&1110>=c&&150<=d&&210>=d)&&2*-b.radius<e&&0>e)a=0*b.vx+1*b.vy+0*b.vz,b.vx-=0*a,b.vy-=1.5*a,b.vz-=0*a,b.y=0;510<=c&&(570>=c&&510<=d&&810>=d)&&(a=Math.floor((810-d)/30),a*=5,a-2*b.radius<e&&e<a&&(j=new m(0,30,5),i=Math.sqrt((k=j.x)*k+(l=j.y)*l+(f=j.z)*f),f=1E-9>i?new m(0,0,0):j.divSelf$N(i),f=b.vx*(k=f.x)+b.vy*(l=f.y)+b.vz*
(j=f.z),b.vx-=1.5*f*k,b.vy-=1.5*f*l,b.vz-=1.5*f*j,b.y=a));510<=c&&(570>=c&&210<=d&&510>d)&&(a=Math.floor((d-210)/30),a*=5,a-2*b.radius<e&&e<a&&(k=new m(0,30,-5),l=Math.sqrt((o=k.x)*o+(q=k.y)*q+(h=k.z)*h),h=1E-9>l?new m(0,0,0):k.divSelf$N(l),h=b.vx*(o=h.x)+b.vy*(q=h.y)+b.vz*(k=h.z),b.vx-=1.5*h*o,b.vy-=1.5*h*q,b.vz-=1.5*h*k,b.y=a));1110<=c&&(1270>=c&&150<=d&&750>=d)&&(a=80*((c-1110)/160),a-2*b.radius<e&&e<a&&(c=new m(-1,2,0),e=Math.sqrt((n=c.x)*n+(p=c.y)*p+(g=c.z)*g),g=1E-9>e?new m(0,0,0):c.divSelf$N(e),
g=b.vx*(n=g.x)+b.vy*(p=g.y)+b.vz*(c=g.z),b.vx-=1.5*g*n,b.vy-=1.5*g*p,b.vz-=1.5*g*c,b.y=a))};I.prototype._checkCollisionWithTrees$=function(){var a=this,b;b=this.player;this.trees.forEach$F$LVector$V$(function(c){var e,d,f,h,g,j,i,k,l;e=b.x-c.x;d=b.y-c.y;c=b.z-c.z;f=a.treeRadius+b.radius;e*e+d*d+c*c<f*f&&(e=new m(e,d,c),d=Math.sqrt((h=e.x)*h+(g=e.y)*g+(j=e.z)*j),h=1E-9>d?new m(0,0,0):e.divSelf$N(d),g=Math.sqrt((i=b.vx)*i+(k=b.vy)*k+(l=b.vz)*l),b.ax+=2*g*(i=h.x),b.vy+=2*g*h.y,b.az+=2*g*(k=h.z),b.x+=
i*(i=a.treeRadius)/4,b.z+=k*i/4)})};I.prototype._checkCollisionWithItems$=function(){var a,b,c,e,d,f,h,g;a=this.player;b=this.items;c=this.itemRadius;for(e=b.head;e;e=e._next)d=e.value,f=d.x-a.x,h=d.y-a.y,d=d.z-a.z,g=c+a.radius,f*f+h*h+d*d<g*g&&b.remove$LNode$Vector$E$(e)};I.prototype._updateViewpoint$=function(){var a,b,c,e,d,f,h,g,j,i,k,l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,V,ia,R,A,M,F,K,C,E,J,S,L,N,O,H,P,I,ja,Q,W,X,Y,Z,da,ea,ha,$,nb,cb,db,eb,fb,Za,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,$a,Va,ab,Ia,Ha,Ja,Ka,
La,xa,ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,Ma,gb,hb,ib,jb;a=this.player;b=-a.vz;c=-a.vx;e=Math.sqrt(b*b+c*c);1E-9>e?(b=-1,c=0):(b/=e,c/=e);d=a.y;0>d&&(d=-d/2);f=10;h=Math.sqrt((P=a.vx)*P+(I=a.vz)*I);50>h&&(f-=0.6*(50-h));g=new m(a.x+50*c,1.2*d+f,a.z+50*b);j=new m(a.x,a.y,a.z);(ja=this.engine.camera).target=j;ja.view=g;i=ja.view;k=ja.target;l=ja.upper;o=ja.fovyX;q=ja.nearZ;n=ja.farZ;p=ja.aspectRatio;B=new m(k.x-i.x,k.y-i.y,k.z-i.z);D=Math.sqrt((Q=B.x)*Q+(W=B.y)*
W+(X=B.z)*X);u=1E-9>D?new m(0,0,0):B.divSelf$N(D);y=new m((ha=l.y)*(Z=u.z)-(Y=l.z)*(ea=u.y),Y*($=u.x)-(da=l.x)*Z,da*ea-ha*$);x=Math.sqrt((nb=y.x)*nb+(cb=y.y)*cb+(db=y.z)*db);t=1E-9>x?new m(0,0,0):y.divSelf$N(x);w=new m((Oa=u.y)*(fb=t.z)-(eb=u.z)*(Na=t.y),eb*(Pa=t.x)-(Za=u.x)*fb,Za*Na-Oa*Pa);z=Math.sqrt((Qa=w.x)*Qa+(Ra=w.y)*Ra+(ka=w.z)*ka);v=1E-9>z?new m(0,0,0):w.divSelf$N(z);r=new T([Sa=t.x,la=t.y,Ta=t.z,-(Sa*($a=i.x)+la*(ab=i.y)+Ta*(Ha=i.z)),Ua=v.x,Va=v.y,Ia=v.z,-(Ua*$a+Va*ab+Ia*Ha),Ja=u.x,Ka=u.y,
La=u.z,-(Ja*$a+Ka*ab+La*Ha),0,0,0,1]);G=1/Math.tan(o/2);V=G/p;ia=n/(n-q);s=new T([G,0,0,0,0,V,0,0,0,0,ia,-ia*q,0,0,1,0]);ja.viewMatrix=r;ja.projectionMatrix=s;R=(xa=s._m11)*(Ba=r._m11)+(ya=s._m12)*(Ca=r._m21)+(za=s._m13)*(Da=r._m31)+(Aa=s._m14)*(ua=r._m41);A=xa*(va=r._m12)+ya*(wa=r._m22)+za*(ga=r._m32)+Aa*(aa=r._m42);M=xa*(ba=r._m13)+ya*(ca=r._m23)+za*(U=r._m33)+Aa*(ma=r._m43);F=xa*(na=r._m14)+ya*(oa=r._m24)+za*(pa=r._m34)+Aa*(qa=r._m44);K=(Ea=s._m21)*Ba+(Fa=s._m22)*Ca+(fa=s._m23)*Da+(Ga=s._m24)*
ua;C=Ea*va+Fa*wa+fa*ga+Ga*aa;E=Ea*ba+Fa*ca+fa*U+Ga*ma;J=Ea*na+Fa*oa+fa*pa+Ga*qa;S=(ra=s._m31)*Ba+(sa=s._m32)*Ca+(ta=s._m33)*Da+(Ma=s._m34)*ua;L=ra*va+sa*wa+ta*ga+Ma*aa;N=ra*ba+sa*ca+ta*U+Ma*ma;O=ra*na+sa*oa+ta*pa+Ma*qa;H=(gb=s._m41)*Ba+(hb=s._m42)*Ca+(ib=s._m43)*Da+(jb=s._m44)*ua;ja.matrix=new T([R,A,M,F,K,C,E,J,S,L,N,O,H,gb*va+hb*wa+ib*ga+jb*aa,gb*ba+hb*ca+ib*U+jb*ma,gb*na+hb*oa+ib*pa+jb*qa])};I.prototype._renderPlayer$LContext3D$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,q,n,p,r,m,u,t,v,B,D,y,x,w,
z;b=(e=this.player).x;c=e.y-12;e=e.z;d=a._worldMatrix;f=d._m11;h=d._m12;g=d._m13;j=d._m14;i=d._m21;k=d._m22;l=d._m23;o=d._m24;q=d._m31;n=d._m32;p=d._m33;r=d._m34;m=d._m41;u=d._m42;t=d._m43;v=d._m44;d._m11=1*f+0*h+0*g+0*j;d._m12=0*f+1*h+0*g+0*j;d._m13=0*f+0*h+1*g+0*j;d._m14=f*b+h*c+g*e+1*j;d._m21=1*i+0*k+0*l+0*o;d._m22=0*i+1*k+0*l+0*o;d._m23=0*i+0*k+1*l+0*o;d._m24=i*b+k*c+l*e+1*o;d._m31=1*q+0*n+0*p+0*r;d._m32=0*q+1*n+0*p+0*r;d._m33=0*q+0*n+1*p+0*r;d._m34=q*b+n*c+p*e+1*r;d._m41=1*m+0*u+0*t+0*v;d._m42=
0*m+1*u+0*t+0*v;d._m43=0*m+0*u+1*t+0*v;d._m44=m*b+u*c+t*e+1*v;d=this.player.rot;b=a._worldMatrix;g=2*(y=d.x)*y;j=2*(x=d.y)*x;e=2*(w=d.z)*w;c=2*y*x;f=2*y*w;h=2*x*w;i=2*y*(y=d.t);k=2*x*y;d=2*w*y;w=1-j-e;x=c+d;y=f-k;c-=d;e=1-g-e;d=h+i;f+=k;h-=i;z=1-g-j;g=b._m11;j=b._m12;i=b._m13;k=b._m14;l=b._m21;o=b._m22;q=b._m23;n=b._m24;p=b._m31;r=b._m32;m=b._m33;u=b._m34;t=b._m41;v=b._m42;B=b._m43;D=b._m44;b._m11=g*w+j*c+i*f+0*k;b._m12=g*x+j*e+i*h+0*k;b._m13=g*y+j*d+i*z+0*k;b._m14=0*g+0*j+0*i+1*k;b._m21=l*w+o*c+
q*f+0*n;b._m22=l*x+o*e+q*h+0*n;b._m23=l*y+o*d+q*z+0*n;b._m24=0*l+0*o+0*q+1*n;b._m31=p*w+r*c+m*f+0*u;b._m32=p*x+r*e+m*h+0*u;b._m33=p*y+r*d+m*z+0*u;b._m34=0*p+0*r+0*m+1*u;b._m41=t*w+v*c+B*f+0*D;b._m42=t*x+v*e+B*h+0*D;b._m43=t*y+v*d+B*z+0*D;b._m44=0*t+0*v+0*B+1*D;sc(a,this.player.radius,6);a._worldMatrix=new ob};I.prototype._renderTrees$LContext3D$=function(a){this.trees.forEach$F$LVector$V$(function(b){var c,e,d,f,h,g,j,i,k,l,o,q,n,p,r,s,u,t,v;c=b.x;e=b.y;b=b.z;a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());
d=a._worldMatrix;f=d._m11;h=d._m12;g=d._m13;j=d._m14;i=d._m21;k=d._m22;l=d._m23;o=d._m24;q=d._m31;n=d._m32;p=d._m33;r=d._m34;s=d._m41;u=d._m42;t=d._m43;v=d._m44;d._m11=1*f+0*h+0*g+0*j;d._m12=0*f+1*h+0*g+0*j;d._m13=0*f+0*h+1*g+0*j;d._m14=f*c+h*e+g*b+1*j;d._m21=1*i+0*k+0*l+0*o;d._m22=0*i+1*k+0*l+0*o;d._m23=0*i+0*k+1*l+0*o;d._m24=i*c+k*e+l*b+1*o;d._m31=1*q+0*n+0*p+0*r;d._m32=0*q+1*n+0*p+0*r;d._m33=0*q+0*n+1*p+0*r;d._m34=q*c+n*e+p*b+1*r;d._m41=1*s+0*u+0*t+0*v;d._m42=0*s+1*u+0*t+0*v;d._m43=0*s+0*u+1*t+
0*v;d._m44=s*c+u*e+t*b+1*v;Qc(a,new m(0,0,0),50,34,"./image/tree.png");a._worldMatrix=a._matrixStack.removeFirst$()})};I.prototype._renderItems$LContext3D$=function(a){var b,c,e,d,f;b=3.141592653589793*this.totalElapsedMsec/1E3;c=Math.cos(b/2);e=Math.sin(b/2);d=0*e;f=0*e;this.items.forEach$F$LVector$V$(function(b){var g,j,i,k,l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,V,ia,R,A;g=b.x;j=b.y;b=b.z;a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());i=a._worldMatrix;k=i._m11;l=i._m12;o=i._m13;q=i._m14;n=i._m21;
p=i._m22;r=i._m23;s=i._m24;u=i._m31;t=i._m32;v=i._m33;B=i._m34;D=i._m41;y=i._m42;x=i._m43;w=i._m44;i._m11=1*k+0*l+0*o+0*q;i._m12=0*k+1*l+0*o+0*q;i._m13=0*k+0*l+1*o+0*q;i._m14=k*g+l*j+o*b+1*q;i._m21=1*n+0*p+0*r+0*s;i._m22=0*n+1*p+0*r+0*s;i._m23=0*n+0*p+1*r+0*s;i._m24=n*g+p*j+r*b+1*s;i._m31=1*u+0*t+0*v+0*B;i._m32=0*u+1*t+0*v+0*B;i._m33=0*u+0*t+1*v+0*B;i._m34=u*g+t*j+v*b+1*B;i._m41=1*D+0*y+0*x+0*w;i._m42=0*D+1*y+0*x+0*w;i._m43=0*D+0*y+1*x+0*w;i._m44=D*g+y*j+x*b+1*w;g=a._worldMatrix;p=2*d*d;r=2*e*e;l=
2*f*f;k=2*d*e;q=2*d*f;n=2*e*f;s=2*d*c;u=2*e*c;o=2*f*c;j=1-r-l;b=k+o;i=q-u;k-=o;l=1-p-l;o=n+s;q+=u;n-=s;A=1-p-r;p=g._m11;r=g._m12;s=g._m13;u=g._m14;t=g._m21;v=g._m22;B=g._m23;D=g._m24;y=g._m31;x=g._m32;w=g._m33;z=g._m34;G=g._m41;V=g._m42;ia=g._m43;R=g._m44;g._m11=p*j+r*k+s*q+0*u;g._m12=p*b+r*l+s*n+0*u;g._m13=p*i+r*o+s*A+0*u;g._m14=0*p+0*r+0*s+1*u;g._m21=t*j+v*k+B*q+0*D;g._m22=t*b+v*l+B*n+0*D;g._m23=t*i+v*o+B*A+0*D;g._m24=0*t+0*v+0*B+1*D;g._m31=y*j+x*k+w*q+0*z;g._m32=y*b+x*l+w*n+0*z;g._m33=y*i+x*o+
w*A+0*z;g._m34=0*y+0*x+0*w+1*z;g._m41=G*j+V*k+ia*q+0*R;g._m42=G*b+V*l+ia*n+0*R;g._m43=G*i+V*o+ia*A+0*R;g._m44=0*G+0*V+0*ia+1*R;Rc(a,[new m(-15,-10,0),new m(15,-10,0),new m(15,10,0),new m(-15,10,0)],"./image/redbull_free.png",2,2,1,1);a._worldMatrix=a._matrixStack.removeFirst$()})};I.prototype._renderField$LContext3D$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,q,n,p,r,s,u,t;b=new $(192,192,192);c=new $(160,255,160);e=new $(96,255,96);Ic(a,5);Kb(a,0,60,60,180,-20,30,b,b);Kb(a,0,450,600,600,-20,30,c,e);
Kb(a,0,780,60,60,-20,30,e,c);Kb(a,270,840,600,60,-20,30,e,c);a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());b=new m(0,0,0);a._polygonList=new wb;a._groupCenter=b;a._ignoringZHidden=!0;b=a._worldMatrix;d=b._m11;f=b._m12;h=b._m13;g=b._m14;j=b._m21;i=b._m22;k=b._m23;l=b._m24;o=b._m31;q=b._m32;n=b._m33;p=b._m34;r=b._m41;s=b._m42;u=b._m43;t=b._m44;b._m11=1*d+0*f+0*h+0*g;b._m12=0*d+1*f+0*h+0*g;b._m13=0*d+0*f+1*h+0*g;b._m14=510*d+0*f+510*h+1*g;b._m21=1*j+0*i+0*k+0*l;b._m22=0*j+1*i+0*k+0*l;b._m23=
0*j+0*i+1*k+0*l;b._m24=510*j+0*i+510*k+1*l;b._m31=1*o+0*q+0*n+0*p;b._m32=0*o+1*q+0*n+0*p;b._m33=0*o+0*q+1*n+0*p;b._m34=510*o+0*q+510*n+1*p;b._m41=1*r+0*s+0*u+0*t;b._m42=0*r+1*s+0*u+0*t;b._m43=0*r+0*s+1*u+0*t;b._m44=510*r+0*s+510*u+1*t;for(b=0;10>b;b++)for(d=0;2>d;d++)f=0===(b+d)%2?c:e,kc(a,30*d+15,-20+5*(9-b),30*b+15,30,f);for(b=0;10>b;b++)for(d=0;2>d;d++)f=0===(b+d)%2?c:e,kc(a,30*d+15,-20+5*(9-b),30*-b-15,30,f);ac(a);a._worldMatrix=a._matrixStack.removeFirst$();Kb(a,810,180,600,60,-20,30,e,c);a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$());
b=new m(0,0,0);a._polygonList=new wb;a._groupCenter=b;a._ignoringZHidden=!0;b=a._worldMatrix;d=b._m11;f=b._m12;h=b._m13;g=b._m14;j=b._m21;i=b._m22;k=b._m23;l=b._m24;o=b._m31;q=b._m32;n=b._m33;p=b._m34;r=b._m41;s=b._m42;u=b._m43;t=b._m44;b._m11=1*d+0*f+0*h+0*g;b._m12=0*d+1*f+0*h+0*g;b._m13=0*d+0*f+1*h+0*g;b._m14=1110*d+0*f+150*h+1*g;b._m21=1*j+0*i+0*k+0*l;b._m22=0*j+1*i+0*k+0*l;b._m23=0*j+0*i+1*k+0*l;b._m24=1110*j+0*i+150*k+1*l;b._m31=1*o+0*q+0*n+0*p;b._m32=0*o+1*q+0*n+0*p;b._m33=0*o+0*q+1*n+0*p;b._m34=
1110*o+0*q+150*n+1*p;b._m41=1*r+0*s+0*u+0*t;b._m42=0*r+1*s+0*u+0*t;b._m43=0*r+0*s+1*u+0*t;b._m44=1110*r+0*s+150*u+1*t;for(b=0;4>b;b++)for(d=0;10>d;d++)f=0===(b+d)%2?c:e,Jb(a,[new m(40*b,-20+20*b,30*d),new m(40*b,-20+20*b,30*(d+1)),new m(40*(b+1),-20+20*(b+1),30*(d+1)),new m(40*(b+1),-20+20*(b+1),30*d)],f);ac(a);a._worldMatrix=a._matrixStack.removeFirst$();Ic(a,3)};I.prototype._setMobileOperation$=function(){var a=this;P.window.addEventListener("devicemotion",function(b){var c,e,d,b=b instanceof DeviceMotionEvent?
b:null;c=30*b.accelerationIncludingGravity.y;b=30*b.accelerationIncludingGravity.x/2;-60>c?(c=e=a.player,c.isBraking=!0,bb(e,0,b/4)):0>c?(c=e=a.player,c.isBraking=!1,bb(e,0,b/2)):(e=d=a.player,e.isBraking=!1,bb(d,c,b))});P.window.addEventListener("touchstart",function(){a.isStarted?a.player.vy=80:(a.isStarted=!0,a.player.vz=100)})};I.prototype._setPCOperation$=function(){var a=this;P.window.document.addEventListener("keypress",function(b){var c;if(a.isStarted)switch(b=b instanceof KeyboardEvent?b:
null,b.keyCode){case 119:b=c=a.player;b.isBraking=!1;bb(c,100,0);break;case 115:b=a.player;b.isBraking=!0;break;case 97:b=c=a.player;b.isBraking=!1;bb(c,0,-50);break;case 100:b=c=a.player;b.isBraking=!1;bb(c,0,50);break;case 104:b=c=a.player;b.isBraking=!1;bb(c,0,-50);break;case 106:b=a.player;b.isBraking=!0;break;case 107:b=c=a.player;b.isBraking=!1;bb(c,100,0);break;case 108:b=c=a.player;b.isBraking=!1;bb(c,0,50);break;case 32:a.player.vy=80}else a.isStarted=!0,a.player.vz=100},!1)};I.prototype.run$=
function(){this.engine.start$()};Ub.prototype={};tc.prototype=new Ub;Ub.main$AS=function(){(new bc).engine.start$()};C.prototype={};m.prototype=new C;O.prototype=new C;uc.prototype=new C;C.origin$=function(){return new m(0,0,0)};C.prototype.add$LVector$=function(a){return new m(this.x+a.x,this.y+a.y,this.z+a.z)};C.prototype.addSelf$LVector$=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};C.prototype.sub$LVector$=function(a){return new m(this.x-a.x,this.y-a.y,this.z-a.z)};C.prototype.subSelf$LVector$=
function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};C.prototype.mul$N=function(a){return new m(this.x*a,this.y*a,this.z*a)};C.prototype.mulSelf$N=function(a){this.x*=a;this.y*=a;this.z*=a;return this};C.prototype.div$N=function(a){return new m(this.x/a,this.y/a,this.z/a)};C.prototype.divSelf$N=function(a){this.x/=a;this.y/=a;this.z/=a;return this};C.prototype.dot$LVector$=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};C.prototype.cross$LVector$=function(a){var b,c,e,d,f,h;return new m((f=
this.y)*(c=a.z)-(b=this.z)*(d=a.y),b*(h=a.x)-(e=this.x)*c,e*d-f*h)};C.prototype.crossSelf$LVector$=function(a){var b,c,e,d,f;b=(f=this.y)*(c=a.z)-(e=this.z)*(d=a.y);c=e*(e=a.x)-(a=this.x)*c;this.x=b;this.y=c;this.z=a*d-f*e;return this};C.prototype.unit$=function(){var a,b,c,e;a=Math.sqrt((b=this.x)*b+(c=this.y)*c+(e=this.z)*e);return 1E-9>a?new m(0,0,0):new m(this.x/a,this.y/a,this.z/a)};C.prototype.unitSelf$=function(){var a,b,c,e;a=Math.sqrt((b=this.x)*b+(c=this.y)*c+(e=this.z)*e);return 1E-9>a?
new m(0,0,0):this.divSelf$N(a)};C.prototype.sqabs$=function(){var a,b,c;return(a=this.x)*a+(b=this.y)*b+(c=this.z)*c};C.prototype.abs$=function(){var a,b,c;return Math.sqrt((a=this.x)*a+(b=this.y)*b+(c=this.z)*c)};C.prototype.rotateX$N=function(a){var b,c,e;b=Math.sin(a);a=Math.cos(a);return new m(this.x,(e=this.y)*a-(c=this.z)*b,c*a+e*b)};C.prototype.rotateXSelf$N=function(a){var b,c,e,d;b=Math.sin(a);a=Math.cos(a);this.y=c=(d=this.y)*a-(e=this.z)*b;this.z=e*a+d*b;return this};C.prototype.rotateY$N=
function(a){var b,c,e;b=Math.sin(a);a=Math.cos(a);return new m((e=this.x)*a+(c=this.z)*b,this.y,c*a-e*b)};C.prototype.rotateYSelf$N=function(a){var b,c,e,d;b=Math.sin(a);a=Math.cos(a);this.x=c=(d=this.x)*a+(e=this.z)*b;this.z=e*a-d*b;return this};C.prototype.rotateZ$N=function(a){var b,c,e;b=Math.sin(a);a=Math.cos(a);return new m(this.x*a-(c=this.y)*b,c*a+(e=this.z)*b,e)};C.prototype.rotateZSelf$N=function(a){var b,c,e;b=Math.sin(a);c=Math.cos(a);a=this.x*c-(e=this.y)*b;b=e*c+this.z*b;this.x=a;this.y=
b;return this};C.prototype.transform$LMatrix$=function(a){var b,c,e,d,f;b=a._m11*(c=this.x)+a._m12*(e=this.y)+a._m13*(d=this.z)+a._m14*(f=this.w);return new O(b,a._m21*c+a._m22*e+a._m23*d+a._m24*f,a._m31*c+a._m32*e+a._m33*d+a._m34*f,a._m41*c+a._m42*e+a._m43*d+a._m44*f)};C.prototype.transformSelf$LMatrix$=function(a){var b,c,e,d,f,h,g;b=a._m11*(d=this.x)+a._m12*(f=this.y)+a._m13*(h=this.z)+a._m14*(g=this.w);c=a._m21*d+a._m22*f+a._m23*h+a._m24*g;e=a._m31*d+a._m32*f+a._m33*h+a._m34*g;a=a._m41*d+a._m42*
f+a._m43*h+a._m44*g;this.x=b/a;this.y=c/a;this.z=e/a;this.w=1;return this};C.prototype.toString=function(){var a;a=function(a){var c,e,a=a.toFixed(1);c=a.length;for(e=0;e<8-c;e++)a=" "+a;return a};return"("+a(this.x)+","+a(this.y)+","+a(this.z)+","+a(this.w)+")"};Q.prototype={};ob.prototype=new Q;T.prototype=new Q;Q.prototype.copy$=function(){return new T([this._m11,this._m12,this._m13,this._m14,this._m21,this._m22,this._m23,this._m24,this._m31,this._m32,this._m33,this._m34,this._m41,this._m42,this._m43,
this._m44])};Q.translating$LVector$=function(a){return new T([1,0,0,a.x,0,1,0,a.y,0,0,1,a.z,0,0,0,1])};Q.translating$NNN=function(a,b,c){return new T([1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1])};Q.rotatingX$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new T([1,0,0,0,0,a,-b,0,0,b,a,0,0,0,0,1])};Q.rotatingY$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new T([a,0,b,0,0,1,0,0,-b,0,a,0,0,0,0,1])};Q.rotatingZ$N=function(a){var b;b=Math.sin(a);a=Math.cos(a);return new T([a,-b,0,0,b,a,0,0,0,0,
1,0,0,0,0,1])};Q.scaling$NNN=function(a,b,c){return new T([a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1])};Q.prototype.mul$LVector$=function(a){var b,c,e,d,a=this._m11*(b=a.x)+this._m12*(c=a.y)+this._m13*(e=a.z)+this._m14*(d=a.w);return new O(a,this._m21*b+this._m22*c+this._m23*e+this._m24*d,this._m31*b+this._m32*c+this._m33*e+this._m34*d,this._m41*b+this._m42*c+this._m43*e+this._m44*d)};Q.prototype.compose$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,q,n,p,m,s,u,t,v,B,D,y,x,w,z,G,V,ia,A;b=(g=this._m11)*(k=
a._m11)+(j=this._m12)*(l=a._m21)+(i=this._m13)*(o=a._m31)+(d=this._m14)*(h=a._m41);c=g*(n=a._m12)+j*(m=a._m22)+i*(u=a._m32)+d*(v=a._m42);e=g*(B=a._m13)+j*(D=a._m23)+i*(y=a._m33)+d*(x=a._m43);a=g*(g=a._m14)+j*(j=a._m24)+i*(i=a._m34)+d*(w=a._m44);d=(q=this._m21)*k+(p=this._m22)*l+(s=this._m23)*o+(t=this._m24)*h;f=(z=this._m31)*k+(G=this._m32)*l+(V=this._m33)*o+(ia=this._m34)*h;h=(A=this._m41)*k+(k=this._m42)*l+(l=this._m43)*o+(o=this._m44)*h;return new T([b,c,e,a,d,q*n+p*m+s*u+t*v,q*B+p*D+s*y+t*x,q*
g+p*j+s*i+t*w,f,z*n+G*m+V*u+ia*v,z*B+G*D+V*y+ia*x,z*g+G*j+V*i+ia*w,h,A*n+k*m+l*u+o*v,A*B+k*D+l*y+o*x,A*g+k*j+l*i+o*w])};Q.prototype.composeSelf$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,q,n,p,m,s,u,t,v,B,D,y,x,w,z,G,V;b=this._m11;c=this._m12;e=this._m13;d=this._m14;f=this._m21;h=this._m22;g=this._m23;j=this._m24;i=this._m31;k=this._m32;l=this._m33;o=this._m34;q=this._m41;n=this._m42;p=this._m43;m=this._m44;this._m11=b*(s=a._m11)+c*(u=a._m21)+e*(t=a._m31)+d*(v=a._m41);this._m12=b*(B=a._m12)+
c*(D=a._m22)+e*(y=a._m32)+d*(x=a._m42);this._m13=b*(w=a._m13)+c*(z=a._m23)+e*(G=a._m33)+d*(V=a._m43);this._m14=b*(b=a._m14)+c*(c=a._m24)+e*(e=a._m34)+d*(a=a._m44);this._m21=f*s+h*u+g*t+j*v;this._m22=f*B+h*D+g*y+j*x;this._m23=f*w+h*z+g*G+j*V;this._m24=f*b+h*c+g*e+j*a;this._m31=i*s+k*u+l*t+o*v;this._m32=i*B+k*D+l*y+o*x;this._m33=i*w+k*z+l*G+o*V;this._m34=i*b+k*c+l*e+o*a;this._m41=q*s+n*u+p*t+m*v;this._m42=q*B+n*D+p*y+m*x;this._m43=q*w+n*z+p*G+m*V;this._m44=q*b+n*c+p*e+m*a;return this};Q.prototype.toString=
function(){var a,b;a=function(a){var b,d,a=a.toFixed(1);b=a.length;for(d=0;d<8-b;d++)a=" "+a;return a};b=""+("|"+a(this._m11)+","+a(this._m12)+","+a(this._m13)+","+a(this._m14)+"|\n");b+="|"+a(this._m21)+","+a(this._m22)+","+a(this._m23)+","+a(this._m24)+"|\n";b+="|"+a(this._m31)+","+a(this._m32)+","+a(this._m33)+","+a(this._m34)+"|\n";return b+="|"+a(this._m41)+","+a(this._m42)+","+a(this._m43)+","+a(this._m44)+"|\n"};Q.prototype.invert$=function(){var a,b,c,e,d,f;e=[this._m11,this._m12,this._m13,
this._m14,this._m21,this._m22,this._m23,this._m24,this._m31,this._m32,this._m33,this._m34,this._m41,this._m42,this._m43,this._m44];d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];for(a=0;3>a;a++){c=e[4*a+a];for(b=0;4>b;b++)e[4*a+b]/=c,d[4*a+b]/=c;for(b=a+1;4>b;b++){f=e[4*b+a];for(c=0;4>c;c++)e[4*b+c]-=e[4*a+c]*f,d[4*b+c]-=d[4*a+c]*f}}for(a=3;0<a;a--)for(b=a-1;0<=b;b--){f=e[4*b+a];for(c=0;4>c;c++)e[4*b+c]-=e[4*a+c]*f,d[4*b+c]-=d[4*a+c]*f}return new T(d)};X.prototype={};vc.prototype=new X;wc.prototype=new X;tb.prototype=
new X;X.prototype.copy$=function(){return new tb(this.t,this.x,this.y,this.z)};X.prototype.mul$LQuaternion$=function(a){var b,c,e,d,f,h,g,j,i;b=new tb(this.t,this.x,this.y,this.z);a=(c=b.t)*(d=a.t)-((f=b.x)*(e=a.x)+(h=b.y)*(i=a.y)+(j=b.z)*(g=a.z));b.t=a;b.x=c*e+d*f+(h*g-j*i);b.y=c*i+d*h+(j*e-f*g);b.z=c*g+d*j+(f*i-h*e);return b};X.prototype.mulSelf$LQuaternion$=function(a){var b,c,e,d,f,h,g,j;this.t=a=(b=this.t)*(e=a.t)-((d=this.x)*(c=a.x)+(f=this.y)*(j=a.y)+(g=this.z)*(h=a.z));this.x=b*c+e*d+(f*h-
g*j);this.y=b*j+e*f+(g*c-d*h);this.z=b*h+e*g+(d*j-f*c);return this};X.prototype.toMatrix$=function(){var a,b,c,e,d,f,h,g,j,i;a=2*(h=this.x)*h;b=2*(g=this.y)*g;c=2*(j=this.z)*j;e=2*h*g;d=2*h*j;f=2*g*j;h=2*h*(i=this.t);g=2*g*i;j=2*j*i;return new T([1-b-c,e+j,d-g,0,e-j,1-a-c,f+h,0,d+g,f-h,1-a-b,0,0,0,0,1])};X.prototype.toString=function(){var a,b,c;a=this.x.toFixed(3);b=this.y.toFixed(3);c=this.z.toFixed(3);return this.t.toFixed(3)+" : ("+a+", "+b+", "+c+", )"};X.rotating$NNNN=function(a,b,c,e){var d;
d=Math.cos(a/2);a=Math.sin(a/2);return new tb(d,b*a,c*a,e*a)};var Nc=X.rotating$NNNN;X.rotating$NLVector$=function(a,b){var c,e,d,f,h;c=b.x;e=b.y;d=b.z;f=Math.cos(a/2);h=Math.sin(a/2);return new tb(f,c*h,e*h,d*h)};X.rotate$LVector$LVector$N=function(a,b,c){var e,d,f,h,g,j,i,k,l,o;e=Math.cos(c/2);d=Math.sin(c/2);c=a.x;h=a.y;g=a.z;a=b.x*d;j=b.y*d;i=b.z*d;k=-b.x*d;l=-b.y*d;o=-b.z*d;b=0*e-(k*c+l*h+o*g);d=e*c+0*k+(l*g-o*h);f=e*h+0*l+(o*c-k*g);c=e*g+0*o+(k*h-l*c);return new m(b*a+e*d+(f*i-c*j),b*j+e*f+
(c*a-d*i),b*i+e*c+(d*j-f*a))};J.prototype={};cc.prototype=new J;J.prototype.isMobile$=function(){return this._isMobile};J.loadImages$AS=function(a){var b,c,e,d,f;c=P.document.getElementById("tmp_canvas");c=c instanceof HTMLElement?c:null;c=(c instanceof HTMLCanvasElement?c:null).getContext("2d");b=c instanceof CanvasRenderingContext2D?c:null;c=function(a){J.images[a].onload=function(){var c;c=J.images[a];J.isLoadedImage[a]=!0;b.drawImage(c,0,0);J.imageDatas[a]=b.getImageData(0,0,c.width,c.height)}};
for(e=0;e<a.length;e++)d=a[e],f=P.document.createElement("img"),f=f instanceof HTMLImageElement?f:null,f.src=d,J.isLoadedImage[d]=!1,J.images[d]=f,c(d)};var Mc=J.loadImages$AS;J.prototype.setSkyImage$S=function(a){this._skyImageSrc=a;this._skyImage=J.images[a]};J.prototype.start$=function(){var a=this,b,c,e=P.document.getElementById("fps");b={_stopwatch:{_elapsedMsec:0,_startedMsec:null,_lastLapMsec:null},_recentlyMsecLog:[],_lastMsec:0,_fpsElement:e instanceof HTMLElement?e:null,_enabledHtmlLog:!0,
_enabledConsoleLog:!1};Jc(b._stopwatch);c=function(){var d,e;Sc(b);d=b._lastMsec;a.onUpdate(d);e={_worldMatrix:new ob,_matrixStack:new fc,camera:a.camera,_depth:3,modelList1:new Wa,modelList2:new Wa,modelList3:new Wa,modelList4:new Wa,modelList5:new Wa,_polygonList:null,_groupCenter:null,_ignoringZHidden:!1,backgroundColor:new $(90,135,158)};a._skyImage&&J.isLoadedImage[a._skyImageSrc]?(a.context.fillStyle="#"+e.backgroundColor.toHexString$(),a.context.fillRect(0,0,a._width,a._height),a.renderSkyImage$()):
(a.context.fillStyle="#"+e.backgroundColor.toHexString$(),a.context.fillRect(0,0,a._width,a._height));a.onRender(e,d);e.modelList5.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});e.modelList4.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});e.modelList3.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});e.modelList2.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});e.modelList1.forEach$F$LRenderable$V$(function(b){b.draw$LEngine$(a)});A.global.setTimeout(c,0)};A.global.setTimeout(function(){P.window.scrollTo(0,
1)},500);A.global.setTimeout(c,0)};J.prototype.renderSkyImage$=function(){var a,b,c,e,d,f,h,g,j,i;d=(e=this.camera).target;f=e.view;e=d.x-f.x;a=d.y-f.y;d=d.z-f.z;a=-a;b=Math.atan2(e,d);c=Math.atan2(a,Math.sqrt(e*e+d*d));e=(d=this._skyImage).width;a=d.height;d=(f=this.camera).fovyX/3.141592653589793/2*e;f=d*f.aspectRatio;b=(b/3.141592653589793/2+0.5)*e-d/2;c=(c/3.141592653589793+0.5)*a-f/2;0>b&&(b+=e);0>c&&(c+=a);h=b+d>=e;g=c+f>=a;h&&g?(j=(e-b)/d,f=(a-c)/f,this.context.drawImage(this._skyImage,~~b,
~~c,~~(e-b),~~(a-c),0,0,~~(this._width*j),~~(this._height*f)),0!==~~(b+d-e)&&this.context.drawImage(this._skyImage,0,~~c,~~(b+d-e),~~(a-c),~~((i=this._width)*j),0,~~(i*(1-j)),~~(this._height*f))):h?(i=(e-b)/d,0!==~~(e-b)&&0!==~~(this._width*i)&&this.context.drawImage(this._skyImage,~~b,~~c,~~(e-b),~~f,0,0,~~(this._width*i),this._height),0!==~~(b+d-e)&&0!==~~(this._width*(1-i))&&this.context.drawImage(this._skyImage,0,~~c,~~(b+d-e),~~f,~~((j=this._width)*i),0,~~(j*(1-i)),this._height)):g?this.context.drawImage(this._skyImage,
~~b,~~c,~~d,~~(a-c),0,0,this._width,~~(this._height*((a-c)/f))):this.context.drawImage(this._skyImage,~~b,~~c,~~d,~~f,0,0,this._width,this._height)};J.prototype.setScreenMatrix$NN=function(a,b){var c,e,d,f,h,g,j,i,k,l,o,m,n,p,r,s,u,t,v;c=new T([1,0,0,a/2,0,1,0,b/2,0,0,1,0,0,0,0,1]);t=a/2;v=-b/2;e=c._m11;d=c._m12;f=c._m13;h=c._m14;g=c._m21;j=c._m22;i=c._m23;k=c._m24;l=c._m31;o=c._m32;m=c._m33;n=c._m34;p=c._m41;r=c._m42;s=c._m43;u=c._m44;c._m11=e*t+0*d+0*f+0*h;c._m12=0*e+d*v+0*f+0*h;c._m13=0*e+0*d+
1*f+0*h;c._m14=0*e+0*d+0*f+1*h;c._m21=g*t+0*j+0*i+0*k;c._m22=0*g+j*v+0*i+0*k;c._m23=0*g+0*j+1*i+0*k;c._m24=0*g+0*j+0*i+1*k;c._m31=l*t+0*o+0*m+0*n;c._m32=0*l+o*v+0*m+0*n;c._m33=0*l+0*o+1*m+0*n;c._m34=0*l+0*o+0*m+1*n;c._m41=p*t+0*r+0*s+0*u;c._m42=0*p+r*v+0*s+0*u;c._m43=0*p+0*r+1*s+0*u;c._m44=0*p+0*r+0*s+1*u;this.screenMatrix=c};J.prototype.updateMatrix$=function(){var a,b,c,e,d,f,h,g,j,i,k,l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,V,A,R,C,M,F,K,E,J,O,S,L,N,H;a=this.camera;b=a.view;c=a.target;e=a.upper;d=a.fovyX;
f=a.nearZ;h=a.farZ;g=a.aspectRatio;c=new m(c.x-b.x,c.y-b.y,c.z-b.z);o=Math.sqrt((i=c.x)*i+(u=c.y)*u+(t=c.z)*t);i=1E-9>o?new m(0,0,0):c.divSelf$N(o);e=new m((y=e.y)*(v=i.z)-(q=e.z)*(D=i.y),q*(x=i.x)-(B=e.x)*v,B*D-y*x);q=Math.sqrt((k=e.x)*k+(n=e.y)*n+(w=e.z)*w);k=1E-9>q?new m(0,0,0):e.divSelf$N(q);n=new m((V=i.y)*(r=k.z)-(p=i.z)*(G=k.y),p*(A=k.x)-(z=i.x)*r,z*G-V*A);p=Math.sqrt((l=n.x)*l+(R=n.y)*R+(C=n.z)*C);l=1E-9>p?new m(0,0,0):n.divSelf$N(p);b=new T([M=k.x,F=k.y,K=k.z,-(M*(J=b.x)+F*(S=b.y)+K*(L=b.z)),
E=l.x,O=l.y,s=l.z,-(E*J+O*S+s*L),j=i.x,N=i.y,H=i.z,-(j*J+N*S+H*L),0,0,0,1]);d=1/Math.tan(d/2);h/=h-f;j=new T([d,0,0,0,0,d/g,0,0,0,0,h,-h*f,0,0,1,0]);a.viewMatrix=b;a.projectionMatrix=j;f=(L=j._m11)*(C=b._m11)+(H=j._m12)*(l=b._m21)+(R=j._m13)*(N=b._m31)+(p=j._m14)*(s=b._m41);g=L*(d=b._m12)+H*(M=b._m22)+R*(F=b._m32)+p*(K=b._m42);h=L*(E=b._m13)+H*(J=b._m23)+R*(O=b._m33)+p*(S=b._m43);b=L*(L=b._m14)+H*(H=b._m24)+R*(R=b._m34)+p*(k=b._m44);p=(z=j._m21)*C+(G=j._m22)*l+(V=j._m23)*N+(A=j._m24)*s;r=(n=j._m31)*
C+(w=j._m32)*l+(q=j._m33)*N+(v=j._m34)*s;s=(B=j._m41)*C+(C=j._m42)*l+(l=j._m43)*N+(j=j._m44)*s;a.matrix=new T([f,g,h,b,p,z*d+G*M+V*F+A*K,z*E+G*J+V*O+A*S,z*L+G*H+V*R+A*k,r,n*d+w*M+q*F+v*K,n*E+w*J+q*O+v*S,n*L+w*H+q*R+v*k,s,B*d+C*M+l*F+j*K,B*E+C*J+l*O+j*S,B*L+C*H+l*R+j*k])};E.prototype={};xc.prototype=new E;E.setDepth$LContext3D$I=function(a,b){if(!(1<=b&&5>=b)){debugger;throw Error("[jsx/engine.jsx:263] assertion failure");}a._depth=b};var Ic=E.setDepth$LContext3D$I;E.getDepth$LContext3D$=function(a){return a._depth};
E.setBackgroundColor$LContext3D$LColor$=function(a,b){a.backgroundColor=b};E.pushMatrix$LContext3D$=function(a){a._matrixStack.prepend$LMatrix$(a._worldMatrix.copy$())};E.popMatrix$LContext3D$=function(a){a._worldMatrix=a._matrixStack.removeFirst$()};E.resetMatrix$LContext3D$=function(a){a._worldMatrix=new ob};E.translate$LContext3D$NNN=function(a,b,c,e){var d,f,h,g,j,i,k,l,o,m,n,p,r,s,u,t,a=a._worldMatrix;d=a._m11;f=a._m12;h=a._m13;g=a._m14;j=a._m21;i=a._m22;k=a._m23;l=a._m24;o=a._m31;m=a._m32;n=
a._m33;p=a._m34;r=a._m41;s=a._m42;u=a._m43;t=a._m44;a._m11=1*d+0*f+0*h+0*g;a._m12=0*d+1*f+0*h+0*g;a._m13=0*d+0*f+1*h+0*g;a._m14=d*b+f*c+h*e+1*g;a._m21=1*j+0*i+0*k+0*l;a._m22=0*j+1*i+0*k+0*l;a._m23=0*j+0*i+1*k+0*l;a._m24=j*b+i*c+k*e+1*l;a._m31=1*o+0*m+0*n+0*p;a._m32=0*o+1*m+0*n+0*p;a._m33=0*o+0*m+1*n+0*p;a._m34=o*b+m*c+n*e+1*p;a._m41=1*r+0*s+0*u+0*t;a._m42=0*r+1*s+0*u+0*t;a._m43=0*r+0*s+1*u+0*t;a._m44=r*b+s*c+u*e+1*t};E.scale$LContext3D$NNN=function(a,b,c,e){var d,f,h,g,j,i,k,l,m,q,n,p,r,s,u,t,a=a._worldMatrix;
d=a._m11;f=a._m12;h=a._m13;g=a._m14;j=a._m21;i=a._m22;k=a._m23;l=a._m24;m=a._m31;q=a._m32;n=a._m33;p=a._m34;r=a._m41;s=a._m42;u=a._m43;t=a._m44;a._m11=d*b+0*f+0*h+0*g;a._m12=0*d+f*c+0*h+0*g;a._m13=0*d+0*f+h*e+0*g;a._m14=0*d+0*f+0*h+1*g;a._m21=j*b+0*i+0*k+0*l;a._m22=0*j+i*c+0*k+0*l;a._m23=0*j+0*i+k*e+0*l;a._m24=0*j+0*i+0*k+1*l;a._m31=m*b+0*q+0*n+0*p;a._m32=0*m+q*c+0*n+0*p;a._m33=0*m+0*q+n*e+0*p;a._m34=0*m+0*q+0*n+1*p;a._m41=r*b+0*s+0*u+0*t;a._m42=0*r+s*c+0*u+0*t;a._m43=0*r+0*s+u*e+0*t;a._m44=0*r+0*
s+0*u+1*t};E.rotate$LContext3D$LQuaternion$=function(a,b){var c,e,d,f,h,g,j,i,k,l,m,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G;c=a._worldMatrix;e=2*(x=b.x)*x;d=2*(w=b.y)*w;t=2*(z=b.z)*z;v=2*x*w;B=2*x*z;D=2*w*z;f=2*x*(x=b.t);h=2*w*x;y=2*z*x;z=1-d-t;w=v+y;x=B-h;v-=y;t=1-e-t;y=D+f;B+=h;D-=f;G=1-e-d;e=c._m11;d=c._m12;f=c._m13;h=c._m14;g=c._m21;j=c._m22;i=c._m23;k=c._m24;l=c._m31;m=c._m32;q=c._m33;n=c._m34;p=c._m41;r=c._m42;s=c._m43;u=c._m44;c._m11=e*z+d*v+f*B+0*h;c._m12=e*w+d*t+f*D+0*h;c._m13=e*x+d*y+f*G+0*h;c._m14=
0*e+0*d+0*f+1*h;c._m21=g*z+j*v+i*B+0*k;c._m22=g*w+j*t+i*D+0*k;c._m23=g*x+j*y+i*G+0*k;c._m24=0*g+0*j+0*i+1*k;c._m31=l*z+m*v+q*B+0*n;c._m32=l*w+m*t+q*D+0*n;c._m33=l*x+m*y+q*G+0*n;c._m34=0*l+0*m+0*q+1*n;c._m41=p*z+r*v+s*B+0*u;c._m42=p*w+r*t+s*D+0*u;c._m43=p*x+r*y+s*G+0*u;c._m44=0*p+0*r+0*s+1*u};E.beginGroup$LContext3D$LVector$=function(a,b){a._polygonList=new wb;a._groupCenter=b;a._ignoringZHidden=!1};E.beginGroup$LContext3D$LVector$B=function(a,b,c){a._polygonList=new wb;a._groupCenter=b;a._ignoringZHidden=
c};E.renderPolygonGroup$LContext3D$ALVector$LColor$=function(a,b,c){b=new Ib(b,c);b.applyWorldMatrix$LMatrix$(a._worldMatrix);b.applyViewMatrix$LMatrix$(a.camera.viewMatrix);b.isHidden$LCamera$(a.camera)||a._polygonList.prepend$LPolygon$(b)};var Jb=E.renderPolygonGroup$LContext3D$ALVector$LColor$;E.endGroup$LContext3D$=function(a){0!==a._polygonList.length&&Ab(a,new gc(a._polygonList,a._groupCenter,a._ignoringZHidden))};var ac=E.endGroup$LContext3D$;E.renderPolygon$LContext3D$ALVector$LColor$=function(a,
b,c){Ab(a,new Ib(b,c))};E.renderBillboard$LContext3D$LVector$IIS=function(a,b,c,e,d){Ab(a,new ic(b,c,e,d))};var Qc=E.renderBillboard$LContext3D$LVector$IIS;E.renderTexture$LContext3D$ALVector$SIIII=function(a,b,c,e,d,f,h){Ab(a,new Vb(b,c,e,d,f,h))};var Rc=E.renderTexture$LContext3D$ALVector$SIIII;E.renderTexture$LContext3D$ALVector$S=function(a,b,c){Ab(a,new hc(b,c))};E.renderModel$LContext3D$LRenderable$=function(a,b){b.applyWorldMatrix$LMatrix$(a._worldMatrix);b.applyViewMatrix$LMatrix$(a.camera.viewMatrix);
if(!b.isHidden$LCamera$(a.camera))switch(a._depth){case 1:Lb(a,a.modelList1,b);break;case 2:Lb(a,a.modelList2,b);break;case 3:Lb(a,a.modelList3,b);break;case 4:Lb(a,a.modelList4,b);break;case 5:Lb(a,a.modelList5,b)}};var Ab=E.renderModel$LContext3D$LRenderable$;E.insertModelByZValue$LContext3D$LList$Renderable$E$LRenderable$=function(a,b,c){var e,a=!1;for(e=b.head;null!=e;e=e._next)if(e.value.vCenter.z<c.vCenter.z){b.insertBefore$LNode$Renderable$E$LRenderable$(e,c);a=!0;break}a||b.append$LRenderable$(c)};
var Lb=E.insertModelByZValue$LContext3D$LList$Renderable$E$LRenderable$;yb.prototype={};ec.prototype=new yb;yb.prototype.move$LVector$=function(a){var b,c,e,d,f;c=this.rotatingMatrix;a=c._m11*(d=a.x)+c._m12*(b=a.y)+c._m13*(e=a.z)+c._m14*(f=a.w);b=new O(a,c._m21*d+c._m22*b+c._m23*e+c._m24*f,c._m31*d+c._m32*b+c._m33*e+c._m34*f,c._m41*d+c._m42*b+c._m43*e+c._m44*f);e=this.view;e.x+=c=b.x;e.y+=d=b.y;e.z+=e=b.z;b=this.target;b.x+=c;b.y+=d;b.z+=e};yb.prototype.rotateY$N=function(a){var b,c,e,d,f,h,g,j,i,
k,l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,A,C;b=this.target;c=this.view;b=new m(b.x-c.x,b.y-c.y,b.z-c.z);i=Math.sin(a);k=Math.cos(a);c=k*(l=b.x)+0*(o=b.y)+i*(q=b.z)+0*(n=b.w);e=0*l+0*o+0*q+1*n;b.x=c/e;b.y=(0*l+1*o+0*q+0*n)/e;b.z=(-i*l+0*o+k*q+0*n)/e;b.w=1;c=this.view;b.x+=c.x;b.y+=c.y;b.z+=c.z;this.target=b;b=Math.sin(a);a=Math.cos(a);a=new T([a,0,b,0,0,1,0,0,-b,0,a,0,0,0,0,1]);d=this.rotatingMatrix;f=a._m11;h=a._m12;g=a._m13;j=a._m14;b=a._m21;c=a._m22;e=a._m23;i=a._m24;k=a._m31;l=a._m32;o=a._m33;q=a._m34;
n=a._m41;p=a._m42;r=a._m43;s=a._m44;a._m11=f*(u=d._m11)+h*(t=d._m21)+g*(v=d._m31)+j*(B=d._m41);a._m12=f*(D=d._m12)+h*(y=d._m22)+g*(x=d._m32)+j*(w=d._m42);a._m13=f*(z=d._m13)+h*(G=d._m23)+g*(A=d._m33)+j*(C=d._m43);a._m14=f*(f=d._m14)+h*(h=d._m24)+g*(g=d._m34)+j*(d=d._m44);a._m21=b*u+c*t+e*v+i*B;a._m22=b*D+c*y+e*x+i*w;a._m23=b*z+c*G+e*A+i*C;a._m24=b*f+c*h+e*g+i*d;a._m31=k*u+l*t+o*v+q*B;a._m32=k*D+l*y+o*x+q*w;a._m33=k*z+l*G+o*A+q*C;a._m34=k*f+l*h+o*g+q*d;a._m41=n*u+p*t+r*v+s*B;a._m42=n*D+p*y+r*x+s*w;
a._m43=n*z+p*G+r*A+s*C;a._m44=n*f+p*h+r*g+s*d;this.rotatingMatrix=a};yb.prototype.updateMatrix$=function(){var a,b,c,e,d,f,h,g,j,i,k,l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,A,C,E,J,M,F,K,H,O,P,S,L,N;a=this.view;b=this.target;c=this.upper;e=this.fovyX;d=this.nearZ;f=this.farZ;h=this.aspectRatio;b=new m(b.x-a.x,b.y-a.y,b.z-a.z);l=Math.sqrt((j=b.x)*j+(s=b.y)*s+(u=b.z)*u);j=1E-9>l?new m(0,0,0):b.divSelf$N(l);c=new m((D=c.y)*(t=j.z)-(o=c.z)*(B=j.y),o*(y=j.x)-(v=c.x)*t,v*B-D*y);o=Math.sqrt((i=c.x)*i+(q=c.y)*
q+(x=c.z)*x);i=1E-9>o?new m(0,0,0):c.divSelf$N(o);q=new m((G=j.y)*(p=i.z)-(n=j.z)*(z=i.y),n*(A=i.x)-(w=j.x)*p,w*z-G*A);n=Math.sqrt((k=q.x)*k+(C=q.y)*C+(E=q.z)*E);k=1E-9>n?new m(0,0,0):q.divSelf$N(n);a=new T([J=i.x,M=i.y,F=i.z,-(J*(H=a.x)+M*(P=a.y)+F*(S=a.z)),K=k.x,O=k.y,r=k.z,-(K*H+O*P+r*S),g=j.x,L=j.y,N=j.z,-(g*H+L*P+N*S),0,0,0,1]);e=1/Math.tan(e/2);f/=f-d;g=new T([e,0,0,0,0,e/h,0,0,0,0,f,-f*d,0,0,1,0]);this.viewMatrix=a;this.projectionMatrix=g;d=(S=g._m11)*(E=a._m11)+(N=g._m12)*(k=a._m21)+(C=g._m13)*
(L=a._m31)+(n=g._m14)*(r=a._m41);h=S*(e=a._m12)+N*(J=a._m22)+C*(M=a._m32)+n*(F=a._m42);f=S*(K=a._m13)+N*(H=a._m23)+C*(O=a._m33)+n*(P=a._m43);a=S*(S=a._m14)+N*(N=a._m24)+C*(C=a._m34)+n*(i=a._m44);n=(w=g._m21)*E+(z=g._m22)*k+(G=g._m23)*L+(A=g._m24)*r;p=(q=g._m31)*E+(x=g._m32)*k+(o=g._m33)*L+(t=g._m34)*r;r=(v=g._m41)*E+(E=g._m42)*k+(k=g._m43)*L+(g=g._m44)*r;this.matrix=new T([d,h,f,a,n,w*e+z*J+G*M+A*F,w*K+z*H+G*O+A*P,w*S+z*N+G*C+A*i,p,q*e+x*J+o*M+t*F,q*K+x*H+o*O+t*P,q*S+x*N+o*C+t*i,r,v*e+E*J+k*M+g*F,
v*K+E*H+k*O+g*P,v*S+E*N+k*C+g*i])};zb.prototype={};$.prototype=new zb;zb.prototype._to2DigitHex$I=function(a){a=Math.floor(a).toString(16);1===a.length&&(a="0"+a);return a};zb.prototype.toHexString$=function(){return this._to2DigitHex$I(this.r)+this._to2DigitHex$I(this.g)+this._to2DigitHex$I(this.b)};zb.prototype.toString=function(){return"#"+this._to2DigitHex$I(this.r)+this._to2DigitHex$I(this.g)+this._to2DigitHex$I(this.b)};pb.prototype={};yc.prototype=new pb;pb.isHiddenXY$ALVector$LEngine$=function(a,
b){var c,e,d,f,h;c=0;for(h=a.length;c<h;c++)if(e=a[c],-0<(d=e.x)&&d<b._width+0&&-0<(f=e.y)&&f<b._height+0)return!1;return!0};var lc=pb.isHiddenXY$ALVector$LEngine$;Xa.prototype=new pb;Ib.prototype=new Xa;Xa.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],e=a._m11*(h=c.x)+a._m12*(g=c.y)+a._m13*(j=c.z)+a._m14*(i=c.w),d=a._m21*h+a._m22*g+a._m23*j+a._m24*i,f=a._m31*h+a._m32*g+a._m33*j+a._m34*i,h=a._m41*h+a._m42*g+a._m43*j+a._m44*
i,c.x=e/h,c.y=d/h,c.z=f/h,c.w=1;this.updateCenter$()};Xa.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o;b=[];for(c=o=l=k=0;c<this.vertices.length;c++)e=this.vertices[c],e=a._m11*(h=e.x)+a._m12*(g=e.y)+a._m13*(j=e.z)+a._m14*(i=e.w),d=a._m21*h+a._m22*g+a._m23*j+a._m24*i,f=a._m31*h+a._m32*g+a._m33*j+a._m34*i,h=a._m41*h+a._m42*g+a._m43*j+a._m44*i,e=new O(e,d,f,h),b.push(e),k+=e.x,l+=e.y,o+=e.z;a=this.vertices.length;this.vCenter=new m(k/a,l/a,o/a);this.vVertices=b};Xa.prototype.isHidden$LCamera$=
function(a){var b;return a.nearZ<(b=this.vCenter.z)&&b<a.farZ?!1:!0};Xa.prototype.move$LVector$=function(a){var b,c;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],c.x+=a.x,c.y+=a.y,c.z+=a.z;this.updateCenter$()};Xa.prototype.updateCenter$=function(){var a,b,c,e,d;for(a=d=e=c=0;a<this.vertices.length;a++)b=this.vertices[a],c+=b.x,e+=b.y,d+=b.z;a=this.vertices.length;this.center=new m(c/a,e/a,d/a)};Xa.prototype.toString=function(){var a,b;a="[";for(b=0;b<this.vertices.length;b++)a+=this.vertices[b].toString()+
",";return a+"]"};Xa.prototype.draw$LEngine$=function(a){var b,c,e,d,f,h,g,j,i,k,l,o,q,n,p;b=a.context;c=this.vertices.length;e=this.vVertices;d=this._color;this._enabledLighting&&(f=this.vCenter,g=e[0],i=g.x-f.x,p=g.y-f.y,l=g.z-f.z,g=e[1],g=new m(g.x-f.x,g.y-f.y,g.z-f.z),k=(n=g.y)*l-(q=g.z)*p,l=q*i-(q=g.x)*l,k=g.x=k,l=g.y=l,i=g.z=q*p-n*i,i=Math.sqrt(k*k+l*l+i*i),g=1E-9>i?new m(0,0,0):g.divSelf$N(i),i=Math.sqrt((h=f.x)*h+(j=f.y)*j+(o=f.z)*o),f=1E-9>i?new m(0,0,0):new m(f.x/i,f.y/i,f.z/i),j=g.x*f.x+
g.y*f.y+g.z*f.z,f=(0.5599999999999999*j+0.5)*d.r,h=(0.5599999999999999*j+0.5)*d.g,d=(0.5599999999999999*j+0.5)*d.b,d=new $(255<=f?255:f,255<=h?255:h,255<=d?255:d));for(f=0;f<c;f++)h=e[f],i=a.camera.projectionMatrix,j=i._m11*(p=h.x)+i._m12*(n=h.y)+i._m13*(q=h.z)+i._m14*(k=h.w),o=i._m21*p+i._m22*n+i._m23*q+i._m24*k,g=i._m31*p+i._m32*n+i._m33*q+i._m34*k,i=i._m41*p+i._m42*n+i._m43*q+i._m44*k,h.x=j/i,h.y=o/i,h.z=g/i,h.w=1;for(f=0;f<c;f++)h=e[f],i=a.screenMatrix,j=i._m11*(p=h.x)+i._m12*(n=h.y)+i._m13*(q=
h.z)+i._m14*(k=h.w),o=i._m21*p+i._m22*n+i._m23*q+i._m24*k,g=i._m31*p+i._m32*n+i._m33*q+i._m34*k,i=i._m41*p+i._m42*n+i._m43*q+i._m44*k,h.x=j/i,h.y=o/i,h.z=g/i,h.w=1;if(lc(e,a))return!1;f=0;for(j=e.length;f<j;f++)if(a=(f+1)%j,h=(f+2)%j,0>Tc(e[a].x-e[f].x,e[a].y-e[f].y,e[h].x-e[f].x,e[h].y-e[f].y))return!1;d="#"+(d._to2DigitHex$I(d.r)+d._to2DigitHex$I(d.g)+d._to2DigitHex$I(d.b));b.strokeStyle=d;for(f=0;f<c;f++)b.beginPath(),b.moveTo(e[f].x,e[f].y),b.lineTo(e[(f+1)%c].x,e[(f+1)%c].y),b.stroke();b.fillStyle=
d;b.beginPath();for(f=0;f<c;f++)d=e[f].x,a=e[f].y,b.lineTo(d,a);b.closePath();b.fill();return!0};qb.prototype=new pb;zc.prototype=new qb;gc.prototype=new qb;qb.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j;b=this.center;c=a._m11*(f=b.x)+a._m12*(h=b.y)+a._m13*(g=b.z)+a._m14*(j=b.w);e=a._m21*f+a._m22*h+a._m23*g+a._m24*j;d=a._m31*f+a._m32*h+a._m33*g+a._m34*j;a=a._m41*f+a._m42*h+a._m43*g+a._m44*j;b.x=c/a;b.y=e/a;b.z=d/a;b.w=1};qb.prototype.applyViewMatrix$LMatrix$=function(a){var b,
c,e,d,f;b=this.center;b=a._m11*(c=b.x)+a._m12*(e=b.y)+a._m13*(d=b.z)+a._m14*(f=b.w);this.vCenter=new O(b,a._m21*c+a._m22*e+a._m23*d+a._m24*f,a._m31*c+a._m32*e+a._m33*d+a._m34*f,a._m41*c+a._m42*e+a._m43*d+a._m44*f)};qb.prototype.isHidden$LCamera$=function(a){return this._ignoringZHidden?!1:a.nearZ<this.vCenter.z&&this.vCenter.z<a.farZ?!1:!0};qb.prototype.draw$LEngine$=function(a){this.polygons.forEach$F$LPolygon$V$(function(b){b.isHidden$LCamera$(a.camera)||b.draw$LEngine$(a)});return!0};rb.prototype=
new Xa;hc.prototype=new rb;Vb.prototype=new rb;rb.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j,i;for(b=0;b<this.vertices.length;b++)c=this.vertices[b],e=a._m11*(h=c.x)+a._m12*(g=c.y)+a._m13*(j=c.z)+a._m14*(i=c.w),d=a._m21*h+a._m22*g+a._m23*j+a._m24*i,f=a._m31*h+a._m32*g+a._m33*j+a._m34*i,h=a._m41*h+a._m42*g+a._m43*j+a._m44*i,c.x=e/h,c.y=d/h,c.z=f/h,c.w=1;b=this.center;c=a._m11*(f=b.x)+a._m12*(h=b.y)+a._m13*(g=b.z)+a._m14*(j=b.w);e=a._m21*f+a._m22*h+a._m23*g+a._m24*j;d=a._m31*
f+a._m32*h+a._m33*g+a._m34*j;a=a._m41*f+a._m42*h+a._m43*g+a._m44*j;b.x=c/a;b.y=e/a;b.z=d/a;b.w=1};rb.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,e,d,f;b=[];for(c=0;c<this.vertices.length;c++)b.push(this.vertices[c].transform$LMatrix$(a));this.vVertices=b;e=this.center;e=a._m11*(b=e.x)+a._m12*(c=e.y)+a._m13*(d=e.z)+a._m14*(f=e.w);this.vCenter=new O(e,a._m21*b+a._m22*c+a._m23*d+a._m24*f,a._m31*b+a._m32*c+a._m33*d+a._m34*f,a._m41*b+a._m42*c+a._m43*d+a._m44*f)};rb.prototype.isHidden$LCamera$=
function(a){var b;return a.nearZ<(b=this.vCenter.z)&&b<a.farZ?!1:!0};rb.prototype.draw$LEngine$=function(a){var b=this,c,e,d,f,h,g,j,i,k,l,o,q,n,p,r,s,u,t,v,B,D,y,x,w,z,G,A,C,E,H,M,F,K,P,T,I,S,L,N,Q,W,X,Y,ja,Z,da,ea,ha,$,Wa,Xa,Ya,bb,nb,cb,db,eb,fb,Za,Na,Oa,Pa,Qa,Ra,ka,Sa,la,Ta,Ua,$a,Va,ab,Ia,Ha,Ja,Ka,La,xa,ya,za,Aa,Ba,Ca,Da,ua,Ea,va,Fa,wa,fa,ga,Ga,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,Ma,gb,hb,ib,jb,ob,pb,qb,rb,sb,kb,lb;if(!J.isLoadedImage[this._src])return!1;c=a.context;e=(ha=this.vertices)[3];d=ha[0];
f=ha[1];h=ha[2];o=a.screenMatrix;M=($=a.camera).projectionMatrix;F=$.viewMatrix;K=(Wa=M._m11)*(nb=F._m11)+(Xa=M._m12)*(cb=F._m21)+(Ya=M._m13)*(db=F._m31)+(bb=M._m14)*(eb=F._m41);P=Wa*(Za=F._m12)+Xa*(Oa=F._m22)+Ya*(Qa=F._m32)+bb*(ka=F._m42);T=Wa*(Sa=F._m13)+Xa*(la=F._m23)+Ya*(Ta=F._m33)+bb*(Ua=F._m43);I=Wa*($a=F._m14)+Xa*(Va=F._m24)+Ya*(ab=F._m34)+bb*(Ia=F._m44);S=(fb=M._m21)*nb+(Na=M._m22)*cb+(Pa=M._m23)*db+(Ra=M._m24)*eb;L=fb*Za+Na*Oa+Pa*Qa+Ra*ka;N=fb*Sa+Na*la+Pa*Ta+Ra*Ua;Q=fb*$a+Na*Va+Pa*ab+Ra*
Ia;W=(Ha=M._m31)*nb+(Ja=M._m32)*cb+(Ka=M._m33)*db+(La=M._m34)*eb;X=Ha*Za+Ja*Oa+Ka*Qa+La*ka;Y=Ha*Sa+Ja*la+Ka*Ta+La*Ua;ja=Ha*$a+Ja*Va+Ka*ab+La*Ia;Z=(xa=M._m41)*nb+(ya=M._m42)*cb+(za=M._m43)*db+(Aa=M._m44)*eb;da=xa*Za+ya*Oa+za*Qa+Aa*ka;ea=xa*Sa+ya*la+za*Ta+Aa*Ua;lb=xa*$a+ya*Va+za*ab+Aa*Ia;q=(Ba=o._m11)*K+(Ca=o._m12)*S+(Da=o._m13)*W+(ua=o._m14)*Z;n=Ba*P+Ca*L+Da*X+ua*da;p=Ba*T+Ca*N+Da*Y+ua*ea;r=Ba*I+Ca*Q+Da*ja+ua*lb;s=(Ea=o._m21)*K+(va=o._m22)*S+(Fa=o._m23)*W+(wa=o._m24)*Z;u=Ea*P+va*L+Fa*X+wa*da;t=Ea*
T+va*N+Fa*Y+wa*ea;v=Ea*I+va*Q+Fa*ja+wa*lb;B=(fa=o._m31)*K+(ga=o._m32)*S+(Ga=o._m33)*W+(aa=o._m34)*Z;D=fa*P+ga*L+Ga*X+aa*da;y=fa*T+ga*N+Ga*Y+aa*ea;x=fa*I+ga*Q+Ga*ja+aa*lb;w=(ba=o._m41)*K+(ca=o._m42)*S+(U=o._m43)*W+(ma=o._m44)*Z;z=ba*P+ca*L+U*X+ma*da;G=ba*T+ca*N+U*Y+ma*ea;kb=ba*I+ca*Q+U*ja+ma*lb;A=q*(na=e.x)+n*(oa=e.y)+p*(pa=e.z)+r*(qa=e.w);g=new O(A,s*na+u*oa+t*pa+v*qa,B*na+D*oa+y*pa+x*qa,w*na+z*oa+G*pa+kb*qa);C=q*(ra=d.x)+n*(sa=d.y)+p*(ta=d.z)+r*(Ma=d.w);j=new O(C,s*ra+u*sa+t*ta+v*Ma,B*ra+D*sa+y*
ta+x*Ma,w*ra+z*sa+G*ta+kb*Ma);E=q*(gb=f.x)+n*(hb=f.y)+p*(ib=f.z)+r*(jb=f.w);i=new O(E,s*gb+u*hb+t*ib+v*jb,B*gb+D*hb+y*ib+x*jb,w*gb+z*hb+G*ib+kb*jb);H=q*(ob=h.x)+n*(pb=h.y)+p*(qb=h.z)+r*(rb=h.w);k=new O(H,s*ob+u*pb+t*qb+v*rb,B*ob+D*pb+y*qb+x*rb,w*ob+z*pb+G*qb+kb*rb);if(lc([g,j,i,k],a))return!1;l=function(a,d,e,f,g,h,i,j,k,o,A,C,F,E){var H,J,V,M,N,K,P,S,T,L,I,R,Q,ia,W,X,Y,Z,da,ea,ha,ja,$,aa,ba,ca,U,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,fa,ga,Ga,Ha,Ia,Ja,Ka,La,Ma,ub,ka,la,Ua,Za,
$a,ab,cb,db,eb,fb,Na,Oa,Pa,Qa,Ra,Sa,Ta,Va,Wa,Xa,Ya,bb,gb,hb,ib,jb,lb,mb,nb,ob,pb,qb,rb,sb,tb,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Ib,Hb,Jb;H=function(a,b){return Math.sqrt(a*a+b*b)};J=H(j.x-i.x,j.y-i.y);V=H(k.x-h.x,k.y-h.y);M=H(h.x-i.x,h.y-i.y);N=H(k.x-j.x,k.y-j.y);K=J/V;P=N/M;1>K&&(K=1/K);1>P&&(P=1/P);S=1.01<K;T=1.01<P;o<=b._minDiv||o<=b._maxDiv&&S&&T?($=new m(d.x+g.x,d.y+g.y,d.z+g.z),$.x/=2,$.y/=2,$.z/=2,L=$,aa=new m(e.x+f.x,e.y+f.y,e.z+f.z),aa.x/=2,aa.y/=2,aa.z/=2,I=aa,ba=new m(d.x+e.x,d.y+e.y,
d.z+e.z),ba.x/=2,ba.y/=2,ba.z/=2,R=ba,ca=new m(g.x+f.x,g.y+f.y,g.z+f.z),ca.x/=2,ca.y/=2,ca.z/=2,Q=ca,U=new m(d.x+f.x,d.y+f.y,d.z+f.z),U.x/=2,U.y/=2,U.z/=2,ma=q*(Na=L.x)+n*(Oa=L.y)+p*(Pa=L.z)+r*(Qa=L.w),na=s*Na+u*Oa+t*Pa+v*Qa,oa=B*Na+D*Oa+y*Pa+x*Qa,pa=w*Na+z*Oa+G*Pa+kb*Qa,ia=new O(ma,na,oa,pa),qa=q*(Ra=I.x)+n*(Sa=I.y)+p*(Ta=I.z)+r*(Va=I.w),ra=s*Ra+u*Sa+t*Ta+v*Va,sa=B*Ra+D*Sa+y*Ta+x*Va,ta=w*Ra+z*Sa+G*Ta+kb*Va,W=new O(qa,ra,sa,ta),ua=q*(Wa=R.x)+n*(Xa=R.y)+p*(Ya=R.z)+r*(bb=R.w),va=s*Wa+u*Xa+t*Ya+v*bb,
wa=B*Wa+D*Xa+y*Ya+x*bb,xa=w*Wa+z*Xa+G*Ya+kb*bb,X=new O(ua,va,wa,xa),ya=q*(gb=Q.x)+n*(hb=Q.y)+p*(ib=Q.z)+r*(jb=Q.w),za=s*gb+u*hb+t*ib+v*jb,Aa=B*gb+D*hb+y*ib+x*jb,Ba=w*gb+z*hb+G*ib+kb*jb,Y=new O(ya,za,Aa,Ba),Ca=q*(lb=U.x)+n*(mb=U.y)+p*(nb=U.z)+r*(ob=U.w),Da=s*lb+u*mb+t*nb+v*ob,Ea=B*lb+D*mb+y*nb+x*ob,Fa=w*lb+z*mb+G*nb+kb*ob,Z=new O(Ca,Da,Ea,Fa),l(a,d,R,U,L,h,X,Z,ia,o+1,A,C,F/2,E/2),l(a,R,e,I,U,X,i,W,Z,o+1,A,C+E/2,F/2,E/2),l(a,L,U,Q,g,ia,Z,Y,k,o+1,A+F/2,C,F/2,E/2),l(a,U,I,f,Q,Z,W,j,Y,o+1,A+F/2,C+E/2,
F/2,E/2)):o<=b._maxVerticalDiv&&T?(fa=new m(d.x+g.x,d.y+g.y,d.z+g.z),fa.x/=2,fa.y/=2,fa.z/=2,L=fa,ga=new m(e.x+f.x,e.y+f.y,e.z+f.z),ga.x/=2,ga.y/=2,ga.z/=2,I=ga,Ga=q*(pb=L.x)+n*(qb=L.y)+p*(rb=L.z)+r*(sb=L.w),Ha=s*pb+u*qb+t*rb+v*sb,Ia=B*pb+D*qb+y*rb+x*sb,Ja=w*pb+z*qb+G*rb+kb*sb,ia=new O(Ga,Ha,Ia,Ja),Ka=q*(tb=I.x)+n*(vb=I.y)+p*(wb=I.z)+r*(xb=I.w),La=s*tb+u*vb+t*wb+v*xb,Ma=B*tb+D*vb+y*wb+x*xb,ub=w*tb+z*vb+G*wb+kb*xb,W=new O(Ka,La,Ma,ub),l(a,d,e,I,L,h,i,W,ia,o+1,A,C,F/2,E),l(a,L,I,f,g,ia,W,j,k,o+1,A+
F/2,C,F/2,E)):o<=b._maxHorizontalDiv&&S?(ka=new m(d.x+e.x,d.y+e.y,d.z+e.z),ka.x/=2,ka.y/=2,ka.z/=2,R=ka,la=new m(g.x+f.x,g.y+f.y,g.z+f.z),la.x/=2,la.y/=2,la.z/=2,Q=la,Ua=q*(yb=R.x)+n*(zb=R.y)+p*(Ab=R.z)+r*(Bb=R.w),Za=s*yb+u*zb+t*Ab+v*Bb,$a=B*yb+D*zb+y*Ab+x*Bb,ab=w*yb+z*zb+G*Ab+kb*Bb,X=new O(Ua,Za,$a,ab),cb=q*(Cb=Q.x)+n*(Db=Q.y)+p*(Eb=Q.z)+r*(Fb=Q.w),db=s*Cb+u*Db+t*Eb+v*Fb,eb=B*Cb+D*Db+y*Eb+x*Fb,fb=w*Cb+z*Db+G*Eb+kb*Fb,Y=new O(cb,db,eb,fb),l(a,d,R,Q,g,h,X,Y,k,o+1,A,C,F,E/2),l(a,R,e,f,Q,X,i,j,Y,o+1,
A,C+E/2,F,E/2)):(da=((Ib=k.x)-(Hb=h.x))/F,ea=((Jb=i.y)-(Gb=h.y))/E,ha=(k.y-Gb)/(Ib-Hb),ja=(i.x-Hb)/(Jb-Gb),c.transform(1,0,0,1,Hb,Gb),c.transform(1,ha,ja,1,0,0),c.transform(da,0,0,ea,0,0),c.drawImage(a,~~A,~~C,~~F,~~E,0,0,Math.ceil(F),Math.ceil(E)),c.setTransform(1,0,0,1,0,0))};l(sb=this._image,e,d,f,h,g,j,i,k,1,0,0,sb.width,sb.height);return!0};vb.prototype=new pb;ic.prototype=new vb;vb.prototype.applyWorldMatrix$LMatrix$=function(a){var b,c,e,d,f,h,g,j;b=this.center;c=a._m11*(f=b.x)+a._m12*(h=b.y)+
a._m13*(g=b.z)+a._m14*(j=b.w);e=a._m21*f+a._m22*h+a._m23*g+a._m24*j;d=a._m31*f+a._m32*h+a._m33*g+a._m34*j;a=a._m41*f+a._m42*h+a._m43*g+a._m44*j;b.x=c/a;b.y=e/a;b.z=d/a;b.w=1};vb.prototype.applyViewMatrix$LMatrix$=function(a){var b,c,e,d,f;b=this.center;b=a._m11*(c=b.x)+a._m12*(e=b.y)+a._m13*(d=b.z)+a._m14*(f=b.w);this.vCenter=new O(b,a._m21*c+a._m22*e+a._m23*d+a._m24*f,a._m31*c+a._m32*e+a._m33*d+a._m34*f,a._m41*c+a._m42*e+a._m43*d+a._m44*f)};vb.prototype.isHidden$LCamera$=function(a){var b;return a.nearZ<
(b=this.vCenter.z)&&b<a.farZ?!1:!0};vb.prototype.draw$LEngine$=function(a){var b,c,e,d,f,h,g,j,i,k,l,m,q,n,p,r,s,u,t,v,B,D,y,x,w,z,A,C,E,H,I,M,F;if(!J.isLoadedImage[this._src])return!1;b=a.context;h=a.screenMatrix;g=a.camera.projectionMatrix;d=(l=h._m11)*(v=g._m11)+(k=h._m12)*(B=g._m21)+(i=h._m13)*(D=g._m31)+(j=h._m14)*(r=g._m41);e=l*(s=g._m12)+k*(y=g._m22)+i*(x=g._m32)+j*(w=g._m42);f=l*(u=g._m13)+k*(z=g._m23)+i*(A=g._m33)+j*(C=g._m43);g=l*(c=g._m14)+k*(t=g._m24)+i*(E=g._m34)+j*(H=g._m44);j=(l=h._m21)*
v+(m=h._m22)*B+(q=h._m23)*D+(n=h._m24)*r;i=l*s+m*y+q*x+n*w;k=l*u+m*z+q*A+n*C;l=l*c+m*t+q*E+n*H;m=(p=h._m31)*v+(I=h._m32)*B+(M=h._m33)*D+(F=h._m34)*r;q=p*s+I*y+M*x+F*w;n=p*u+I*z+M*A+F*C;p=p*c+I*t+M*E+F*H;r=(I=h._m41)*v+(v=h._m42)*B+(B=h._m43)*D+(h=h._m44)*r;s=I*s+v*y+B*x+h*w;u=I*u+v*z+B*A+h*C;z=I*c+v*t+B*E+h*H;c=this.vCenter;A=this._width/2;C=this._height/2;A=c.x-A;C=c.y-C;y=c.z-0;t=this.vCenter;t=d*(c=t.x)+e*(x=t.y)+f*(w=t.z)+g*(E=t.w);c=new O(t,j*c+i*x+k*w+l*E,m*c+q*x+n*w+p*E,r*c+s*x+u*w+z*E);e=
new O(d*A+e*C+f*y+1*g,j*A+i*C+k*y+1*l,m*A+q*C+n*y+1*p,r*A+s*C+u*y+1*z);d=e.x-c.x;e=e.y-c.y;if(lc([c],a))return!1;a=2*(d/(f=this._image).width);f=2*(e/f.height);b.setTransform(a,0,0,f,0,0);b.drawImage(this._image,~~((c.x-d)/a),~~((c.y-e)/f));b.setTransform(1,0,0,1,0,0);return!0};Y.prototype={};(function(){this.tail=this.head=null;this.length=0}).prototype=new Y;Gb.prototype=new Y;Y.prototype.prepend$LVector$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:
(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};Y.prototype.append$LVector$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};Y.prototype.remove$LNode$Vector$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};Y.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=
null);this.length--;return a.value};Y.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};Y.prototype.insertAfter$LNode$Vector$E$LVector$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=e=a._next,c._prev=a,e._prev=c,a._next=c);this.length++;return this};Y.prototype.insertBefore$LNode$Vector$E$LVector$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};
null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=e=a._prev,e._next=c,a._prev=c);this.length++;return this};Y.prototype.forEach$F$LVector$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};Y.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};Wb.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new Wb;Wb.prev$LNode$Vector$E$=function(a){return a._prev};Wb.next$LNode$Vector$E$=
function(a){return a._next};Z.prototype={};fc.prototype=new Z;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LMatrix$(a.pop())}).prototype=new Z;Z.prototype.prepend$LMatrix$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};Z.prototype.append$LMatrix$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=
b=this.tail,b._next=a);this.tail=a;this.length++;return this};Z.prototype.remove$LNode$Matrix$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};Z.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=null);this.length--;return a.value};Z.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};Z.prototype.insertAfter$LNode$Matrix$E$LMatrix$=
function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=e=a._next,c._prev=a,e._prev=c,a._next=c);this.length++;return this};Z.prototype.insertBefore$LNode$Matrix$E$LMatrix$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=e=a._prev,e._next=c,a._prev=c);this.length++;return this};Z.prototype.forEach$F$LMatrix$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};Z.prototype.toString=
function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};Xb.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new Xb;Xb.prev$LNode$Matrix$E$=function(a){return a._prev};Xb.next$LNode$Matrix$E$=function(a){return a._next};da.prototype={};Wa.prototype=new da;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LRenderable$(a.pop())}).prototype=new da;da.prototype.prepend$LRenderable$=
function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;return this};da.prototype.append$LRenderable$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};da.prototype.remove$LNode$Renderable$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};
da.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=null);this.length--;return a.value};da.prototype.removeLast$=function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};da.prototype.insertAfter$LNode$Renderable$E$LRenderable$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=e=a._next,c._prev=a,e._prev=c,a._next=c);this.length++;return this};
da.prototype.insertBefore$LNode$Renderable$E$LRenderable$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=a,c._prev=e=a._prev,e._next=c,a._prev=c);this.length++;return this};da.prototype.forEach$F$LRenderable$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};da.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};Yb.prototype={};(function(a){this.value=
a;this._next=this._prev=null}).prototype=new Yb;Yb.prev$LNode$Renderable$E$=function(a){return a._prev};Yb.next$LNode$Renderable$E$=function(a){return a._next};ea.prototype={};wb.prototype=new ea;(function(a){var b,c;this.tail=this.head=null;this.length=0;b=a.length;for(c=0;c<b;c++)this.prepend$LPolygon$(a.pop())}).prototype=new ea;ea.prototype.prepend$LPolygon$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.tail=this.head=a:(a._next=b=this.head,this.head=b._prev=a);this.length++;
return this};ea.prototype.append$LPolygon$=function(a){var b,a={value:a,_prev:null,_next:null};0===this.length?this.head=a:(a._prev=b=this.tail,b._next=a);this.tail=a;this.length++;return this};ea.prototype.remove$LNode$Polygon$E$=function(a){a._prev?a._prev._next=a._next:this.head=a._next;a._next?a._next._prev=a._prev:this.tail=a._prev;return a.value};ea.prototype.removeFirst$=function(){var a,b;a=this.head;this.head=b=a._next;null!=b&&(a._next._prev=null);this.length--;return a.value};ea.prototype.removeLast$=
function(){var a,b;a=this.tail;this.tail=b=a._prev;null!=b&&(a._prev._next=null);this.length--;return a.value};ea.prototype.insertAfter$LNode$Polygon$E$LPolygon$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._next?(c._prev=a,this.tail=a._next=c):(c._next=e=a._next,c._prev=a,e._prev=c,a._next=c);this.length++;return this};ea.prototype.insertBefore$LNode$Polygon$E$LPolygon$=function(a,b){var c,e;c={value:b,_prev:null,_next:null};null==a._prev?(c._next=a,this.head=a._prev=c):(c._next=
a,c._prev=e=a._prev,e._next=c,a._prev=c);this.length++;return this};ea.prototype.forEach$F$LPolygon$V$=function(a){var b;for(b=this.head;b;b=b._next)a(b.value)};ea.prototype.toString=function(){var a,b;a="list : [";for(b=this.head;null!=b;b=b._next)a+=" "+b.value.toString()+",";return a+"]"};Zb.prototype={};(function(a){this.value=a;this._next=this._prev=null}).prototype=new Zb;Zb.prev$LNode$Polygon$E$=function(a){return a._prev};Zb.next$LNode$Polygon$E$=function(a){return a._next};P.prototype={};
Ac.prototype=new P;P.id$S=function(a){a=P.document.getElementById(a);return a instanceof HTMLElement?a:null};P.getElementById$S=function(a){a=P.document.getElementById(a);return a instanceof HTMLElement?a:null};P.createElement$S=function(a){return P.document.createElement(a)};H.prototype={};Bc.prototype=new H;H.setTimeout$F$V$N=function(a,b){return A.global.setTimeout(a,b)};H.clearTimeout$LTimerHandle$=function(a){A.global.clearTimeout(a)};var Uc=H.clearTimeout$LTimerHandle$;H.setInterval$F$V$N=function(a,
b){return A.global.setInterval(a,b)};H.clearInterval$LTimerHandle$=function(a){A.global.clearInterval(a)};H.requestAnimationFrame$F$NV$=function(a){return H._requestAnimationFrame(a)};H.cancelAnimationFrame$LTimerHandle$=function(a){H._cancelAnimationFrame(a)};H.useNativeRAF$B=function(a){H._requestAnimationFrame=Kc(a);H._cancelAnimationFrame=Lc(a)};H._getRequestAnimationFrameImpl$B=function(a){var b;if(a){if(A.global.requestAnimationFrame)return function(a){return A.global.requestAnimationFrame(a)};
if(A.global.webkitRequestAnimationFrame)return function(a){return A.global.webkitRequestAnimationFrame(a)};if(A.global.mozRequestAnimationFrame)return function(a){return A.global.mozRequestAnimationFrame(a)};if(A.global.oRequestAnimationFrame)return function(a){return A.global.oRequestAnimationFrame(a)};if(A.global.msRequestAnimationFrame)return function(a){return A.global.msRequestAnimationFrame(a)}}b=0;return function(a){var e,d,f;e=Date.now();f=16-(e-b);d=0>=f?0:f;b=e+d;return A.global.setTimeout(function(){a(e+
d)},d)}};var Kc=H._getRequestAnimationFrameImpl$B;H._getCancelAnimationFrameImpl$B=function(a){if(a){if(A.global.cancelAnimationFrame)return function(a){A.global.cancelAnimationFrame(a)};if(A.global.webkitCancelAnimationFrame)return function(a){A.global.webkitCancelAnimationFrame(a)};if(A.global.mozCancelAnimationFrame)return function(a){A.global.mozCancelAnimationFrame(a)};if(A.global.oCancelAnimationFrame)return function(a){A.global.oCancelAnimationFrame(a)};if(A.global.msCancelAnimationFrame)return function(a){A.global.msCancelAnimationFrame(a)}}return Uc};
var Lc=H._getCancelAnimationFrameImpl$B;jc.prototype={};Cc.prototype=new jc;Hb.prototype={};Dc.prototype=new Hb;Hb.cross$NNNN=function(a,b,c,e){return a*e-c*b};var Tc=Hb.cross$NNNN;W.prototype={};Ec.prototype=new W;W._currentMsec$LStopwatch$=function(){return Date.now()};W.start$LStopwatch$=function(a){if(null!=a._startedMsec){debugger;throw Error("[jsx/util.jsx:39] assertion failure");}a._startedMsec=a._lastLapMsec=Date.now()};var Jc=W.start$LStopwatch$;W.stop$LStopwatch$=function(a){if(null==a._startedMsec){debugger;
throw Error("[jsx/util.jsx:45] assertion failure");}a._elapsedMsec+=Date.now()-a._startedMsec;a._startedMsec=null;a._lastLapMsec=null};W.isStarted$LStopwatch$=function(a){return null!=a._startedMsec};W.isStopped$LStopwatch$=function(a){return null==a._startedMsec};var Vc=W.isStopped$LStopwatch$;W.lap$LStopwatch$=function(a){var b,c;if(null==a._lastLapMsec){debugger;throw Error("[jsx/util.jsx:65] assertion failure");}b=Date.now();c=b-a._lastLapMsec;a._lastLapMsec=b;return c};var Wc=W.lap$LStopwatch$;
W.getElapsedMsec$LStopwatch$=function(a){return a._elapsedMsec};sb.prototype={};Fc.prototype=new sb;Gc.prototype=new sb;sb.start$LFpsManager$=function(a){Jc(a._stopwatch)};sb.lastLap$LFpsManager$=function(a){return a._lastMsec};sb.update$LFpsManager$=function(a){var b,c,e;if(Vc(a._stopwatch)){debugger;throw Error("[jsx/util.jsx:126] assertion failure");}b=Wc(a._stopwatch);a._lastMsec=b;1>a._recentlyMsecLog.length?a._recentlyMsecLog.push(b):(a._recentlyMsecLog.push(b),a._recentlyMsecLog.shift());b=
a._recentlyMsecLog.length;for(e=c=0;e<b;e++)c+=a._recentlyMsecLog[e];b/=c/1E3;null!=a._fpsElement&&a._enabledHtmlLog?a._fpsElement.innerHTML=b.toFixed(1)+"fps":a._enabledConsoleLog&&console.log(b.toFixed(1)+"fps")};var Sc=sb.update$LFpsManager$;A.prototype={};Hc.prototype=new A;lb(J,"images",function(){return{}});lb(J,"imageDatas",function(){return{}});lb(J,"isLoadedImage",function(){return{}});lb(P,"window",function(){return A.global.window});lb(P,"document",function(){return A.global.document});
lb(H,"_requestAnimationFrame",function(){return Kc(!0)});lb(H,"_cancelAnimationFrame",function(){return Lc(!0)});A.global=function(){return this}();var Oc={"jsx/ball.jsx":{Util3D:Ya,Util3D$:mc,Player:ha,Player$:nc,BlueBall:I,BlueBall$:bc,_Main:Ub,_Main$:tc},"jsx/vector.jsx":{Vector:C,Vector$NNN:m,Vector$NNNN:O,Vector$LVector$:uc},"jsx/matrix.jsx":{Matrix:Q,Matrix$:ob,Matrix$AN:T},"jsx/quaternion.jsx":{Quaternion:X,Quaternion$NLVector$:vc,Quaternion$LVector$:wc,Quaternion$NNNN:tb},"jsx/engine.jsx":{Engine:J,
Engine$S:cc,Context3D:E,Context3D$LCamera$:xc,Camera:yb,Camera$LVector$LVector$LVector$NNNN:ec,Color:zb,Color$III:$,Renderable:pb,Renderable$:yc,Polygon:Xa,Polygon$ALVector$LColor$:Ib,PolygonGroup:qb,PolygonGroup$LList$Polygon$E$LVector$:zc,PolygonGroup$LList$Polygon$E$LVector$B:gc,SmoothTexture:rb,SmoothTexture$ALVector$S:hc,SmoothTexture$ALVector$SIIII:Vb,Billboard:vb,Billboard$LVector$NNS:ic},"system:lib/js/js/web.jsx":{dom:P,dom$:Ac},"system:lib/js/timer.jsx":{Timer:H,Timer$:Bc,TimerHandle:jc,
TimerHandle$:Cc},"jsx/util.jsx":{Math2D:Hb,Math2D$:Dc,Stopwatch:W,Stopwatch$:Ec,FpsManager:sb,FpsManager$:Fc,FpsManager$S:Gc},"system:lib/js/js.jsx":{js:A,js$:Hc}};JSX.runMain=function(a,b){var c=JSX.require(a);if(!c._Main)throw Error("entry point _Main not found in "+a);if(!c._Main.main$AS)throw Error("entry point _Main.main(:string[]):void not found in "+a);c._Main.main$AS(b)};JSX.runTests=function(a,b){var c=JSX.require(a)._Test$;if(c){if(0===b.length){var e=c.prototype,d;for(d in e)e[d]instanceof
Function&&/^test.*[$]$/.test(d)&&b.push(d)}var f=new c;null!=f.beforeClass$AS&&f.beforeClass$AS(b);for(c=0;c<b.length;++c)(function(a){f.run$SF$V$(a,function(){f[a]()})})(b[c]);null!=f.afterClass$&&f.afterClass$()}};window.addEventListener("load",$b);document.addEventListener("DOMContentLoaded",$b)})();
